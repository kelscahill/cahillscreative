let WPFormsPagesCommon=window.WPFormsPagesCommon||((n,l)=>{let r={},i={init:()=>{l(i.ready)},ready:()=>{i.initVars(),i.events()},initVars:()=>{r={$stepInstall:l("section.step-install"),$stepInstallNum:l("section.step-install .num img"),$stepSetup:l("section.step-setup"),$stepSetupNum:l("section.step-setup .num img"),$stepResult:l("section.step-result"),$stepResultNum:l("section.step-result .num img")}},events:()=>{r.$stepInstall.on("click","button",i.stepInstallClick),r.$stepSetup.on("click","button",i.gotoURL),r.$stepResult.on("click","button",i.gotoURL)},stepInstallClick:e=>{let a=l(e.currentTarget);if(!a.hasClass("disabled")){let s=a.attr("data-action"),t="";switch(s){case"activate":t="wpforms_activate_addon",a.text(wpforms_pluginlanding.activating);break;case"install":t="wpforms_install_addon",a.text(wpforms_pluginlanding.installing);break;case"goto-url":return void(n.location.href=a.attr("data-url"));default:return}a.addClass("disabled"),i.showSpinner(r.$stepInstallNum);e=a.attr("data-plugin"),e={action:t,nonce:wpforms_admin.nonce,plugin:e,type:"plugin"};l.post(wpforms_admin.ajax_url,e).done(function(t){i.stepInstallDone(t,a,s)}).always(function(){i.hideSpinner(r.$stepInstallNum)})}},stepInstallDone:(t,s,e)=>{var a="install"===e?t.success&&t.data.is_activated:t.success,n=s.data("provider");a?(r.$stepInstallNum.attr("src",r.$stepInstallNum.attr("src").replace("step-1.","step-complete.")),s.addClass("grey").removeClass("button-primary").text(wpforms_pluginlanding.activated),i.stepInstallPluginStatus(n)):(a="install"===e&&t.success&&!t.data.is_activated||"activate"===e,t=wpforms_pluginlanding[n+"_manual_install_url"]||"",e=a?wpforms_pluginlanding[n+"_manual_activate_url"]||"":t,n=a?wpforms_pluginlanding.error_could_not_activate:wpforms_pluginlanding.error_could_not_install,t=a?wpforms_pluginlanding.plugins_page:wpforms_pluginlanding.download_now,s.removeClass("grey disabled").text(t).attr("data-action","goto-url").attr("data-url",e),s.after('<p class="error">'+n+"</p>"))},stepInstallPluginStatus:t=>{t={action:"wpforms_page_check_"+t+"_status",nonce:wpforms_admin.nonce,provider:t};l.post(wpforms_admin.ajax_url,t).done(i.stepInstallPluginStatusDone)},stepInstallPluginStatusDone:t=>{t.success&&(r.$stepSetup.removeClass("grey"),r.$stepSetupBtn=r.$stepSetup.find("button"),0<t.data.setup_status?(r.$stepSetupNum.attr("src",r.$stepSetupNum.attr("src").replace("step-2.svg","step-complete.svg")),r.$stepResult.removeClass("grey"),r.$stepResultBtn=r.$stepResult.find("button"),"pro"===t.data.license_level&&!0===t.data.result_status?(r.$stepResultBtn.text(wpforms_pluginlanding.activated_pro),r.$stepResultNum.attr("src",r.$stepResultNum.attr("src").replace("step-3.svg","step-complete.svg"))):(r.$stepResultBtn.attr("data-url",t.data.step3_button_url),r.$stepResultBtn.removeClass("grey disabled").addClass("button-primary"))):r.$stepSetupBtn.removeClass("grey disabled").addClass("button-primary"))},gotoURL:t=>{var t=l(t.currentTarget),s=t.attr("data-url");!t.hasClass("disabled")&&s&&n.open(s,"_blank")},showSpinner:t=>{t.siblings("i.loader").removeClass("hidden")},hideSpinner:t=>{t.show(),t.siblings("i.loader").addClass("hidden")}};return i})((document,window),jQuery);WPFormsPagesCommon.init();