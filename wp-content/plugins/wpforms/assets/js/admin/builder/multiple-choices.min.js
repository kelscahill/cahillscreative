var WPForms=window.WPForms||{};WPForms.Admin=WPForms.Admin||{},WPForms.Admin.Builder=WPForms.Admin.Builder||{},WPForms.Admin.Builder.MultipleChoices=WPForms.Admin.Builder.MultipleChoices||((e,l)=>{let n={init(){l(n.ready)},ready(){n.bindEvents()},bindEvents(){n.$builder=l("#wpforms-builder"),n.$builder.on("change",".wpforms-field-option-row-choices_other input",n.toggleOtherOption),n.$builder.on("input",".wpforms-field-option-row-other_placeholder input",n.updateOtherOptionPlaceholder),n.$builder.on("change",".wpforms-field-option-row-other_size select",n.updateOptionInputFieldSize),l(e).on("wpformsAIModalAfterChoicesInsert",n.appendOtherOption),n.$builder.on("input",".wpforms-field-option-row-choices li.wpforms-choice-other-option input.value",n.updateOptionInputPreview),n.$builder.on("change",".wpforms-field-option-row-dynamic_choices select",n.toggleDynamicChoices),n.$builder.on("wpformsChoicesSetDefault",n.updateDefaultOptionState)},updateOptionInputPreview(){var e=l(this),i=e.closest(".choices-list").data("field-id"),o=l("#wpforms-field-option-"+i);o.find(".wpforms-field-option-row-show_values input").is(":checked")&&(e=e.val(),i=l("#wpforms-field-"+i).find(".wpforms-other-input"),o=o.find(".wpforms-field-option-row-other_placeholder input").val()||"",i.val(e??o))},updateOptionInputFieldSize(){var e=l(this),i=e.closest(".wpforms-field-option-row").data("field-id"),e=e.val()||"medium";n.setOtherSizeOnContainer(i,e)},updateDefaultOptionState(e,i){var o,i=l(i),t=i.closest(".choices-list");"radio"===t.data("field-type")&&(t=t.data("field-id"),o=i.closest("li"),t=l("#wpforms-field-"+t).find(".wpforms-other-input"),o.hasClass("wpforms-choice-other-option")?(o=i.is(":checked"),t.toggleClass("wpforms-hidden",!o)):t.addClass("wpforms-hidden").val(""))},toggleOtherOption(e){var i=l(this),o=i.closest(".wpforms-field-option-row").data("field-id"),t=l("#wpforms-field-option-"+o),i=i.is(":checked"),r=t.find(".wpforms-field-option-hidden-type").val(),d=l("#wpforms-field-option-row-"+o+"-choices .choices-list"),s=d.attr("data-next-id");i?(n.fieldChoiceAddOther(e,l(this),s),d.attr("data-next-id",++s)):(d.find("li.wpforms-choice-other-option").remove(),l("#wpforms-field-"+o).find(".wpforms-other-input").addClass("wpforms-hidden")),t.find(".wpforms-field-option-row-other_placeholder").toggleClass("wpforms-hidden",!i),t.find(".wpforms-field-option-row-other_size").toggleClass("wpforms-hidden",!i),i?(e=t.find(".wpforms-field-option-row-other_size select").val()||"medium",n.setOtherSizeOnContainer(o,e)):n.setOtherSizeOnContainer(o,null),WPFormsBuilder.fieldChoiceUpdate(r,o),n.updatePreviewState(o)},updateOtherOptionPlaceholder(){var e=l(this),i=e.closest(".wpforms-field-option-row").data("field-id"),e=e.val(),i=l("#wpforms-field-"+i+" .wpforms-other-input");i.length&&i.attr("placeholder",e)},toggleDynamicChoices(){var e,i=l(this);""!==i.val()&&(i=i.closest(".wpforms-field-option-row").data("field-id"),(e=l("#wpforms-field-option-"+i).find(".wpforms-field-option-row-choices_other input")).is(":checked")&&e.prop("checked",!1).trigger("change"),n.updatePreviewState(i))},createOtherChoice(e,i,o){var e=e.children("li").last().clone(),t=wpforms_builder.other;return e.attr("data-key",o),e.find("input.label").val(t).attr("name",`fields[${i}][choices][${o}][label]`),e.find("input.value").val("").attr("name",`fields[${i}][choices][${o}][value]`),e.find(".wpforms-image-upload input.source").val("").attr("name",`fields[${i}][choices][${o}][image]`),e.find(".wpforms-icon-select input.source-icon").val(wpforms_builder.icon_choices.default_icon).attr("name",`fields[${i}][choices][${o}][icon]`),e.find(".wpforms-icon-select input.source-icon-style").val(wpforms_builder.icon_choices.default_icon_style).attr("name",`fields[${i}][choices][${o}][icon_style]`),e.find(".wpforms-icon-select .ic-fa-preview").removeClass().addClass(`ic-fa-preview ic-fa-${wpforms_builder.icon_choices.default_icon_style} ic-fa-`+wpforms_builder.icon_choices.default_icon),e.find(".wpforms-icon-select .ic-fa-preview + span").text(wpforms_builder.icon_choices.default_icon),e.find("input.default").attr("name",`fields[${i}][choices][${o}][default]`).prop("checked",!1),e.find(".preview").empty(),e.find(".wpforms-image-upload-add").show(),e.addClass("wpforms-choice-other-option not-draggable"),e.find(".move, .add, .remove").addClass("wpforms-disabled"),e.find("input.other-flag").remove(),e.append(`<input type="hidden" class="other-flag" name="fields[${i}][choices][${o}][other]" value="1">`),e},fieldChoiceAddOther(e,i,o){var i=l(i).closest(".wpforms-field-option-row").data("field-id"),t=l(`#wpforms-field-option-row-${i}-choices .choices-list`),i=n.createOtherChoice(t,i,o);t.append(i)},appendOtherOption(e){var i,o,e=e?.detail?.fieldId,t=l("#wpforms-field-option-"+e),r=t.find(".wpforms-field-option-row-choices_other input");r.length&&r.is(":checked")&&(0<(r=l(`#wpforms-field-option-row-${e}-choices .choices-list`)).find("li.wpforms-choice-other-option").length||(i=parseInt(r.attr("data-next-id"),10),i=isNaN(i)?1:i,o=n.createOtherChoice(r,e,i),r.append(o),r.attr("data-next-id",i+1),o=t.find(".wpforms-field-option-hidden-type").val(),WPFormsBuilder.fieldChoiceUpdate(o,e)))},setOtherSizeOnContainer(e,i){e=l("#wpforms-field-"+e+".wpforms-field-radio");e.removeClass("size-small size-medium size-large"),i&&e.addClass("size-"+i)},showPreviewOther(e){var i=e.find(".wpforms-other-input");i.length&&(i.removeClass("wpforms-hidden"),(e=e.find('li.wpforms-other-choice input[type="radio"]')).length)&&e.val(i.val())},hidePreviewOther(e){e=e.find(".wpforms-other-input");e.length&&e.addClass("wpforms-hidden").val("")},updatePreviewState(e){var i,o,t,r=l("#wpforms-field-option-"+e),e=l("#wpforms-field-"+e);r.find(".wpforms-field-option-row-choices_other input").is(":checked")?((i=r.find('.choices-list li.wpforms-choice-other-option input[type="radio"]')).length&&i.is(":checked")?n.showPreviewOther(e):n.hidePreviewOther(e),(i=e.find(".wpforms-other-input")).length&&(t=r.find(".wpforms-field-option-row-show_values input").is(":checked"),o=r.find(".wpforms-field-option-row-other_placeholder input").val()||"",(t?(t=r.find(".choices-list li.wpforms-choice-other-option input.value").val()||"",i.val(t)):i.val("")).attr("placeholder",o))):n.hidePreviewOther(e)}};return n})(document,(window,jQuery)),WPForms.Admin.Builder.MultipleChoices.init();