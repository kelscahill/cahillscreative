export default function(e,d,i){class l extends WPForms.Admin.Builder.UndoRedoActionCommandBase.get(){static id="ActionFieldDuplicateCommand";constructor(e){super(e),this.actionName=this.getActionName()}execute(){n.UndoRedo.executeTriggerEvents&&this.duplicateField(this.args)}undo(){n.UndoRedo.executeTriggerEvents&&this.deleteField(this.args)}duplicateField(e){n.UndoRedo.preventRecord(!0),this.replaceDOMElementContent(n.el.$allFieldsPreview,e.new.$allFieldsPreview),this.replaceDOMElementContent(n.el.$allFieldsOptions,e.new.$allFieldsOptions);var d=i("#wpforms-field-"+e.fieldId),l=i("#wpforms-field-"+e.newFieldId);n.el.$builder.trigger("wpformsFieldDuplicated",[e.fieldId,d,e.newFieldId,l]),n.UndoRedoHelpersFields.reInitFields(e.newFieldId),n.UndoRedo.preventRecord(!1)}deleteField(e){n.UndoRedo.preventRecord(!0),this.replaceDOMElementContent(n.el.$allFieldsPreview,e.old.$allFieldsPreview),this.replaceDOMElementContent(n.el.$allFieldsOptions,e.old.$allFieldsOptions);var d=i("#wpforms-field-"+e.newFieldId).parents(".wpforms-field-layout-columns");n.el.$builder.trigger("wpformsFieldDelete",[e.newFieldId,e.fieldSettings?.type,d]),n.UndoRedoHelpersFields.reInitFields(e.fieldId),n.UndoRedo.preventRecord(!1)}getActionName(){var e,d;return this.actionName||(e=n.UndoRedoHelpersFields.getFieldName(null,this.args.fieldId),d=`(#${this.args.fieldId})`,[wp.i18n.__("Duplicate Field","wpforms"),n.actionNameSeparator,e,d].filter(Boolean).join(" "))}}let n={el:{},trackFieldSettings:{},init(){n.setup(),n.el.$builder.on("wpformsBuilderReady",_.debounce(n.ready,250))},setup(){n.el.$document=i(e),n.el.$builder=i("#wpforms-builder"),n.el.$allFieldsPreview=n.el.$builder.find(".wpforms-field-wrap"),n.el.$allFieldsOptions=n.el.$builder.find(".wpforms-field-options")},ready(){try{n.UndoRedo=WPForms.Admin.Builder.UndoRedo,n.UndoRedoHelpers=WPForms.Admin.Builder.UndoRedoHelpers,n.UndoRedoHelpersFields=WPForms.Admin.Builder.UndoRedoHelpersFields,n.undoManager=n.UndoRedo.undoManager,n.actionNameSeparator=n.UndoRedo.config.actionNameSeparator,n.el={...n.el,...n.UndoRedo.el}}catch(e){return void wpf.debug("UndoRedoActionFieldDuplicate: Dependency modules are not available.")}n.UndoRedo.registerCommand(l),n.events()},events(){n.el.$builder.on("wpformsBeforeFieldDuplicate",n.onBeforeFieldDuplicate).on("wpformsBeforeLayoutFieldDuplicate",n.onBeforeFieldDuplicate).on("wpformsFieldDuplicated",n.onFieldDuplicate)},onBeforeFieldDuplicate(e,d){n.UndoRedo.isRecordPrevented()||(n.trackFieldSettings[d]=wpf.getField(d),n.UndoRedoHelpersFields.getCurrentFieldsElements())},onFieldDuplicate(e,d,l,i,o){n.UndoRedo.isRecordPrevented()||(i=n.UndoRedo.getCommand("ActionFieldDuplicateCommand",{fieldId:d,newFieldId:i,$fieldPreview:l,$newFieldPreview:o,event:e.type??"",fieldSettings:n.trackFieldSettings[d]??wpf.getField(d),old:n.UndoRedoHelpersFields.getTrackedFieldsElements(),new:n.UndoRedoHelpersFields.getCurrentFieldsElements()}),n.UndoRedo.record(i))}};return n}