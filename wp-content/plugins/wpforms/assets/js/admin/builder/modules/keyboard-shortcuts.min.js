export default function(e,t,r){let o={el:{},init(){o.setup(),o.bcInit(),o.el.$builder.on("wpformsBuilderReady",_.debounce(o.ready,250))},bcInit(){["builderHotkeys","openKeyboardShortcutsModal"].forEach(e=>{WPFormsBuilder[e]=o[e]})},setup(){o.el.$builder=r("#wpforms-builder")},ready(){var e=WPFormsBuilder.getElementsCache();o.el=e.elements,o.browser=e.browser,o.events()},events(){o.builderHotkeys(),o.el.$document.on("keydown",o.onKeyDownUndoRedo)},onKeyDownUndoRedo(e){var t;(o.isMac()?e.metaKey:e.ctrlKey)&&(t=WPForms.Admin.Builder.UndoRedo,90!==e.keyCode||e.shiftKey?90===e.keyCode&&e.shiftKey&&(e.preventDefault(),t?.redo()):(e.preventDefault(),t?.undo()))},builderHotkeys(){o.el.$document.on("keydown",function(e){if(!o.isMac()&&e.altKey&&83===e.keyCode)r(o.el.$sidebarToggle,o.el.$builder).trigger("click");else if(e.ctrlKey){switch(e.keyCode){case 72:r(o.el.$helpButton,o.el.$builder).trigger("click");break;case 80:t.open(wpforms_builder.preview_url);break;case 66:r(o.el.$embedButton,o.el.$builder).trigger("click");break;case 69:t.open(wpforms_builder.entries_url);break;case 83:r(o.el.$saveButton,o.el.$builder).trigger("click");break;case 81:r(o.el.$exitButton,o.el.$builder).trigger("click");break;case 191:o.openKeyboardShortcutsModal();break;case 84:r(o.el.$sidebarToggle,o.el.$builder).trigger("click");break;case 70:o.el.$addFieldsTab.trigger("click"),o.el.$fieldsSidebar.scrollTop(0),o.el.$searchInput.focus();break;default:return}return!1}})},openKeyboardShortcutsModal(){r(".wpforms-builder-keyboard-shortcuts").length?jconfirm.instances[jconfirm.instances.length-1].close():r.alert({title:wpforms_builder.shortcuts_modal_title,content:wpforms_builder.shortcuts_modal_msg+wp.template("wpforms-builder-keyboard-shortcuts")(),icon:"fa fa-keyboard-o",type:"blue",boxWidth:"550px",smoothContent:!1,buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}},onOpenBefore(){this.$body.addClass("wpforms-builder-keyboard-shortcuts"),(o.browser.isLinux||o.browser.isWindows)&&this.$body.find(".shortcut-key.shortcut-key-ctrl-t").html("<i>alt</i><i>s</i>"),o.isMac()?this.$body.find(".shortcut-key.shortcut-key-ctrl-c, .shortcut-key.shortcut-key-ctrl-v").each(function(){r(this).find("i").first().text("⌘")}):this.$body.find(".shortcut-key.shortcut-key-ctrl-t").html("<i>alt</i><i>s</i>")}})},isUserTypingInField(){var e=o.el.$builder[0].ownerDocument.activeElement;return r(e).is('input, textarea, [contenteditable="true"]')},isMac(){return navigator.userAgent.includes("Macintosh")},pressMetaKey(e){return!!e&&(o.isMac()?e.metaKey:e.ctrlKey)},getMetaKeyName(){return o.isMac()?"⌘":"Ctrl"}};return o}