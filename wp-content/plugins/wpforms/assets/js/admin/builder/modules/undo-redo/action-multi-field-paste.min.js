export default function(e,d,i){class l extends WPForms.Admin.Builder.UndoRedoActionCommandBase.get(){static id="ActionMultiFieldPasteCommand";constructor(e){super(e),this.actionName=this.getActionName()}execute(){t.UndoRedo.executeTriggerEvents&&this.pasteFields(this.args)}undo(){t.UndoRedo.executeTriggerEvents&&this.deleteFields(this.args)}pasteFields(e){t.UndoRedo.preventRecord(!0),this.replaceDOMElementContent(t.el.$allFieldsPreview,e.new.$allFieldsPreview),this.replaceDOMElementContent(t.el.$allFieldsOptions,e.new.$allFieldsOptions),e.fieldIds.forEach(e=>{t.el.$builder.trigger("wpformsFieldPasted",[e])}),t.CopyPaste.selectPastedFields(e.fieldIds),t.UndoRedoHelpersFields.reInitFields(),t.UndoRedo.preventRecord(!1)}deleteFields(l){t.UndoRedo.preventRecord(!0),this.replaceDOMElementContent(t.el.$allFieldsPreview,l.old.$allFieldsPreview),this.replaceDOMElementContent(t.el.$allFieldsOptions,l.old.$allFieldsOptions),l.fieldIds.forEach(e=>{var d=i("#wpforms-field-"+e).parents(".wpforms-field-layout-columns");t.el.$builder.trigger("wpformsFieldDelete",[e,l.multiFieldSettings[e]?.type,d])}),t.el.$builder.trigger("wpformsMultiFieldDelete",[l.fieldIds]),t.UndoRedoHelpersFields.reInitFields(),t.UndoRedo.preventRecord(!1)}getActionName(){var e;return this.actionName||(e="#"+this.args.fieldIds.join(", #"),[wp.i18n.__("Paste Fields","wpforms"),t.actionNameSeparator,e].filter(Boolean).join(" "))}}let t={el:{},trackMultiFieldSettings:{},init(){t.setup(),t.el.$builder.on("wpformsBuilderReady",_.debounce(t.ready,250))},setup(){t.el.$document=i(e),t.el.$builder=i("#wpforms-builder"),t.el.$allFieldsPreview=t.el.$builder.find(".wpforms-field-wrap"),t.el.$allFieldsOptions=t.el.$builder.find(".wpforms-field-options")},ready(){try{t.UndoRedo=WPForms.Admin.Builder.UndoRedo,t.UndoRedoHelpers=WPForms.Admin.Builder.UndoRedoHelpers,t.UndoRedoHelpersFields=WPForms.Admin.Builder.UndoRedoHelpersFields,t.CopyPaste=WPForms.Admin.Builder.CopyPaste,t.actionNameSeparator=t.UndoRedo.config.actionNameSeparator,t.el={...t.el,...t.UndoRedo.el}}catch(e){return void wpf.debug("UndoRedoActionMultiFieldPaste: Dependency modules are not available.")}t.UndoRedo.registerCommand(l),t.events()},events(){t.el.$builder.on("wpformsBeforeMultiFieldPaste",t.onBeforeMultiFieldPaste).on("wpformsMultiFieldPasted",t.onMultiFieldPasted)},onBeforeMultiFieldPaste(e,d){t.UndoRedo.isRecordPrevented()||(t.trackMultiFieldSettings=[],d.forEach(e=>{t.trackMultiFieldSettings[e]=wpf.getField(e)}),t.UndoRedoHelpersFields.getCurrentFieldsElements())},onMultiFieldPasted(e,d){t.UndoRedo.isRecordPrevented()||(d=t.UndoRedo.getCommand("ActionMultiFieldPasteCommand",{fieldIds:d,multiFieldSettings:t.trackMultiFieldSettings,event:e.type??"",old:t.UndoRedoHelpersFields.getTrackedFieldsElements(),new:t.UndoRedoHelpersFields.getCurrentFieldsElements()}),t.UndoRedo.record(d))}};return t}