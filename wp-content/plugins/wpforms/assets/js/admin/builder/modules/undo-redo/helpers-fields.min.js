export default function(e,l,d){let r={el:{},init(){r.setup(),r.ready()},setup(){r.el.$document=d(e),r.el.$builder=d("#wpforms-builder"),r.el.$allFieldsPreview=r.el.$builder.find(".wpforms-field-wrap"),r.el.$allFieldsOptions=r.el.$builder.find(".wpforms-field-options"),r.el.$addFieldsTab=r.el.$builder.find("#wpforms-add-fields-tab")},ready(){try{r.UndoRedo=WPForms.Admin.Builder.UndoRedo,r.UndoRedoHelpers=WPForms.Admin.Builder.UndoRedoHelpers,r.CopyPaste=WPForms.Admin.Builder.CopyPaste,r.actionNameSeparator=r.UndoRedo.config.actionNameSeparator,r.el={...r.el,...r.UndoRedo.el}}catch(e){wpf.debug("UndoRedoHelpersFields: Dependency modules are not available.")}},getFieldName(e,l=null){return e?d(`.wpforms-add-fields-button[data-field-type="${e}"]`).text().trim():l?d(`#wpforms-field-${l} .label-title .text`).first().text().trim():""},getCurrentFieldsElements(){var e=r.UndoRedoHelpers?.getElementKey(r.el.$allFieldsPreview),l=r.UndoRedoHelpers?.getElementKey(r.el.$allFieldsOptions),d={$allFieldsPreview:r.prepareFieldsPreview(r.el.$allFieldsPreview),$allFieldsOptions:r.prepareFieldsOptions(r.el.$allFieldsOptions)};return r.UndoRedo.trackedElements.set(e,d.$allFieldsPreview),r.UndoRedo.trackedElements.set(l,d.$allFieldsOptions),d},getCurrentAddFieldsTab(){var e=r.UndoRedoHelpers?.getElementKey(r.el.$addFieldsTab),l=r.prepareAddFieldsTab(r.el.$addFieldsTab);return r.UndoRedo.trackedElements.set(e,l),l},getTrackedFieldsElements(){var e=r.UndoRedoHelpers?.getElementKey(r.el.$allFieldsPreview),l=r.UndoRedoHelpers?.getElementKey(r.el.$allFieldsOptions),d=r.UndoRedoHelpers?.getElementKey(r.el.$addFieldsTab);return{$allFieldsPreview:r.UndoRedo?.trackedElements.get(e),$allFieldsOptions:r.UndoRedo?.trackedElements.get(l),$addFieldsTab:r.UndoRedo?.trackedElements.get(d)}},getTrackedAddFieldsTab(){var e=r.UndoRedoHelpers?.getElementKey(r.el.$addFieldsTab);return r.UndoRedo?.trackedElements.get(e)},prepareFieldsPreview(e){let l=r.UndoRedoHelpers?.cloneWithValues(e);return l.find(".wpforms-field").removeClass("wpforms-field-multi-drag").removeClass("wpforms-field-dragging").attr("style",null),l.find(".wpforms-field-wrap").removeClass("ui-sortable-disabled"),l.find(".wpforms-field-drag-pending, .wpforms-field-drag-placeholder, .ui-sortable-placeholder").remove(),l=r.CopyPaste?.replaceChoicesJSWithOriginalSelect(l)||l,r.UndoRedoHelpers?.convertInputValuesToAttributes(l)},prepareAddFieldsTab(e){e=r.UndoRedoHelpers?.cloneWithValues(e);return e.find(".wpforms-add-fields-button").removeClass("ui-draggable-disabled"),e},applyAddFieldsButtonAttributes(e,l){r.UndoRedoHelpers?.replaceElementAttributes(r.el.$addFieldsTab.find("#wpforms-add-fields-"+e),l.find("#wpforms-add-fields-"+e))},prepareFieldsOptions(e){e=r.UndoRedoHelpers?.cloneWithValues(e),e=r.CopyPaste?.replaceChoicesJSWithOriginalSelect(e)||e;return r.UndoRedoHelpers?.convertInputValuesToAttributes(e)},isTopBottomPagebreaksAdded(){return 2===r.el.$allFieldsPreview.find(".wpforms-pagebreak-top, .wpforms-pagebreak-bottom").length},reInitFields(e=null){wpf.initTooltips(),WPFormsBuilder.loadColorPickers(),WPForms.Admin.Builder.DragFields?.setup(),WPForms.Admin.Builder.DragFields?.initSortableFields(),WPFormsBuilder.updatePagebreaksState(),WPFormsBuilder.loadEntryPreviewFields(),r.UndoRedoHelpers?.reInitChoicesJs(r.el.$allFieldsPreview),r.UndoRedoHelpers?.reInitChoicesJs(r.el.$allFieldsOptions),WPForms.Admin.Builder.SmartTags?.reinitWidgets(r.el.$allFieldsOptions),null===e?WPFormsBuilder.fieldTabToggle("add-fields"):WPFormsBuilder.fieldTabToggle(e),WPFormsBuilder.toggleNoFieldsPreview(),r.reInitSubmitButton()},reInitSubmitButton(){var e,l;0<r.el.$allFieldsPreview.find(".wpforms-field-paypal-commerce").length&&(e=d(".wpforms-preview .wpforms-field-submit"),l=d(".wpforms-field-option-paypal-checkout").is(":checked"),e.toggle(!l))}};return r}