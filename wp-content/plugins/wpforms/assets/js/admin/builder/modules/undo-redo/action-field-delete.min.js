export default function(e,d,l){class o extends WPForms.Admin.Builder.UndoRedoActionCommandBase.get(){static id="ActionFieldDeleteCommand";constructor(e){super(e),this.actionName=this.getActionName()}execute(){i.UndoRedo.executeTriggerEvents&&this.deleteField(this.args)}undo(){i.UndoRedo.executeTriggerEvents&&this.addField(this.args)}deleteField(e){i.UndoRedo.preventRecord(!0),this.replaceDOMElementContent(i.el.$allFieldsPreview,e.new.$allFieldsPreview),this.replaceDOMElementContent(i.el.$allFieldsOptions,e.new.$allFieldsOptions);var d=l("#wpforms-field-"+e.fieldId).parents(".wpforms-field-layout-columns");i.el.$builder.trigger("wpformsFieldDelete",[e.fieldId,e.type,d]),i.UndoRedoHelpersFields.applyAddFieldsButtonAttributes(e.type,e.new.$addFieldsTab),i.UndoRedoHelpersFields.reInitFields(),i.UndoRedo.preventRecord(!1)}addField(e){i.UndoRedo.preventRecord(!0),this.replaceDOMElementContent(i.el.$allFieldsPreview,e.old.$allFieldsPreview),this.replaceDOMElementContent(i.el.$allFieldsOptions,e.old.$allFieldsOptions);var d=i.el.$allFieldsPreview.find("#wpforms-field-"+e.fieldId),l=i.el.$allFieldsOptions.find("#wpforms-field-option-"+e.fieldId);i.el.$builder.trigger("wpformsFieldAdd",[e.fieldId,e.type,{isUndoRedo:!0},d,l]),i.UndoRedoHelpersFields.applyAddFieldsButtonAttributes(e.type,e.old.$addFieldsTab),i.UndoRedoHelpersFields.reInitFields(e.fieldId),i.UndoRedo.preventRecord(!1)}getActionName(){var e,d;return this.actionName||(e=i.UndoRedoHelpersFields.getFieldName(this.args.type),d=`(#${this.args.fieldId})`,[wp.i18n.__("Delete Field","wpforms"),i.actionNameSeparator,e,d].filter(Boolean).join(" "))}}let i={el:{},trackFieldSettings:{},init(){i.setup(),i.el.$builder.on("wpformsBuilderReady",_.debounce(i.ready,250))},setup(){i.el.$document=l(e),i.el.$builder=l("#wpforms-builder"),i.el.$allFieldsPreview=i.el.$builder.find(".wpforms-field-wrap"),i.el.$allFieldsOptions=i.el.$builder.find(".wpforms-field-options")},ready(){try{i.UndoRedo=WPForms.Admin.Builder.UndoRedo,i.UndoRedoHelpers=WPForms.Admin.Builder.UndoRedoHelpers,i.UndoRedoHelpersFields=WPForms.Admin.Builder.UndoRedoHelpersFields,i.undoManager=i.UndoRedo.undoManager,i.actionNameSeparator=i.UndoRedo.config.actionNameSeparator,i.el={...i.el,...i.UndoRedo.el}}catch(e){return void wpf.debug("UndoRedoActionFieldDelete: Dependency modules are not available.")}i.UndoRedo.registerCommand(o),i.events()},events(){i.el.$builder.on("wpformsBeforeFieldDelete",i.onBeforeFieldDelete).on("wpformsFieldDelete",i.onFieldDelete)},onBeforeFieldDelete(e,d,l){i.UndoRedo.isRecordPrevented()||(i.trackFieldSettings[d]=wpf.getField(d),i.UndoRedoHelpersFields.getCurrentFieldsElements(),i.UndoRedoHelpersFields.getCurrentAddFieldsTab())},onFieldDelete(e,d,l){i.UndoRedo.isRecordPrevented()||_.debounce(i.recordCommand,0)(e,d,l)},recordCommand(e,d,l){l=i.UndoRedo.getCommand("ActionFieldDeleteCommand",{fieldId:d,type:l,eventOptions:{},fieldSettings:i.trackFieldSettings[d],event:e.type??"",old:{...i.UndoRedoHelpersFields.getTrackedFieldsElements(),$addFieldsTab:i.UndoRedoHelpersFields.getTrackedAddFieldsTab()},new:{...i.UndoRedoHelpersFields.getCurrentFieldsElements(),$addFieldsTab:i.UndoRedoHelpersFields.getCurrentAddFieldsTab()}});i.UndoRedo.record(l)}};return i}