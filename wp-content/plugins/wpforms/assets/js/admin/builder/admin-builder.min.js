let WPFormsBuilderStartTime=Date.now();var WPFormsBuilder=window.WPFormsBuilder||((r,n,y)=>{let w,C,k={},e={},i=!0,a=!1,o=null,F={settings:{spinner:'<i class="wpforms-loading-spinner"></i>',spinnerInline:'<i class="wpforms-loading-spinner wpforms-loading-inline"></i>',tinymceDefaults:{tinymce:{toolbar1:"bold,italic,underline,blockquote,strikethrough,bullist,numlist,alignleft,aligncenter,alignright,undo,redo,link"},quicktags:!0},pagebreakTop:!1,pagebreakBottom:!1,upload_img_modal:!1,choicesLimit:20,choicesLimitLong:250},init(){let e=this;wpforms_panel_switch=!0,w=this.settings,y(F.ready),y(n).on("load",function(){"function"==typeof y.ready.then?y.ready.then(F.loadFinalizer):F.loadFinalizer()}),y(n).on("beforeunload",function(){if(!e.formIsSaved()&&i)return wpforms_builder.are_you_sure_to_close})},loadFinalizer(){F.loadModulesPromise?F.loadModulesPromise.finally(F.load):F.load()},load(){if(wpf.getQueryString("newform")&&F.formSave(!1),"revisions"===y("#wpforms-panels-toggle .active").data("panel")&&F.updateRevisionPreview(),WPFormsUtils.triggerEvent(C,"wpformsBuilderReady").isDefaultPrevented())return!1;F.hideLoadingOverlay(),F.determineActiveSections(),F.confirmationsSetup(),WPFormsUtils.triggerEvent(C,"wpformsBuilderConfirmationsReady"),F.loadMsWinCSS(),"1"==wpforms_builder.template_modal_display&&"fields"===wpf.getQueryString("view")&&y.alert({title:wpforms_builder.template_modal_title,content:wpforms_builder.template_modal_msg,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}}),wpf._updateFormState(),wpf.debug("Form Builder loading time:",((Date.now()-WPFormsBuilderStartTime)/1e3).toFixed(3))},initElementsCache(){C=y("#wpforms-builder"),k.$document=y(r),k.$builder=C,e.isWindows=/Win/.test(navigator.userAgent),e.isLinux=/Linux/.test(navigator.userAgent),e.isMac=/Mac/.test(navigator.userAgent),k.$helpButton=y(".js-wpforms-help"),k.$previewButton=y("#wpforms-preview-btn"),k.$embedButton=y("#wpforms-embed"),k.$saveButton=y("#wpforms-save"),k.$exitButton=y("#wpforms-exit"),k.$noFieldsOptions=y("#wpforms-panel-fields .wpforms-no-fields-holder .no-fields"),k.$noFieldsPreview=y("#wpforms-panel-fields .wpforms-no-fields-holder .no-fields-preview"),k.$formPreview=y("#wpforms-panel-fields .wpforms-preview-wrap"),k.$revisionPreview=y("#wpforms-panel-revisions .wpforms-panel-content"),k.defaultEmailSelector=".wpforms-field-option-email .wpforms-field-option-row-default_value input",k.$defaultEmail=y(k.defaultEmailSelector),k.$focusOutTarget=null,k.$nextFieldId=y("#wpforms-field-id"),k.$addFieldsTab=y("#add-fields a"),k.$fieldOptions=y("#wpforms-field-options"),k.$fieldsPreviewWrap=y("#wpforms-panel-fields .wpforms-panel-content-wrap"),k.$sortableFieldsWrap=y("#wpforms-panel-fields .wpforms-field-wrap"),k.$addFieldsButtons=y(".wpforms-add-fields-button").not(".not-draggable").not(".warning-modal").not(".education-modal"),k.$fieldsSidebar=y("#wpforms-panel-fields .wpforms-add-fields"),k.$searchInput=y("#wpforms-search-fields-input"),k.$sidebarToggle=y(".wpforms-panels .wpforms-panel-sidebar-content .wpforms-panel-sidebar-toggle")},ready(){F.isVisitedViaBackButton()?location.reload():(F.initElementsCache(),y.ajaxSetup({data:{_wp_http_referer:wpf.updateQueryString("_wp_http_referer",null)}}),F.isBuilderInPopup()&&(k.$embedButton.remove(),k.$previewButton.addClass("wpforms-alone")),F.loadModules(),F.bindUIActions(),w.formID=y("#wpforms-builder-form").data("id"),F.updatePagebreaksState(),C.on("keypress","#wpforms-builder-form :input:not(textarea)",function(e){13===e.keyCode&&e.preventDefault()}),F.loadEntryPreviewFields(),F.fieldChoiceSortable("select"),F.fieldChoiceSortable("radio"),F.fieldChoiceSortable("checkbox"),F.fieldChoiceSortable("payment-multiple"),F.fieldChoiceSortable("payment-checkbox"),F.fieldChoiceSortable("payment-select"),y(".wpforms-add-fields-group").each(function(){F.fieldGroupToggle(y(this),"load")}),F.registerTemplates(),F.trimFormTitle(),wpf.initTooltips(),F.loadColorPickers(),F.captchaToggle(),F.notificationToggle(),F.notificationsByStatusAlerts(),jconfirm.defaults={closeIcon:!1,backgroundDismiss:!1,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",animateFromElement:!1,content:wpforms_builder.something_went_wrong},F.dropdownField.init(),F.iconChoices.init(),F.disabledFields.init(),F.checkEmptyDynamicChoices(),F.initSomeFieldOptions(),F.dismissNotice(),wpf.initializeChoicesEventHandlers())},loadModules(e=null){e=e||wpforms_builder.js_modules||{};e=Object.entries(e).map(([i,e])=>{e=e.startsWith(wpforms_builder.content_url)?e:"./modules/"+e;return import(e+"?v="+wpforms_builder.version).then(e=>[i,e])});F.loadModulesPromise=Promise.all(e).then(async e=>{for(var[i,o]of e)WPForms.Admin.Builder[i]=o.default(r,n,y),C.on("wpformsBuilderModulesInit",WPForms.Admin.Builder[i].init);WPFormsUtils.triggerEvent(C,"wpformsBuilderModulesInit",[e]),WPFormsUtils.triggerEvent(C,"wpformsBuilderModulesLoaded",[e])}).catch(e=>{wpf.debug("Error importing modules:",e)}).finally(()=>{F.loadModulesPromise=null})},checkEmptyDynamicChoices(){var e=wpf.orders.choices||{};Object.keys(e).length&&wpf.orders.fields.forEach(function(i){if(F.dropdownField.helpers.isDynamicChoices(i)){var o=y("#wpforms-field-"+i),t=F.dropdownField.helpers.getDynamicChoicesOptionType(i),r=F.dropdownField.helpers.getDynamicChoicesOptionSource(i),s=F.dropdownField.helpers.isDynamicChoicesOptionModern(i);let e=s?o.find(".has-no-choices").length:0===o.find(".primary-input option:not(.placeholder), .primary-input li").length;s&&!e&&(o=y("#wpforms-field-option-"+i+"-placeholder").val(),s=F.dropdownField.helpers.getInitialChoices(i),e=1===s.length&&s[0].label===o&&!0===s[0].placeholder),e&&F.emptyChoicesNotice(i,r,t)}})},loadMsWinCSS(){e.isMac||y("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:wpforms_builder.scrollbars_css_url})},isVisitedViaBackButton(){if(!performance)return!1;let i=!1;return performance.getEntriesByType("navigation").forEach(function(e){"back_forward"===e.type&&(i=!0)}),i},hideLoadingOverlay(){let e=y("#wpforms-builder-overlay");e.addClass("fade-out"),setTimeout(function(){e.hide()},250)},showLoadingOverlay(){var e=y("#wpforms-builder-overlay");e.removeClass("fade-out"),e.show()},initSomeFieldOptions(){F.toggleAllOptionGroups(C),C.find(".wpforms-field-option-row-date .type select").trigger("change"),C.find(".wpforms-field-option-row-read_only input:checked").trigger("change")},dropdownField:{config:{modernClass:"choicesjs-select",args:{searchEnabled:!1,searchChoices:!1,renderChoiceLimit:1,shouldSort:!1,callbackOnInit(){var e=y(this.containerOuter.element),i=e.closest(".wpforms-field").find("select");e.hasClass("is-disabled")&&e.removeClass("is-disabled"),i.is("[readonly]")&&(this.disable(),i.prop("disabled",!1)),this.passedElement.element.multiple&&this.getValue(!0).length&&y(this.input.element).addClass("choices__input--hidden"),e.find(".choices__item--selectable").each(function(){var e=y(this),i=wpf.decodeAllowedHTMLEntities(e.text());e.text(i)})}}},init(){C.find("."+F.dropdownField.config.modernClass).each(function(){F.dropdownField.events.choicesInit(y(this))}),C.on("change",".wpforms-field-option-select .wpforms-field-option-row-multiple input",F.dropdownField.events.multiple),C.on("change",".wpforms-field-option-select .wpforms-field-option-row-style select, .wpforms-field-option-payment-select .wpforms-field-option-row-style select",F.dropdownField.events.applyStyle),C.on("click",".choices",function(e){var i=y(this),o=i.find("select").data("choicesjs");o&&i.hasClass("is-open")&&e.target.classList.contains("choices__inner")&&o.hideDropdown()})},events:{choicesInit(e){var i=1===e.data("choicesjs-use-ajax"),o=F.dropdownField.config.args;let t;t="select_pages"===e.data("choicesjs-callback-fn")?WPForms.Admin.Builder.WPFormsChoicesJS.setup(e[0],o,{action:"wpforms_ajax_search_pages_for_dropdown",nonce:i?wpforms_builder.nonce:null}):new Choices(e[0],o),F.dropdownField.helpers.setInstance(e,t),F.dropdownField.helpers.addPlaceholderChoice(e,t),e.closest(".choices").toggleClass("wpforms-hidden",!t.config.choices.length)},multiple(e){var i=y(this).closest(".wpforms-field-option-row-multiple").data().fieldId,o=F.dropdownField.helpers.getPrimarySelector(i),t=y(`#wpforms-field-option-row-${i}-choices input.default`),r=o.find(".placeholder"),s=F.dropdownField.helpers.isDynamicChoices(i),e=e.target.checked,l=e?"checkbox":"radio",l=(o.prop("multiple",e),t.prop("type",l),s&&o.find("option:selected").prop("selected",!1),t.filter(":checked"));!e&&l.length&&(t.prop("checked",!1),y(l.get(0)).prop("checked",!0)),r.length&&r.prop("selected",!e),F.dropdownField.helpers.update(i,s)},applyStyle(){var e=y(this),i=e.closest(".wpforms-field-option-row-style").data().fieldId;"modern"===e.val()?F.dropdownField.helpers.convertClassicToModern(i):F.dropdownField.helpers.convertModernToClassic(i)}},helpers:{convertModernToClassic:e=>{var i=F.dropdownField.helpers.getPrimarySelector(e),o=F.dropdownField.helpers.isDynamicChoices(e),i=F.dropdownField.helpers.getInstance(i),t=y("#wpforms-field-option-row-"+e+"-choices").find(".choices-list").find("li").length;i&&"function"==typeof i.destroy&&(i.destroy(),F.dropdownField.helpers.updatePlaceholderChoice(i,e)),o||F.fieldChoiceUpdate("select",e,t)},getInitialChoices(e){e=F.dropdownField.helpers.getPrimarySelector(e);return F.dropdownField.helpers.getInstance(e).config.choices},convertClassicToModern(e){var i=F.dropdownField.helpers.getPrimarySelector(e);F.dropdownField.helpers.isDynamicChoices(e)||F.fieldChoiceUpdate("select",e),F.dropdownField.events.choicesInit(i)},update(e,i){var o=F.dropdownField.helpers.getPrimarySelector(e);F.dropdownField.helpers.isModernSelect(o)?(F.dropdownField.helpers.convertModernToClassic(e),i||F.dropdownField.events.choicesInit(o)):i||F.fieldChoiceUpdate("select",e)},addPlaceholderChoice(e,i){e=e.closest(".wpforms-field");if(e.length<=0)return!1;var o,t,r,e=e.data().fieldId;let s=F.dropdownField.helpers.hasDefaults(e);return F.dropdownField.helpers.isDynamicChoices(e)&&(s=!1),!1===F.dropdownField.helpers.searchPlaceholderChoice(i)&&!!i.config.choices.length&&(e=y("#wpforms-field-option-"+e+"-placeholder").val(),o=wpf.decodeAllowedHTMLEntities(e),r=!((t=y(i.passedElement.element).prop("multiple"))||s),i.setChoices([{value:"",label:o,selected:r,placeholder:!0}],"value","label",!1),t&&y(i.input.element).prop("placeholder",e),!0)},searchPlaceholderChoice(e){let o=!1;return e.config.choices.forEach(function(e,i){if(void 0!==e.placeholder&&!0===e.placeholder)return!(o={key:i,item:e})}),o},updatePlaceholderChoice(e,i){var o=y(e.passedElement.element),i=wpf.sanitizeHTML(y("#wpforms-field-option-"+i+"-placeholder").val()),e=F.dropdownField.helpers.searchPlaceholderChoice(e);let t={};"object"==typeof e&&(t=y(o.find("option").get(e.key))),""!==i?!y.isEmptyObject(t)&&t.length?t.addClass("placeholder").text(i):o.prepend('<option value="" class="placeholder">'+i+"</option>"):t.length&&t.remove()},isModernSelect(e){e=F.dropdownField.helpers.getInstance(e);return"object"==typeof e&&!y.isEmptyObject(e)&&e.initialised},setInstance(e,i){e.data("choicesjs",i)},getInstance(e){return e.data("choicesjs")},getDynamicChoicesOption(e){e=y("#wpforms-field-option-"+e+"-dynamic_choices");return!!e.length&&e},isDynamicChoices(e){e=F.dropdownField.helpers.getDynamicChoicesOption(e);return!!e.length&&""!==e.val()},isDynamicChoicesOptionModern(e){e=y("#wpforms-field-option-"+e+"-style");return!!e.length&&"modern"===e.val()},getDynamicChoicesOptionType(e){e=F.dropdownField.helpers.getDynamicChoicesOption(e);return!!e.length&&e.val()},getDynamicChoicesOptionSource(e){var i=F.dropdownField.helpers.getDynamicChoicesOptionType(e),e=y("#wpforms-field-option-"+e+"-dynamic_"+i);return!!e.length&&e.find("option:selected").text()},hasDefaults(e){return!!y(`#wpforms-field-option-row-${e}-choices .choices-list`).find("input.default:checked").length},getPrimarySelector(e){return y("#wpforms-field-"+e+" .primary-input")}}},numberSliderEvents(e){e.on("focusout",".wpforms-field-option-row-min_max .wpforms-input-row .wpforms-number-slider-min",F.fieldNumberSliderUpdateMin),e.on("focusout",".wpforms-field-option-row-min_max .wpforms-input-row .wpforms-number-slider-max",F.fieldNumberSliderUpdateMax),e.on("input",".wpforms-number-slider-default-value",_.debounce(F.changeNumberSliderDefaultValue,500)),e.on("focusout",".wpforms-number-slider-default-value",F.changeNumberSliderEmptyDefaultValue),e.find(".wpforms-number-slider-default-value").trigger("input"),e.on("input",".wpforms-number-slider-step",_.debounce(F.changeNumberSliderStep,500)),e.on("focusout",".wpforms-number-slider-step",F.checkNumberSliderStep),e.on("input",".wpforms-number-slider-value-display",_.debounce(F.changeNumberSliderValueDisplay,500)),e.on("input",".wpforms-number-slider-min",_.debounce(F.changeNumberSliderMin,500)),e.on("input",".wpforms-number-slider-max",_.debounce(F.changeNumberSliderMax,500))},changeNumberSliderMin(e){var i=parseFloat(e.target.value);isNaN(i)||(i=y(e.target).parents(".wpforms-field-option-row").data("fieldId"),F.updateNumberSliderDefaultValueAttr(i,e.target.value,"min"))},changeNumberSliderMax(e){var i=parseFloat(e.target.value);isNaN(i)||(i=y(e.target).parents(".wpforms-field-option-row").data("fieldId"),F.updateNumberSliderDefaultValueAttr(i,e.target.value,"max").updateNumberSliderStepValueMaxAttr(i,e.target.value))},changeNumberSliderValueDisplay(e){var i=e.target.value,e=y(e.target).parents(".wpforms-field-option-row").data("fieldId"),o=r.getElementById("wpforms-field-option-"+e+"-default_value");o&&F.updateNumberSliderHintStr(e,i).updateNumberSliderHint(e,o.value)},changeNumberSliderStep(e){var i,o,t,r=y(this),s=parseFloat(r.val());isNaN(s)||s<=0||(o=y(r).closest(".wpforms-field-option"),(t=((i=parseFloat(o.find(".wpforms-number-slider-max").val()))-(o=parseFloat(o.find(".wpforms-number-slider-min").val()))).toFixed(2))<s?(e.target.value=t,r.trigger("input")):(t=y(e.target).parents(".wpforms-field-option-row").data("fieldId"),r=y("#wpforms-field-option-"+t+"-default_value").val(),F.checkMultiplicitySliderDefaultValue(t,r,s,o,i).updateNumberSliderAttr(t,s,"step").updateNumberSliderDefaultValueAttr(t,s,"step")))},checkMultiplicitySliderDefaultValue(e,i,o,t=0,r=0){e=y(`#wpforms-field-option-row-${e}-default_value`);return((i=parseFloat(i))-t)%o==0?F.removeNotice(e):({closestSmallerMultiple:o,closestLargerMultiple:t}=this.calculateClosestMultiples(i,o,t,r),i=(r=e=>e%1==0?e.toString():e.toFixed(2))(i),(o=r(o))===(r=r(t))||o===i||r===i?F.removeNotice(e):(t=wpforms_builder.number_slider_error_valid_default_value.replace("{from}",o).replace("{to}",r),F.printNotice(t,e))),this},calculateClosestMultiples(e,i,o,t){let r=o+Math.floor((e-o)/i)*i,s=o+Math.ceil((e-o)/i)*i;return e===(s=e===r&&e!==o?r+i:s)&&e!==t&&(r=s-i),e===o&&(s=o+i),e===t&&(r=t-i),r=Math.max(r,o),s=Math.min(s,t),{closestSmallerMultiple:r,closestLargerMultiple:s}},printNotice(e,i,o=!1){i.length&&(this.removeNotice(i),i.append(`<div class="wpforms-alert-warning wpforms-alert ${o?"wpforms-alert-warning-wide":""}"><p>${e}</p></div>`))},removeNotice(e){e.length&&e.find(".wpforms-alert").length&&e.find(".wpforms-alert").remove()},checkNumberSliderStep(e){e=parseFloat(e.target.value);if(isNaN(e)||!(0<e)){let e=y(this);y.confirm({title:wpforms_builder.heads_up,content:wpforms_builder.error_number_slider_increment,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){e.val("").trigger("focus")}}}})}},changeNumberSliderEmptyDefaultValue(e){var i,o,t,r=parseFloat(e.target.value);isNaN(r)&&(r=parseFloat(e.target.min),e.target.value=r,i=parseFloat(e.target.step),o=parseFloat(e.target.min),t=parseFloat(e.target.max),e=y(e.target).parents(".wpforms-field-option-row-default_value").data("fieldId"),F.checkMultiplicitySliderDefaultValue(e,r,i,o,t).updateNumberSlider(e,r).updateNumberSliderHint(e,r))},changeNumberSliderDefaultValue(e){var i,o,t,r=parseFloat(e.target.value);isNaN(r)||((i=parseFloat(e.target.max))<r?e.target.value=i:r<(o=parseFloat(e.target.min))?e.target.value=o:(t=parseFloat(e.target.step),e=y(e.target).parents(".wpforms-field-option-row-default_value").data("fieldId"),F.checkMultiplicitySliderDefaultValue(e,r,t,o,i).updateNumberSlider(e,r).updateNumberSliderHint(e,r)))},updateNumberSliderDefaultValueAttr(e,i,o){var t,e=r.getElementById("wpforms-field-option-"+e+"-default_value");return e&&(t=parseFloat(e.value),e.setAttribute(o,i),i=parseFloat(i),"max"===o&&i<t&&(e.value=i),"min"===o)&&t<i&&(e.value=i),this},updateNumberSlider(e,i){e=r.getElementById("wpforms-number-slider-"+e);return e&&(e.value=i),this},updateNumberSliderAttr(e,i,o){e=r.getElementById("wpforms-number-slider-"+e);return e&&e.setAttribute(o,i),this},updateNumberSliderHintStr(e,i){e=r.getElementById("wpforms-number-slider-hint-"+e);return e&&(e.dataset.hint=i),this},updateNumberSliderHint(e,i){e=r.getElementById("wpforms-number-slider-hint-"+e);return e&&(e.innerHTML=wpf.sanitizeHTML(e.dataset.hint).replaceAll("{value}","<b>"+i+"</b>")),this},fieldNumberSliderUpdateMin(e){var i,o,t=parseFloat(e.target.value);isNaN(t)||(i=y(e.target).parents(".wpforms-field-option-row-min_max"),(o=parseFloat(i.find(".wpforms-number-slider-max").val()))<=t?(e.preventDefault(),this.value=o):(e=i.data("field-id"),C.find("#wpforms-field-"+e+' input[type="range"]').attr("min",t)))},fieldNumberSliderUpdateMax(e){var i,o,t=parseFloat(e.target.value);isNaN(t)||(i=y(e.target).parents(".wpforms-field-option-row-min_max"),t<=(o=parseFloat(i.find(".wpforms-number-slider-min").val()))?(e.preventDefault(),this.value=o):(e=i.data("field-id"),C.find("#wpforms-field-"+e+' input[type="range"]').attr("max",t)))},updateNumberSliderStepValueMaxAttr(e,i){var o,e=r.getElementById("wpforms-field-option-"+e+"-step");return e&&(o=parseFloat(e.value),e.setAttribute("max",i),(i=parseFloat(i))<o)&&(e.value=i,y(e).trigger("input")),this},fieldFileUploadPreviewUpdate(e){var e=y(e).parents(".wpforms-field-option-file-upload"),i=e.data("field-id"),o=e.find("#wpforms-field-option-"+i+"-style").val(),t=e.find("#wpforms-field-option-row-"+i+"-max_file_number"),r=parseInt(t.find("input").val(),10),e=e.find("#wpforms-field-option-"+i+"-camera_enabled").is(":checked"),i=y("#wpforms-field-"+i),s=".wpforms-file-upload-builder-classic",l=".wpforms-file-upload-builder-modern";"classic"===o?(y(s,i).removeClass("wpforms-hide"),y(l,i).addClass("wpforms-hide"),t.addClass("wpforms-hidden"),y(i).find(".wpforms-file-upload-capture-camera-classic").toggleClass("wpforms-hidden",!e)):(1<r?(o=e?wpforms_builder.file_upload.preview_title_plural_camera:wpforms_builder.file_upload.preview_title_plural,i.find(".modern-title").html(o),i.find(".modern-hint").text(wpforms_builder.file_upload.preview_hint.replace("{maxFileNumber}",r)).removeClass("wpforms-hide")):(o=e?wpforms_builder.file_upload.preview_title_single_camera:wpforms_builder.file_upload.preview_title_single,i.find(".modern-title").html(o),i.find(".modern-hint").text(wpforms_builder.file_upload.preview_hint.replace("{maxFileNumber}",1)).addClass("wpforms-hide")),y(s,i).addClass("wpforms-hide"),y(l,i).removeClass("wpforms-hide"),t.removeClass("wpforms-hidden"))},updateTextFieldsLimitControls(e,i){i?y("#wpforms-field-option-row-"+e+"-limit_controls").removeClass("wpforms-hide"):y("#wpforms-field-option-row-"+e+"-limit_controls").addClass("wpforms-hide")},updateDisableTodaysDateControls(e,i){y(`#wpforms-field-option-row-${e}-date_disable_todays_date`).toggleClass("wpforms-hide",!i)},togglePasswordEyeIcon(){var e=y(this),i=e.closest(".wpforms-field-option-row-password-visibility").data("field-id");y("#wpforms-field-"+i).find(".wpforms-confirm").toggleClass("wpforms-field-password-visibility-enabled",e.is(":checked"))},updatePasswordStrengthControls(e,i){e=y("#wpforms-field-option-row-"+e+"-password-strength-level");i?e.removeClass("wpforms-hidden"):e.addClass("wpforms-hidden")},updateRichTextMediaFieldsLimitControls(){var e=y(this),i=e.closest(".wpforms-field-option-row-media_enabled").data("field-id"),o=y("#wpforms-field-option-row-"+i+"-media_controls"),i=y("#wpforms-field-"+i+" .wpforms-richtext-wrap .mce-toolbar-grp");e.is(":checked")?(o.show(),i.addClass("wpforms-field-richtext-media-enabled")):(o.hide(),i.removeClass("wpforms-field-richtext-media-enabled"))},updateRichTextStylePreview(){var e=y(this),i=e.closest(".wpforms-field-option-row-style").data("field-id");y("#wpforms-field-"+i+" .wpforms-richtext-wrap .mce-toolbar-grp").toggleClass("wpforms-field-richtext-toolbar-basic","full"!==e.val())},bindUIActions(){F.bindUIActionsPanels(),F.bindUIActionsFields(),F.bindUIActionsSettings(),F.bindUIActionsRevisions(),F.bindUIActionsSaveExit(),F.bindUIActionsGeneral(),F.bindUIActionsPreview()},bindUIActionsPreview(){k.$previewButton.on("click",function(e){e.preventDefault();e=y(this).attr("href");let i=!1;if(o&&!o.closed)try{i=o.location.href.includes("wpforms_form_preview")}catch(e){i=!1}i?o.focus():o=n.open(e,"_blank")}),C.on("wpformsSaved",function(){if(o&&!o.closed)try{o.location.href.includes("wpforms_form_preview")&&o.location.reload()}catch(e){}})},bindUIActionsPanels(){C.on("click","#wpforms-panels-toggle > button, .wpforms-panel-switch",function(e){e.preventDefault(),F.panelSwitch(y(this).data("panel"))}),C.on("click",".wpforms-panel .wpforms-panel-sidebar-section",function(e){F.panelSectionSwitch(this,e)}),C.on("click",".wpforms-panel .wpforms-panel-content .wpforms-panel-content-section-tabs-list-item",function(e){F.panelSectionTabSwitch(this,e)}),C.on("click",".wpforms-panels .wpforms-panel-sidebar-content .wpforms-panel-sidebar-toggle",function(){y(this).parent().toggleClass("wpforms-panel-sidebar-closed")})},panelSwitch(i){var o=y("#wpforms-panel-"+i);if(!o.hasClass("active")){if(WPFormsUtils.triggerEvent(C,"wpformsPanelSwitch",[i]).isDefaultPrevented()||!wpforms_panel_switch)return!1;y("#wpforms-panels-toggle").find("button").removeClass("active"),y(".wpforms-panel").removeClass("active"),y(".wpforms-panel-"+i+"-button").addClass("active"),o.addClass("active"),history.replaceState({},null,wpf.updateQueryString("view",i));let e;o=o.find(".active");o.length&&"default"!==o.data("section")&&(e=o.data("section")),history.replaceState({},null,wpf.updateQueryString("section",e)),C.trigger("wpformsPanelSwitched",[i])}},panelSectionSwitch(e,i){i&&i.preventDefault();i=y(e);if(!i.hasClass("upgrade-modal")&&!i.hasClass("education-modal")){var e=i.parent().parent(),i=i.data("section"),o=e.find(`.wpforms-panel-sidebar-section[data-section="${i}"]`);if(!o.hasClass("active")){if(WPFormsUtils.triggerEvent(C,"wpformsPanelSectionSwitch",i).isDefaultPrevented()||!wpforms_panel_switch)return!1;e.find(".wpforms-panel-sidebar-section").removeClass("active"),o.addClass("active"),e.find(".wpforms-panel-content-section").hide().removeClass("active"),e.find(".wpforms-panel-content-section-"+i).show().addClass("active"),history.replaceState({},null,wpf.updateQueryString("section",i)),WPFormsUtils.triggerEvent(C,"wpformsPanelSectionSwitched",i)}}},panelSectionTabSwitch(e,i){i.preventDefault();var o,t,r,i=y(e),e="wpforms-panel-content-section-tabs-list-item-active",s=i.data("tab");!s||i.hasClass("wpforms-disabled")||i.hasClass(e)||WPFormsUtils.triggerEvent(C,"wpformsPanelSectionTabBeforeSwitch",[s,i]).isDefaultPrevented()||(o="wpforms-panel-content-section-tabs-content-tab-active",r=(t=i.closest(".wpforms-panel-content-section-tabs-list")).closest(".wpforms-panel-content").find(".wpforms-panel-content-section-tabs-content-tab"),t.find(".wpforms-panel-content-section-tabs-list-item").removeClass(e),i.addClass(e),r.removeClass(o),r.filter(`[data-tab="${s}"]`).addClass(o),WPFormsUtils.triggerEvent(C,"wpformsPanelSectionTabSwitch",[s,i]))},bindUIActionsSetup(){console.warn('WARNING! Function "WPFormsBuilder.bindUIActionsSetup()" has been deprecated, please use the new "WPForms.Admin.Builder.Setup.events()" function instead!'),WPForms.Admin.Builder.Setup.events()},templateSelect(e,i){console.warn('WARNING! Function "WPFormsBuilder.templateSelect()" has been deprecated, please use the new "WPForms.Admin.Builder.Setup.selectTemplate()" function instead!'),WPForms.Admin.Builder.Setup.selectTemplate(i)},bindUIActionsFields(){C.on("wpformsPanelSwitched",function(e,i){"fields"===i&&y("#field-options a").hasClass("active")&&0===y(".wpforms-field-wrap .wpforms-field.active").length&&F.fieldTabToggle("field-options")}),C.on("click",".wpforms-tab a",function(e){e.preventDefault(),F.fieldTabToggle(y(this).parent().attr("id"))}),C.on("click",".wpforms-add-fields-heading",function(e){e.preventDefault(),F.fieldGroupToggle(y(this),"click")}),C.on("click",".wpforms-field",function(e,i){F.isFieldPreviewActionsDisabled(this)||e.target.classList.contains("wpforms-dismiss-button")||(WPForms.Admin.Builder.ContextMenu&&"ignore-contextmenu"!==i&&WPForms.Admin.Builder.ContextMenu.hideMainContextMenu(e),(e.currentTarget?.ownerDocument?.activeElement)?.blur(),e.stopPropagation(),F.fieldTabToggle(y(this).data("field-id"),e))}),C.on("mousedown click",".wpforms-field input, .wpforms-field select, .wpforms-field textarea",function(e){e.preventDefault(),this.blur()}),C.on("click",".wpforms-field-delete",function(e){e.preventDefault(),e.stopPropagation(),F.isFormPreviewActionsDisabled(this)||(WPForms.Admin.Builder.ContextMenu&&WPForms.Admin.Builder.ContextMenu.hideMenu(),F.fieldDelete(y(this).parent().data("field-id")))}),C.on("click",".wpforms-field-duplicate",function(e){e.preventDefault(),e.stopPropagation(),F.isFormPreviewActionsDisabled(this)||(WPForms.Admin.Builder.ContextMenu&&WPForms.Admin.Builder.ContextMenu.hideMenu(),F.fieldDuplicate(y(this).parent().data("field-id")))}),C.on("click",".wpforms-add-fields-button",function(e){e.preventDefault();var i,e=y(this);e.hasClass("ui-draggable-disabled")||(i=e.data("field-type"),WPFormsUtils.triggerEvent(C,"wpformsBeforeFieldAddOnClick",[i,e]).isDefaultPrevented())||F.fieldAdd(i,{$sortable:"default"})}),C.on("wpformsFieldAdd",function(e,i,o){-1!==y.inArray(o,["select","radio","checkbox","payment-multiple","payment-checkbox","payment-select"])&&F.fieldChoiceSortable(o,`#wpforms-field-option-row-${i}-choices ul`)}),C.on("wpformsFieldOptionTabToggle",function(e,i){F.fieldLayoutSelectorInit(i)}),C.on("click",".wpforms-field-option-row-choices .add",function(e){F.fieldChoiceAdd(e,y(this))}),C.on("click",".wpforms-field-option-row-choices .remove",function(e){F.fieldChoiceDelete(e,y(this))}),C.on("mousedown",".wpforms-field-option-row-choices input[type=radio]",function(){var e=y(this);e.is(":checked")?e.attr("data-checked","1"):e.attr("data-checked","0")}),C.on("click",".wpforms-field-option-row-choices input[type=radio]",function(){var e=y(this),i=e.parent().parent();e.parent().parent().find("input[type=radio]").not(this).prop("checked",!1),"1"===e.attr("data-checked")&&(e.prop("checked",!1),e.attr("data-checked","0")),F.fieldChoiceUpdate(i.data("field-type"),i.data("field-id"),i.find("li").length)}),C.on("change",".wpforms-field-option-row-choices input[type=checkbox]",function(){var e=y(this).parent().parent();F.fieldChoiceUpdate(e.data("field-type"),e.data("field-id"),e.find("li").length)}),C.on("change",".wpforms-field-option-row-show_values input",function(){var e=y(this),i=e.closest(".wpforms-field-option").find(".wpforms-field-option-row-choices .choices-list"),o=i.data("field-id"),t=i.data("field-type"),e=e.is(":checked");i.toggleClass("show-values",e),F.fieldChoiceUpdate(t,o),WPForms.Admin.Builder.MultipleChoices.updatePreviewState(o)}),C.on("change",".wpforms-field-option-row-choices_images input",function(){var e=y(this),i=e.closest(".wpforms-field-option-row"),o=i.data("field-id"),t=y("#wpforms-field-option-"+o),e=e.is(":checked"),r=t.find(".wpforms-field-option-hidden-type").val(),s=i.siblings(".wpforms-field-option-row-choices_icons").find("input");e&&s.is(":checked")&&s.prop("checked",!1).trigger("change"),i.find(".wpforms-alert").toggleClass("wpforms-hidden"),t.find(".wpforms-field-option-row-choices ul").toggleClass("show-images"),t.find(".wpforms-field-option-row-choices_images_style").toggleClass("wpforms-hidden"),t.find(".wpforms-field-option-row-dynamic_choices").toggleClass("wpforms-hidden",e),(e?y("#wpforms-field-option-"+o+"-input_columns").val("inline"):y("#wpforms-field-option-"+o+"-input_columns").val("")).trigger("change"),y(`#wpforms-field-option-row-${o}-choices_images_hide`).toggleClass("wpforms-hidden",!e),F.fieldChoiceUpdate(r,o)}),C.on("wpformsImageUploadAdd wpformsImageUploadRemove",function(e,i,o){var o=o.closest(".choices-list"),t=o.data("field-id"),o=o.data("field-type");F.fieldChoiceUpdate(o,t)}),C.on("change",".wpforms-field-option-row-choices_images_style select",function(){var e=y(this).parent().data("field-id"),i=y("#wpforms-field-option-"+e).find(".wpforms-field-option-hidden-type").val();F.fieldChoiceUpdate(i,e)}),C.on("keyup change",".wpforms-field-option-row-choices input.label, .wpforms-field-option-row-choices input.value",function(){var e=y(this).parent().parent();F.fieldChoiceUpdate(e.data("field-type"),e.data("field-id"))}),C.on("focusout",".wpforms-field-option-row-choices input.label, .wpforms-field-option-row-choices input.value",function(){var e=y(this);e.val(wpf.sanitizeHTML(e.val(),wpforms_builder.allowed_label_html_tags))}),C.on("click",".toggle-bulk-add-display",function(e){e.preventDefault(),F.fieldChoiceBulkAddToggle(this)}),C.on("click",".toggle-bulk-add-presets",function(e){e.preventDefault();e=y(this).closest(".bulk-add-display").find("ul");"block"===e.css("display")?y(this).text(wpforms_builder.bulk_add_presets_show):y(this).text(wpforms_builder.bulk_add_presets_hide),e.stop().slideToggle()}),C.on("click",".bulk-add-preset-insert",function(e){e.preventDefault();var e=y(this),i=e.data("preset"),e=e.closest(".bulk-add-display"),o=e.find("ul"),t=e.find(".toggle-bulk-add-presets"),e=e.find("textarea");e.val(""),e.insertAtCaret(wpforms_preset_choices[i].choices.join("\n")),t.text(wpforms_builder.bulk_add_presets_show),o.slideUp()}),C.on("click",".bulk-add-insert",function(e){e.preventDefault(),F.fieldChoiceBulkAddInsert(this)}),C.on("click",".wpforms-field-option-group-toggle:not(.education-modal)",function(e){if(WPFormsUtils.triggerEvent(C,"wpformsFieldOptionGroupToggle").isDefaultPrevented())return!1;e.preventDefault();e=y(this).closest(".wpforms-field-option-group");e.siblings(".wpforms-field-option-group").removeClass("active"),e.addClass("active"),C.trigger("wpformsFieldOptionGroupToggled",[e])}),C.on("change",".wpforms-field-option-address input.wpforms-subfield-hide",function(){var e=y(this).closest(".wpforms-field-option-row"),i=e.data("field-id"),e=e.data("subfield");y("#wpforms-field-"+i).find(".wpforms-"+e).toggleClass("wpforms-hide")}),C.on("input",".wpforms-field-option-row-label input, .wpforms-field-option-row-name input",function(){var e=y(this),i=e.parent().data("field-id"),i=y("#wpforms-field-"+i),o=i.data("field-type");let t=e.val(),r=0===t.length;(r="html"===o?!1:r)&&(t=wpforms_builder.empty_label),i.toggleClass("label_empty",r).find("> .label-title .text").text(t)}),C.on("input",".wpforms-field-option-row-description textarea",function(){var e=y(this),i=wpf.sanitizeHTML(e.val()),o=e.parent().data("field-id"),t=y(`#wpforms-field-${o} > .description,
						#wpforms-field-${o} .format-selected-single > .description,
						#wpforms-field-${o} .wpforms-field-internal-information-row-description`);F.updateDescription(t,i),e.trigger("wpformsDescriptionFieldUpdated",{id:o,descField:t,value:i})}),C.on("change",".wpforms-field-option-row-required input",function(){var e=y(this),i=e.closest(".wpforms-field-option-row").data("field-id"),o=y("#wpforms-field-"+i);o.toggleClass("required",e.is(":checked")),F.onUpdateSelectPlaceholder(i,o)}),C.on("click",".choices-list input.default",function(){var e=y(this),i=e.closest(".choices-list").data("field-id");e.is(":checked")||F.maybeUpdateRequiredPlaceholder(i),C.trigger("wpformsChoicesSetDefault",[this])}),C.on("change",".wpforms-field-option-row-summary input",function(){var e=y(this),i=e.closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+i).toggleClass("wpforms-summary-enabled"),e.closest(".wpforms-field-option-group-inner").find(".wpforms-total-summary-alert").toggleClass("wpforms-hidden")}),C.on("change",".wpforms-field-option-row-confirmation input",function(){var e=y(this).closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+e).find(".wpforms-confirm").toggleClass("wpforms-confirm-enabled wpforms-confirm-disabled"),y("#wpforms-field-option-"+e).toggleClass("wpforms-confirm-enabled wpforms-confirm-disabled")}),C.on("change",".wpforms-field-option-row-filter_type select",function(){var e=y(this).parent().data("field-id"),e=y("#wpforms-field-option-"+e);y(this).val()?(e.removeClass("wpforms-filter-allowlist"),e.removeClass("wpforms-filter-denylist"),e.addClass("wpforms-filter-"+y(this).val())):(e.removeClass("wpforms-filter-allowlist"),e.removeClass("wpforms-filter-denylist"))}),C.on("focusout",".wpforms-field-option-row-allowlist textarea,.wpforms-field-option-row-denylist textarea",function(){let o=y(this),e="allow";var i,t;o.next(".wpforms-alert").remove(),""!==o.val()&&(i=y(".wpforms-field-option-row-allowlist textarea"),t=y(".wpforms-field-option-row-denylist textarea"),o.is(t)&&(e="deny"),y.get(wpforms_builder.ajax_url,{nonce:wpforms_builder.nonce,content:JSON.stringify({allow:i.val(),deny:t.val(),current:e}),action:"wpforms_sanitize_restricted_rules"},function(e){var i;e.success&&(o.val(e.data.currentField),0!==(i=e.data.intersect).length&&(i="<p>"+wpforms_builder.allow_deny_lists_intersect+'</p><p class="bold">'+i+"</p>",y.alert({title:wpforms_builder.heads_up,content:i,icon:"fa fa-exclamation-circle",type:"red",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})),e.data.restricted||0)&&o.after('<div class="wpforms-alert-warning wpforms-alert"><p>'+wpforms_builder.restricted_rules+"</p></div>")}))}),C.on("focusout",k.defaultEmailSelector,function(){k.$focusOutTarget=y(this),F.focusOutEvent()}),C.on("change",".wpforms-field-option-row-size select",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id");y("#wpforms-field-"+e).removeClass("size-small size-medium size-large").addClass("size-"+i)}),C.on("input",".wpforms-field-option-row-placeholder input",function(){var e=y(this),i=e.parent().data("field-id"),o=y("#wpforms-field-"+i),t=o.find(".primary-input");let r=wpf.sanitizeHTML(e.val());"payment-single"===o.data("field-type")&&""===r&&(r=y("#wpforms-field-option-"+i+"-price").prop("placeholder")),t.is("select")?F.dropdownField.helpers.isModernSelect(t)?(e=F.dropdownField.helpers.getInstance(t),t.prop("multiple")?y(e.input.element).prop("placeholder",r):(e.setChoiceByValue(""),t.closest(".choices").find(".choices__inner .choices__placeholder").text(r),o=y("#wpforms-field-option-"+i+"-dynamic_choices").val(),F.dropdownField.helpers.update(i,o))):(e=t.find(".placeholder"),!r.length&&e.length?e.remove():(e.length?e.text(r):t.prepend('<option value="" class="placeholder">'+r+"</option>"),t.find(".placeholder").prop("selected",!t.prop("multiple")))):t.prop("placeholder",r)}),C.on("input",".wpforms-field-option-row-confirmation_placeholder input",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id");y("#wpforms-field-"+e).find(".secondary-input").attr("placeholder",i)}),C.on("input",".wpforms-field-option .format-selected input.placeholder",function(){var e=y(this),i=e.val(),e=e.closest(".wpforms-field-option-row"),o=e.data("field-id"),e=e.data("subfield");y("#wpforms-field-"+o).find(".wpforms-"+e+" input").attr("placeholder",i)}),C.on("input",".wpforms-field-option-address input.placeholder",function(){var e=y(this),i=e.closest(".wpforms-field-option-row"),o=i.data("field-id"),t=i.data("subfield"),r=y("#wpforms-field-"+o+" .wpforms-"+t).find("input, select"),i=i.find("#wpforms-field-option-"+o+"-"+t+"_default");let s=i.val(),l=i.find("option:selected").text(),n=e.val();r.each(function(){var e,i,o=y(this);o.is("select")?(e=o.find(".placeholder"),i=""===s&&""!==n?n:l,e.text(i)):o.attr("placeholder",n)})}),C.on("input",'.wpforms-field-option-row-default_value input:not([type="search"])',function(){var e=y(this),i=wpf.sanitizeHTML(e.val()),e=e.closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+e+" .primary-input").val(i)}),C.on("input",".wpforms-field-options-column input.default",function(){var e=y(this),i=wpf.sanitizeHTML(e.val()),e=e.closest(".wpforms-field-option-row"),o=e.data("field-id"),e=e.data("subfield");y("#wpforms-field-"+o+" .wpforms-"+e+" input").val(i)}),C.on("change",".wpforms-field-option-address select.default",function(){var e=y(this),i=e.val(),o=e.find("option:selected").text(),e=e.closest(".wpforms-field-option-row"),t=e.data("field-id"),r=e.data("subfield"),s=y("#wpforms-field-option-"+t+"-scheme").val(),e=e.find("#wpforms-field-option-"+t+"-"+r+"_placeholder").val(),t=y("#wpforms-field-"+t+" .wpforms-address-scheme-"+s+" .wpforms-"+r+" .placeholder");""===i&&0<e.trim().length?t.text(e):t.text(o)}),C.on("input",".wpforms-field-option-row-confirmation_placeholder input",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id");y("#wpforms-field-"+e).find(".secondary-input").attr("placeholder",i)}),C.on("change",".wpforms-field-option-row-label_hide input",function(){var e=y(this),i=e.closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+i).toggleClass("label_hide",e.is(":checked"))}),C.on("change",".wpforms-field-option-row-sublabel_hide input",function(){var e=y(this),i=e.closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+i).toggleClass("sublabel_hide",e.is(":checked"))}),C.on("change",".wpforms-field-option-row-read_only input",F.fieldReadOnlyToggleChange),C.on("change",".wpforms-field-option-row-enable_quantity input",function(){var e=y(this).closest(".wpforms-field-option-row").data("field-id"),i=y("#wpforms-field-"+e);y(`#wpforms-field-option-row-${e}-quantity`).toggleClass("wpforms-hidden"),i.find(".quantity-input").toggleClass("wpforms-hidden"),i.toggleClass("payment-quantity-enabled")}),C.on("input",".wpforms-field-option-row-quantity input",function(){var e=y(this),i=(e.val(Math.min(Math.abs(Math.round(e.val())),9999)),e.closest(".wpforms-field-option-row")),o=i.data("field-id"),t=e.hasClass("min-quantity-input"),r=i.find(".min-quantity-input"),i=i.find(".max-quantity-input");t&&y("#wpforms-field-"+o).find(".quantity-input option").text(e.val()),r.toggleClass("wpforms-error",parseInt(r.val(),10)>parseInt(i.val(),10))}),C.on("change",".wpforms-field-option-row-format select",function(){var e,i,o,t,r,s=y(this),l=s.val(),s=s.parent().data("field-id"),n=y("#wpforms-field-option-row-"+s+"-sublabel_hide"),a=y("#wpforms-field-"+s);a.find(".format-selected").removeClass().addClass("format-selected format-selected-"+l),y("#wpforms-field-option-"+s).find(".format-selected").removeClass().addClass("format-selected format-selected-"+l),["date-time","first-last","first-middle-last"].includes(l)?n.removeClass("wpforms-hidden"):n.addClass("wpforms-hidden"),y(`#wpforms-field-option-row-${s}-price_label`).toggleClass("wpforms-hidden","single"!==l),["single","user","hidden"].includes(l)&&(n="user"===l,e="single"===l,l="hidden"===l,i=y("#wpforms-field-option-"+s+"-enable_quantity").is(":checked"),t=y("#wpforms-field-option-"+s+"-min_price"),t=(o=wpf.amountSanitize(t.val()))>=t.data("minimum-price"),r=y("#wpforms-field-option-row-"+s+"-min_price"),y("#wpforms-field-option-row-"+s+"-placeholder").toggleClass("wpforms-hidden",!n),y("#wpforms-field-option-row-"+s+"-enable_quantity").toggleClass("wpforms-hidden",!e),y("#wpforms-field-option-row-"+s+"-quantities_alert").toggleClass("wpforms-hidden",!e),y("#wpforms-field-option-row-"+s+"-quantity").toggleClass("wpforms-hidden",!e||!i),a.find(".quantity-input").toggleClass("wpforms-hidden",!e||!i),r.toggleClass("wpforms-hidden",!n),r.find(".wpforms-item-minimum-price-alert").toggleClass("wpforms-hidden",t),a.find(".item-min-price").toggleClass("wpforms-hidden",n&&o<=0),a.toggleClass("min-price-warning",!t),a.find(".fa-exclamation-triangle").toggleClass("wpforms-hidden",t),y(`#wpforms-field-${s} .item-price-single`).toggleClass("wpforms-hidden",!e),y(`#wpforms-field-${s} .item-price-hidden`).toggleClass("wpforms-hidden",!l))}),C.on("change",".wpforms-field-option-row-scheme select",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id"),o=y("#wpforms-field-"+e),t=y(`#wpforms-field-option-row-${e}-state`),e=y(`#wpforms-field-option-row-${e}-country`),o=(o.find(".wpforms-address-scheme").addClass("wpforms-hide"),o.find(".wpforms-address-scheme-"+i).removeClass("wpforms-hide"),o.find(`.wpforms-address-scheme-${i} .wpforms-country select, .wpforms-address-scheme-${i} .wpforms-country input`)),o=(0===o.length?e.addClass("wpforms-hidden"):e.removeClass("wpforms-hidden"),t.find(".default .default").not(".wpforms-hidden-strict")),t=t.find(`.default [data-scheme="${i}"]`),r=e.find(".default .default").not(".wpforms-hidden-strict"),e=e.find(`.default [data-scheme="${i}"]`);t.attr({id:o.attr("id"),name:o.attr("name")}).removeClass("wpforms-hidden-strict"),o.attr({id:"",name:""}).addClass("wpforms-hidden-strict"),e.attr({id:r.attr("id"),name:r.attr("name")}).removeClass("wpforms-hidden-strict"),r.attr({id:"",name:""}).addClass("wpforms-hidden-strict")}),C.on("change",".wpforms-field-option-row-date .type select",function(){var e=y(this),i=e.val(),o=y(this).closest(".wpforms-field-option-row").data("field-id"),t="datepicker"===i?"wpforms-date-type-datepicker":"wpforms-date-type-dropdown",r="datepicker"===i?"wpforms-date-type-dropdown":"wpforms-date-type-datepicker",t=(y("#wpforms-field-"+o).find(".wpforms-date").addClass(t).removeClass(r),y("#wpforms-field-option-"+o).addClass(t).removeClass(r),e.closest(".wpforms-field-option-group-advanced").find(".wpforms-field-option-row-date_limit_days, .wpforms-field-option-row-date_limit_days_options, .wpforms-field-option-row-date_disable_past_dates")),r=y("#wpforms-field-option-row-"+o+"-date_limit_days_options");"dropdown"===i?((e=y("#wpforms-field-option-"+o+"-date_format")).find("option:selected").hasClass("datepicker-only")&&e.prop("selectedIndex",0).trigger("change"),t.hide()):(t.show(),y("#wpforms-field-option-"+o+"-date_limit_days").is(":checked")?r.show():r.hide())}),C.on("change",".wpforms-field-option-row-date .format select",function(){var e=y(this).val(),i=y(this).closest(".wpforms-field-option-row").data("field-id"),i=y("#wpforms-field-"+i);"m/d/Y"===e||"m.d.Y"===e?(i.find(".wpforms-date-dropdown .first option").text(wpforms_builder.date_select_month),i.find(".wpforms-date-dropdown .second option").text(wpforms_builder.date_select_day),i.find(".wpforms-date-dropdown .third option").text(wpforms_builder.date_select_year)):"d/m/Y"===e||"d.m.Y"===e?(i.find(".wpforms-date-dropdown .first option").text(wpforms_builder.date_select_day),i.find(".wpforms-date-dropdown .second option").text(wpforms_builder.date_select_month),i.find(".wpforms-date-dropdown .third option").text(wpforms_builder.date_select_year)):"Y/m/d"!==e&&"Y.m.d"!==e||(i.find(".wpforms-date-dropdown .first option").text(wpforms_builder.date_select_year),i.find(".wpforms-date-dropdown .second option").text(wpforms_builder.date_select_month),i.find(".wpforms-date-dropdown .third option").text(wpforms_builder.date_select_day))}),C.on("change",".wpforms-field-option-row-time .format select",function(){let e=y(this),r=e.closest(".wpforms-field-option-row").data("field-id"),s="",i,l=e.val().match(/[gh]/)?12:24,o=12==l?1:0,t=12==l?13:24;for(let e=o;e<t;e++)i=e<10?"0"+e:e,s+='<option value="{hh}">{hh}</option>'.replace(/{hh}/g,i);_.forEach(["start","end"],function(e){var i=C.find("#wpforms-field-option-"+r+"-time_limit_hours_"+e+"_hour"),e=C.find("#wpforms-field-option-"+r+"-time_limit_hours_"+e+"_ampm");let o=parseInt(i.val(),10),t=e.val();o=(o=24==l?"pm"===t?o+12:o:(t=12<o?"pm":"am",12<o?o-12:o))<10?"0"+o:o,i.html(s).val(o),e.toggleClass("wpforms-hidden-strict",24==l).val(t),e.nextAll("div").toggleClass("wpforms-hidden-strict",12==l)})}),C.on("change",".wpforms-field-option-row-hide_divider_line input",function(){var e=y(this).closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+e).toggleClass("hide_line")}),C.on("click",".wpforms-pagebreak-button",function(e){e.preventDefault(),y(this).closest(".wpforms-field").trigger("click")}),F.fieldPageBreakInitDisplayPrevious(C.find(".wpforms-field-pagebreak.wpforms-pagebreak-normal").first()),C.on("input",".wpforms-field-option-row-next input",function(){var e=y(this),i=e.val(),e=y("#wpforms-field-"+e.parent().data("field-id")).find(".wpforms-pagebreak-next");i?e.css("display","inline-block").text(i):e.css("display","none").empty()}).on("input",".wpforms-field-option-row-prev input",function(){var e=y(this),i=e.val().trim(),e=y("#wpforms-field-"+e.parent().data("field-id")),o=e.find(".wpforms-pagebreak-prev");i&&0<e.prevAll(".wpforms-field-pagebreak.wpforms-pagebreak-normal").length?o.removeClass("wpforms-hidden").text(i):o.addClass("wpforms-hidden").empty()}).on("change",".wpforms-field-option-row-prev_toggle input",function(){var e=y(this),i=e.closest(".wpforms-field-option-row-prev_toggle");if(!i.hasClass("wpforms-entry-preview-block")){var i=e.closest(".wpforms-field-option-group-inner").find(".wpforms-field-option-row-prev"),o=i.find("input"),t=y("#wpforms-field-"+e.closest(".wpforms-field-option").data("field-id")).find(".wpforms-pagebreak-prev");if(i.toggleClass("wpforms-hidden",!e.prop("checked")),t.toggleClass("wpforms-hidden",!e.prop("checked")),e.prop("checked")&&!o.val()){let e=o.data("last-value");e=e&&e.trim()?e.trim():wpforms_builder.previous,o.val(e)}e.prop("checked")||(o.data("last-value",o.val()),o.val("")),o.trigger("input")}}).on("wpformsFieldAdd",F.fieldPagebreakAdd).on("wpformsFieldDelete",F.fieldPagebreakDelete).on("wpformsFieldAdd",F.toggleOrderSummaryConfirmation).on("wpformsFieldDelete",F.toggleOrderSummaryConfirmation).on("wpformsBeforeFieldDelete",F.fieldEntryPreviewDelete),C.on("wpformsFieldMove wpformsFieldAdd wpformsFieldDelete",function(){C.find(".wpforms-field-pagebreak.wpforms-pagebreak-normal").each(function(){F.fieldPageBreakInitDisplayPrevious(y(this))})}),C.on("input",".wpforms-field-option-row-title input",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id");i?y("#wpforms-field-"+e).find(".wpforms-pagebreak-title").text(i):y("#wpforms-field-"+e).find(".wpforms-pagebreak-title").empty()}),C.on("change",".wpforms-field-option-row-nav_align select",function(){let e=y(this).val();e=e||"center",y(".wpforms-pagebreak-buttons").removeClass("wpforms-pagebreak-buttons-center wpforms-pagebreak-buttons-left wpforms-pagebreak-buttons-right wpforms-pagebreak-buttons-split").addClass("wpforms-pagebreak-buttons-"+e)}),C.on("input",".wpforms-field-option-row-price input",function(){var e=y(this),i=e.val(),o=wpf.amountFormat(wpf.amountSanitize(i)),e=e.parent().data("field-id"),t=y("#wpforms-field-option-"+e+"-placeholder").val().trim(),e=y("#wpforms-field-"+e),t=""===i&&""!==t?"":o;e.find(".primary-input").val(t),e.find(".price").text(wpf.amountFormatCurrency(i))}),C.on("input",".wpforms-field-option-row-min_price input",function(){var e=y(this),i=e.val(),o=wpf.amountSanitize(i),t=o<=0,o=o>=e.data("minimum-price"),e=e.parent(),r=y("#wpforms-field-"+e.data("field-id"));e.find(".wpforms-item-minimum-price-alert").toggleClass("wpforms-hidden",o),r.find(".item-min-price").toggleClass("wpforms-hidden",t),r.toggleClass("min-price-warning",!o),r.find(".fa-exclamation-triangle").toggleClass("wpforms-hidden",o),t||r.find(".min-price").text(wpf.amountFormatCurrency(i))}),C.on("input",".wpforms-single-item-price-label-display",function(){var e=y(this),i=wpf.sanitizeHTML(e.val(),"<>"),o=e.parent().data("field-id"),t=y("#wpforms-field-"+o),o=wpf.amountFormatCurrency(y(`#wpforms-field-option-${o}-price`).val());i?t.find(".price-label").html(i.replaceAll("{price}",`<span class="price"> ${o}  </span>`)):(e.val("{price}"),t.find(".price-label").html(`<span class="price"> ${o}  </span>`))}),C.on("change",".wpforms-field-option-credit-card .payment-icons input",function(){var e=y(this),i=e.data("card"),e=e.parent().data("field-id");y("#wpforms-field-"+e).find("img.icon-"+i).toggleClass("card_hide")}),C.on("input",".wpforms-field-option input.placeholder-update",function(){var e=y(this),i=e.val(),o=e.data("field-id"),e=e.data("subfield");y("#wpforms-field-"+o).find(".wpforms-"+e+" input").attr("placeholder",i)}),C.on("change",".wpforms-field-option-row-input_columns select",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id");let o="";"2"===i?o="wpforms-list-2-columns":"3"===i?o="wpforms-list-3-columns":"inline"===i&&(o="wpforms-list-inline"),y("#wpforms-field-"+e).removeClass("wpforms-list-2-columns wpforms-list-3-columns wpforms-list-inline").addClass(o)}),C.on("change",".wpforms-field-option-row .wpforms-toggle-control input",function(){var e=y(this),i=e.closest(".wpforms-toggle-control").find(".wpforms-toggle-control-status"),e=e.is(":checked")?"on":"off";i.html(i.data(e))}),C.on("change",".wpforms-field-option-row-dynamic_choices select",function(){F.fieldDynamicChoiceToggle(y(this))}),C.on("change",".wpforms-field-option-row-dynamic_taxonomy select, .wpforms-field-option-row-dynamic_post_type select",function(){F.fieldDynamicChoiceSource(y(this))}),C.on("click",".toggle-layout-selector-display",function(e){e.preventDefault(),F.fieldLayoutSelectorToggle(this)}),C.on("click",".layout-selector-display-layout",function(e){e.preventDefault(),F.fieldLayoutSelectorLayout(this)}),C.on("click",".layout-selector-display-columns span",function(e){e.preventDefault(),F.fieldLayoutSelectorInsert(this)}),y(r).on("change",".wpforms-field-option-row-scale select",function(){let e=y(this),i=e.val(),o=e.parent().data("field-id"),t=y("#wpforms-field-"+o+" .rating-icon"),r=1;t.each(function(){r<=i?y(this).show():y(this).hide(),r++})}),y(r).on("change",".wpforms-field-option-row-icon select",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id"),e=y("#wpforms-field-"+e+" .rating-icon");let o="fa-star";"heart"===i?o="fa-heart":"thumb"===i?o="fa-thumbs-up":"smiley"===i&&(o="fa-smile-o"),e.removeClass("fa-star fa-heart fa-thumbs-up fa-smile-o").addClass(o)}),y(r).on("change",".wpforms-field-option-row-icon_size select",function(){var e=y(this),i=e.val(),e=e.parent().data("field-id"),e=y("#wpforms-field-"+e+" .rating-icon");let o="28";"small"===i?o="18":"large"===i&&(o="38"),e.css("font-size",o+"px")}),y(r).on("input",".wpforms-field-option-row-icon_color input.wpforms-color-picker",function(){var e=y(this),i=e.closest(".wpforms-field-option-row").data("field-id");y(`#wpforms-field-${i} .wpforms-rating-field-icons i.fa`).css("color",F.getValidColorPickerValue(e))}),y(r).on("change",".wpforms-field-option-row-disclaimer_format input",function(){var e=y(this).closest(".wpforms-field-option-row").data("field-id");y("#wpforms-field-"+e+" .description").toggleClass("disclaimer")}),C.on("change",".wpforms-field-option-row-limit_enabled input",function(e){F.updateTextFieldsLimitControls(y(e.target).closest(".wpforms-field-option-row-limit_enabled").data().fieldId,e.target.checked)}),C.on("change",".wpforms-field-option-row-date_disable_past_dates input",function(e){F.updateDisableTodaysDateControls(y(e.target).closest(".wpforms-field-option-row-date_disable_past_dates").data().fieldId,e.target?.checked)}),C.on("change",".wpforms-field-option-row-password-visibility input",F.togglePasswordEyeIcon),C.on("change",".wpforms-field-option-row-password-strength input",function(e){F.updatePasswordStrengthControls(y(e.target).parents(".wpforms-field-option-row-password-strength").data().fieldId,e.target.checked)}),C.on("change",".wpforms-field-option-richtext .wpforms-field-option-row-media_enabled input",F.updateRichTextMediaFieldsLimitControls),C.on("change",".wpforms-field-option-richtext .wpforms-field-option-row-style select",F.updateRichTextStylePreview),C.on("change",".wpforms-field-option-file-upload .wpforms-field-option-row-style select, .wpforms-field-option-file-upload .wpforms-field-option-row-max_file_number input, .wpforms-field-option-file-upload .wpforms-field-option-row-camera input",function(e){F.fieldFileUploadPreviewUpdate(e.target)}),F.numberSliderEvents(C),F.fieldDynamicChoiceToggleImageChoices(),F.fieldDynamicChoiceToggleIconChoices(),C.on("change",".wpforms-field-option-row-show_price_after_labels input",function(){var e=y(this).closest(".wpforms-field-option-group-basic").find(".wpforms-field-option-row-choices .choices-list");F.fieldChoiceUpdate(e.data("field-type"),e.data("field-id"))}),C.on("input",".wpforms-field-option-row-preview-notice textarea",F.updatePreviewNotice).on("change",".wpforms-field-option-row-preview-notice-enable input",F.toggleEntryPreviewNotice).on("wpformsFieldAdd",F.maybeLockEntryPreviewGroupOnAdd).on("wpformsFieldMove",F.maybeLockEntryPreviewGroupOnMove).on("click",".wpforms-entry-preview-block",F.entryPreviewBlockField),F.defaultStateEntryPreviewNotice()},fieldReadOnlyToggleChange(){var e=y(this),i=Number(e.closest(".wpforms-field-option-row").data("field-id")),e=e.is(":checked"),o=y(`#wpforms-field-option-row-${i}-required, #wpforms-field-option-row-${i}-unique_answer`),t=o.filter(".wpforms-field-option-row-required").find("input");F.fieldReadOnlyToggleDependentToggles(o,e),y("#wpforms-field-"+i).toggleClass("readonly",e).toggleClass("required",t.is(":checked"))},fieldReadOnlyToggleDependentToggles(e,s=!0){e.each(function(){var e=y(this),i=e.find(":input"),o=s?i.is(":checked"):null,t=!s&&i.data("enabled-state-checked"),r=s?wp.i18n.__("Disabled because this field is set to Read-Only in the Advanced tab.","wpforms"):"";e.toggleClass("wpforms-disabled",s).find(".wpforms-toggle-control").attr("title",r),i.data("enabled-state-checked",o).prop("checked",t).prop("disabled",s)})},focusOutEvent(){if(null!==k.$focusOutTarget){if(k.$defaultEmail.is(k.$focusOutTarget)){let i=k.$focusOutTarget;if(i.next(".wpforms-alert").remove(),""===i.val())return;y.get(wpforms_builder.ajax_url,{nonce:wpforms_builder.nonce,content:i.val(),action:"wpforms_sanitize_default_email"},function(e){e.success&&(i.val(e.data),i.trigger("input"),e.data||i.after('<div class="wpforms-alert-warning wpforms-alert"><p>'+wpforms_builder.restricted_default_email+"</p></div>"))})}k.$focusOutTarget=null}},isFieldPreviewActionsDisabled(e){return F.isFormPreviewActionsDisabled(e)||y(e).closest(".wpforms-field").hasClass("ui-sortable-disabled")},isFormPreviewActionsDisabled(e){return y(e).closest(".wpforms-field-wrap").hasClass("ui-sortable-disabled")},fieldGroupToggle(e,i){e=y(e);let o=e.next(".wpforms-add-fields-buttons"),t=o.parent(),r=e.find("i"),s=e.data("group"),l="wpforms_field_group_"+s;"click"===i?(t.hasClass("wpforms-closed")?wpCookies.remove(l):wpCookies.set(l,"true",2592e3),r.toggleClass("wpforms-angle-right"),o.stop().slideToggle("",function(){t.toggleClass("wpforms-closed")})):"load"===i&&(o=e.find(".wpforms-add-fields-buttons"),r=e.find(".wpforms-add-fields-heading i"),s=e.find(".wpforms-add-fields-heading").data("group"),"true"===wpCookies.get("wpforms_field_group_"+s))&&(r.toggleClass("wpforms-angle-right"),o.hide(),e.toggleClass("wpforms-closed"))},updateDescription(e,i){e.hasClass("nl2br")&&(i=i.replace(/\n/g,"<br>")),e.html(i)},defaultStateEntryPreviewNotice(){y(".wpforms-field-option-row-preview-notice-enable input").each(function(){y(this).trigger("change")})},updatePreviewNotice(){var e=y(this),i=wpf.sanitizeHTML(e.val()).trim(),e=e.parent().data("field-id"),e=y("#wpforms-field-"+e).find(".wpforms-entry-preview-notice"),i=i||wpforms_builder.entry_preview_default_notice;F.updateDescription(e,i)},toggleEntryPreviewNotice(){var e=y(this),i=e.closest(".wpforms-field-option").data("field-id"),o=y("#wpforms-field-"+i),i=y("#wpforms-field-option-"+i+" .wpforms-field-option-row-preview-notice"),t=o.find(".wpforms-entry-preview-notice"),o=o.find(".wpforms-alert-info");(e.is(":checked")?(o.hide(),t.show(),i):(i.hide(),t.hide(),o)).show()},fieldDelete(e){var i=y("#wpforms-field-"+e),o=i.data("field-type");"pagebreak"===o&&i.hasClass("wpforms-field-entry-preview-not-deleted")?F.youCantRemovePageBreakFieldPopup():i.hasClass("no-delete")?F.youCantRemoveFieldPopup():F.confirmFieldDeletion(e,o)},youCantRemovePageBreakFieldPopup(){y.alert({title:wpforms_builder.heads_up,content:wpforms_builder.entry_preview_require_page_break,icon:"fa fa-exclamation-circle",type:"red",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})},youCantReorderFieldPopup(){console.warn('WARNING! Function "WPFormsBuilder.youCantReorderFieldPopup()" has been deprecated, please use the new "WPForms.Admin.Builder.DragFields.showErrorPopup( { content: wpforms_builder.field_cannot_be_reordered } )" function instead!'),WPForms.Admin.Builder.DragFields.showErrorPopup({content:wpforms_builder.field_cannot_be_reordered})},youCantRemoveFieldPopup(){y.alert({title:wpforms_builder.field_locked,content:wpforms_builder.field_locked_no_delete_msg,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})},validationErrorNotificationPopup(e){console.warn('WARNING! Function "WPFormsBuilder.validationErrorNotificationPopup()" has been deprecated.'),y.alert({title:wpforms_builder.heads_up,content:e,icon:"fa fa-exclamation-circle",type:"red",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})},confirmFieldDeletion(e,i){var o={id:e,message:wpforms_builder.delete_confirm};WPFormsUtils.triggerEvent(C,"wpformsBeforeFieldDeleteAlert",[o,i]).isDefaultPrevented()||y.confirm({title:!1,content:o.message,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){F.fieldDeleteById(e)}},cancel:{text:wpforms_builder.cancel}}})},fieldDeleteById(o,t="",e=400,r=!1){y("#wpforms-field-"+o).fadeOut(e,function(){var e=y(this),i=e.parents(".wpforms-field-layout-columns");t=e.data("field-type"),r&&F.UndoRedo?.preventRecord(!0),C.trigger("wpformsBeforeFieldDelete",[o,t]),e.remove(),y("#wpforms-field-option-"+o).remove(),y(".wpforms-field, .wpforms-title-desc").removeClass("active"),F.fieldTabToggle("add-fields"),F.toggleNoFieldsPreview(),C.trigger("wpformsFieldDelete",[o,t,i]),r&&F.UndoRedo?.preventRecord("continue")})},toggleNoFieldsPreview(){var e=y(".wpforms-field-option"),i=C.find(".wpforms-field-submit"),e=(C.find(".no-fields, .no-fields-preview").remove(),e.length<1&&(k.$sortableFieldsWrap.append(k.$noFieldsPreview.clone()),k.$fieldOptions.append(k.$noFieldsOptions.clone())),Boolean(e.filter(":not(.wpforms-field-option-layout)").length));i.toggle(e)},determineActiveSections(){let t=wpf.getQueryString("section");y(".wpforms-panel").each(function(){var e,i=y(this),o=(e=i,(!(o=t)||!e.hasClass("active")||0===(e=e.find(`.wpforms-panel-sidebar-section[data-section="${o}"]`)).length||e.hasClass("wpforms-panel-sidebar-section-no-access")?null:e)||(e=>{e=e.find(".wpforms-panel-sidebar-section.configured").first();return e.length?e:null})(i)||i.find(".wpforms-panel-sidebar-section:first-of-type"));e=i,(i=o)&&(o=i.data("section"),i.addClass("active"),(i=e.find(".wpforms-panel-content-section-"+o)).length?(i.show().addClass("active"),e.find(".wpforms-panel-content-section-default").toggle("default"===o)):e.find(".wpforms-panel-content-section-default").show().addClass("active"),WPFormsUtils.triggerEvent(C,"wpformsPanelSectionSwitch",o))})},loadEntryPreviewFields(){var e=y("#wpforms-panel-fields .wpforms-field-wrap .wpforms-field-entry-preview");e.length&&e.each(function(){F.lockEntryPreviewFieldsPosition(y(this).data("field-id"))})},fieldEntryPreviewDelete(e,i,o){"entry-preview"===o&&(i=(o=y("#wpforms-field-"+i)).prevAll(".wpforms-field-pagebreak").first(),o=o.nextAll(".wpforms-field-pagebreak").first().data("field-id"),o=y("#wpforms-field-option-"+o),i.removeClass("wpforms-field-not-draggable wpforms-field-entry-preview-not-deleted"),o.find(".wpforms-entry-preview-block").removeClass("wpforms-entry-preview-block"),C.trigger("wpformsFieldDragToggle",[i.data("field-id"),i.data("field-type")]))},maybeLockEntryPreviewGroupOnMove(e,i){i.item.hasClass("wpforms-field-pagebreak")&&F.maybeLockEntryPreviewGroupOnAdd(e,i.item.data("field-id"),"pagebreak")},maybeLockEntryPreviewGroupOnAdd(e,i,o){var t,r,s,l,n;"pagebreak"===o&&(r=(t=y("#wpforms-field-"+i)).prevAll(".wpforms-field-entry-preview,.wpforms-field-pagebreak").first(),n=t.nextAll(".wpforms-field-entry-preview,.wpforms-field-pagebreak").first(),r.hasClass("wpforms-field-entry-preview")||n.hasClass("wpforms-field-entry-preview"))&&(s=(l=y("#wpforms-field-option-"+i+" .wpforms-field-option-row-prev_toggle")).find("input"),n=y("#wpforms-field-option-"+n.data("field-id")+" .wpforms-field-option-row-prev_toggle"),F.UndoRedo?.preventRecord(!0),r.hasClass("wpforms-field-entry-preview")?(s.attr("checked","checked").trigger("change"),l.addClass("wpforms-entry-preview-block"),n.removeClass("wpforms-entry-preview-block")):(s=r.data("field-id"),n=(l=y("#wpforms-field-option-"+s+" .wpforms-field-option-row-prev_toggle")).find("input"),t.addClass("wpforms-field-not-draggable wpforms-field-entry-preview-not-deleted"),C.trigger("wpformsFieldDragToggle",[i,o]),r.removeClass("wpforms-field-not-draggable wpforms-field-entry-preview-not-deleted"),C.trigger("wpformsFieldDragToggle",[s,r.data("field-type")]),r.prevAll(".wpforms-field-entry-preview,.wpforms-field-pagebreak").first().hasClass("wpforms-field-entry-preview")&&(n.attr("checked","checked").trigger("change"),l.addClass("wpforms-entry-preview-block"))),F.UndoRedo?.preventRecord("continue"))},entryPreviewBlockField(e){e.preventDefault(),y.alert({title:wpforms_builder.heads_up,content:wpforms_builder.entry_preview_require_previous_button,icon:"fa fa-exclamation-circle",type:"red",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})},isUncheckedEntryPreviewField(e,i){return!("entry-preview"!==e||i&&i.passed)},addEntryPreviewField(e,i){var o,t,r,s=y("#wpforms-add-fields-entry-preview");s.hasClass("wpforms-entry-preview-adding")||(r=y("#wpforms-panel-fields .wpforms-field-wrap > .wpforms-field"),o=i?.position?i.position:r.length,t=F.isEntryPreviewFieldRequiresPageBreakBefore(r,o),r=F.isEntryPreviewFieldRequiresPageBreakAfter(r,o),s.addClass("wpforms-entry-preview-adding"),(i=i||{}).passed=!0,t||r?t?F.addPageBreakAndEntryPreviewFields(i,o):F.addEntryPreviewAndPageBreakFields(i,o):F.fieldAdd("entry-preview",i).done(function(e){F.lockEntryPreviewFieldsPosition(e.data.field.id)}))},addEntryPreviewFieldAfterPageBreak(e){let i=setInterval(function(){2===y("#wpforms-panel-fields .wpforms-field-wrap").find(".wpforms-pagebreak-bottom, .wpforms-pagebreak-top").length&&(F.fieldAdd("entry-preview",e).done(function(e){F.lockEntryPreviewFieldsPosition(e.data.field.id)}),clearInterval(i))},100)},addPageBreakAndEntryPreviewFields(i,o){let t=3<=y("#wpforms-panel-fields .wpforms-field-wrap > .wpforms-field-pagebreak").length;F.fieldAdd("pagebreak",{position:o}).done(function(e){i.position=t?o+1:o+2,F.addEntryPreviewFieldAfterPageBreak(i),F.UndoRedo?.preventRecord(!0);e=y("#wpforms-field-option-"+e.data.field.id).find(".wpforms-field-option-row-prev_toggle");e.find("input").attr("checked","checked").trigger("change"),e.addClass("wpforms-entry-preview-block"),F.UndoRedo?.preventRecord("continue")})},fieldDuplicate(o){let t=y("#wpforms-field-"+o);t.hasClass("no-duplicate")?y.alert({title:wpforms_builder.field_locked,content:wpforms_builder.field_locked_no_duplicate_msg,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}}):y.confirm({title:!1,content:wpforms_builder.duplicate_confirm,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){var e,i;this.$$confirm.prop("disabled",!0),WPFormsUtils.triggerEvent(C,"wpformsBeforeFieldDuplicate",[o,t]).isDefaultPrevented()||(e=F.fieldDuplicateRoutine(o,!0),i=y("#wpforms-field-"+e),F.increaseNextFieldIdAjaxRequest(),WPFormsUtils.triggerEvent(C,"wpformsFieldDuplicated",[o,t,e,i]))}},cancel:{text:wpforms_builder.cancel}}})},increaseNextFieldIdAjaxRequest(){y.post(wpforms_builder.ajax_url,{form_id:w.formID,field_id:k.$nextFieldId.val(),nonce:wpforms_builder.nonce,action:"wpforms_builder_increase_next_field_id"})},getDuplicatedFieldLabel(e,i){return""!==e?e+" "+wpforms_builder.duplicate_copy:wpforms_builder.field+` #${i} `+wpforms_builder.duplicate_copy},fieldDuplicateRoutine(e,i=!0,o=null){var t=y("#wpforms-field-"+e),r=y("#wpforms-field-option-"+e),s=k.$sortableFieldsWrap.find(">.active"),l=k.$fieldOptions.find(">:visible"),n=l.find(">.active"),a=t.data("field-type"),d=r.attr("class"),p=F.dropdownField.helpers.isModernSelect(t.find("> .choices .primary-input"));wpf.restoreTooltips(r),p&&F.dropdownField.helpers.convertModernToClassic(e);let f=r.html(),c=t.clone(),m=parseInt(k.$nextFieldId.val(),10),w=y(`#wpforms-field-option-${e}-label`),u=(w.length?w:y(`#wpforms-field-option-${e}-name`)).val(),h=m+1,g={};var b=F.getDuplicatedFieldLabel(u,e),v=(g.fieldOptionsID=new RegExp("ID #"+e,"g"),g.fieldID=new RegExp("fields\\["+e+"\\]","g"),g.dataFieldID=new RegExp('data-field-id="'+e+'"',"g"),g.referenceID=new RegExp('data-reference="'+e+'"',"g"),g.elementID=new RegExp('\\b(id|for)="wpforms-(.*?)'+e+'(.*?)"',"ig"),y("#wpforms-field-"+o)),t=((v=v.length?v:t).after(c),s.removeClass("active"),c.addClass("active").attr({id:"wpforms-field-"+m,"data-field-id":m}),g.elementIdReplace=function(e,i,o,t){return`${i}="wpforms-${o}${m}${t}"`},f=(f=(f=(f=(f=f.replace(g.fieldOptionsID,"ID #"+m)).replace(g.fieldID,`fields[${m}]`)).replace(g.dataFieldID,`data-field-id="${m}"`)).replace(g.referenceID,`data-reference="${m}"`)).replace(g.elementID,g.elementIdReplace),l.hide(),y("#wpforms-field-option-"+o));(t=t.length?t:r).after(`<div class="${d}" id="wpforms-field-option-${m}" data-field-id="${m}">${f}</div>`);let _=y("#wpforms-field-option-"+m);s.data("field-id")===e&&n.length&&(v=n.attr("class").match(/wpforms-field-option-group-\S*/i)[0],l=_.find(">."+v),_.find(">").removeClass("active"),l.addClass("active")),s.data("field-id")!==e&&n.length&&(_.find(">").removeClass("active"),_.find(">.wpforms-field-option-group-basic").addClass("active")),r.find(":input").each(function(){var e=y(this),i=e.attr("name");if(!i)return"continue";var i=i.replace(g.fieldID,`fields[${m}]`),o=e.attr("type");"checkbox"===o||"radio"===o?e.is(":checked")?_.find(`[name="${i}"]`).prop("checked",!0).attr("checked","checked"):_.find(`[name="${i}"]`).prop("checked",!1).attr("checked",!1):e.is("select")?e.find("option:selected").length&&(o=e.find("option:selected").val(),_.find(`[name="${i}"]`).find(`[value="${o}"]`).prop("selected",!0)):""===(o=e.val())&&e.hasClass("wpforms-money-input")?_.find(`[name="${i}"]`).val(wpf.numberFormat("0",wpforms_builder.currency_decimals,wpforms_builder.currency_decimal,wpforms_builder.currency_thousands)):_.find(`[name="${i}"]`).val(o)}),_.find(".wpforms-field-option-hidden-id").val(m),k.$nextFieldId.val(h);o=y("html"===a?`#wpforms-field-option-${m}-name`:`#wpforms-field-option-${m}-label`);return i&&o.val(b).trigger("input"),F.UndoRedo?.preventRecord(!0),C.trigger("wpformsFieldAdd",[m,a,{},c,_]),F.UndoRedo?.preventRecord("continue"),wpf.initTooltips(),p&&(F.dropdownField.helpers.convertClassicToModern(e),F.dropdownField.helpers.convertClassicToModern(m)),F.fieldChoiceUpdate(c.data("field-type"),m),F.loadColorPickers(),m},addEntryPreviewAndPageBreakFields(e,o){F.fieldAdd("entry-preview",e).done(function(e){let i=e.data.field.id;F.fieldAdd("pagebreak",{position:o+1}).done(function(e){F.lockEntryPreviewFieldsPosition(i);e=y("#wpforms-field-"+e.data.field.id).nextAll(".wpforms-field-pagebreak, .wpforms-field-entry-preview").first();e.hasClass("wpforms-field-entry-preview")&&F.lockEntryPreviewFieldsPosition(e.data("field-id"))})})},lockEntryPreviewFieldsPosition(e){var i=y("#wpforms-field-"+e),o=i.prevAll(".wpforms-field-pagebreak:not(.wpforms-pagebreak-bottom)").first(),t=i.nextAll(".wpforms-field-pagebreak").first().data("field-id"),t=y("#wpforms-field-option-"+t).find(".wpforms-field-option-row-prev_toggle"),r=t.find("input");F.UndoRedo?.preventRecord(!0),i.addClass("wpforms-field-not-draggable"),o.addClass("wpforms-field-not-draggable wpforms-field-entry-preview-not-deleted"),r.prop("checked","checked").trigger("change"),t.addClass("wpforms-entry-preview-block"),y("#wpforms-add-fields-entry-preview").removeClass("wpforms-entry-preview-adding"),F.UndoRedo?.preventRecord("continue"),C.trigger("wpformsFieldDragToggle",[e,i.data("field-type")]),C.trigger("wpformsFieldDragToggle",[o.data("field-id"),o.data("field-type")])},isEntryPreviewFieldRequiresPageBreakBefore(e,i){e=e.slice(0,i).filter(".wpforms-field-pagebreak,.wpforms-field-entry-preview");let o=!0;return e.length&&y(e.get().reverse()).each(function(){var e=y(this);return!e.hasClass("wpforms-field-entry-preview")&&(e.hasClass("wpforms-field-pagebreak")&&!e.hasClass("wpforms-field-stick")?o=!1:void 0)}),o},isEntryPreviewFieldRequiresPageBreakAfter(e,i){e=e.slice(i).filter(".wpforms-field-pagebreak,.wpforms-field-entry-preview");let o=Boolean(e.length);return e.length&&e.each(function(){var e=y(this);return!e.hasClass("wpforms-field-entry-preview")&&(e.hasClass("wpforms-field-pagebreak")?o=!1:void 0)}),o},fieldAdd(t,r){var e=y("#wpforms-add-fields-"+t);if(!(e.hasClass("upgrade-modal")||e.hasClass("education-modal")||e.hasClass("warning-modal")))if(["captcha_turnstile","captcha_hcaptcha","captcha_recaptcha","captcha_none"].includes(t))F.captchaUpdate();else{if(a=!0,WPForms.Admin.Builder.DragFields?.disableDragAndDrop(),F.disableFormActions(),!F.isUncheckedEntryPreviewField(t,r))return r=y.extend({},{position:"bottom",$sortable:"base",placeholder:!1,scroll:!0,defaults:!1},r),e={action:"wpforms_new_field_"+t,id:w.formID,type:t,defaults:r.defaults,nonce:wpforms_builder.nonce},y.post(wpforms_builder.ajax_url,e,function(e){var i,o;e.success?(i=y(e.data.preview),o=y(e.data.options),a=!1,F.fieldAddToDOM(e.data.field.id,t,r,i,o)):wpf.debug("Add field AJAX call is unsuccessful:",e)}).fail(function(e){a=!1,wpf.debug("Add field AJAX call failed:",e.responseText)}).always(function(){a||(WPForms.Admin.Builder.DragFields?.enableDragAndDrop(),F.enableFormActions())});F.addEntryPreviewField(t,r)}},fieldAddToDOM(e,i,o,t,r){var s=k.$sortableFieldsWrap;let l=o.$sortable;a=!1,t.css("display","none"),o.placeholder&&o.placeholder.remove(),"default"!==o.$sortable&&o.$sortable.length||(l=s.find(".wpforms-fields-sortable-default")),"base"!==o.$sortable&&l.length||(l=s),C.trigger("wpformsBeforeFieldAdd",[e,i,o,t,r]);s=WPFormsUtils.triggerEvent(C,"wpformsBeforeFieldAddToDOM",[o,t,r,l]);s.isDefaultPrevented()||(s.skipAddFieldToBaseLevel||F.fieldAddToBaseLevel(o,t,r),t.fadeIn(),F.toggleNoFieldsPreview(),o.scroll&&o.position.length&&F.scrollPreviewToField(e),k.$nextFieldId.val(e+1),wpf.initTooltips(),F.loadColorPickers(),F.toggleAllOptionGroups(),C.trigger("wpformsFieldAdd",[e,i,o,t,r]))},fieldAddToBaseLevel(e,i,o){var t,r=k.$sortableFieldsWrap,s=r.children(":not(.wpforms-field-drag-pending, .no-fields-preview)"),l=s.length,n=k.$fieldOptions;"top"===e.position?(r.prepend(i),n.prepend(o)):(t=s.last(),"bottom"!==e.position||t.length&&t.hasClass("wpforms-field-stick")?("bottom"===e.position&&(e.position=l),e.position===l&&t.length&&t.hasClass("wpforms-field-stick")?(l=t.data("field-id"),t.before(i),n.find("#wpforms-field-option-"+l).before(o)):(t=s.eq(e.position)).length?(l=t.data("field-id"),t.before(i),n.find("#wpforms-field-option-"+l).before(o)):(r.append(i),n.append(o))):(r.append(i),n.append(o)))},scrollPreviewToField(e){var e=y("#wpforms-field-"+e),i=k.$fieldsPreviewWrap.scrollTop(),o=e.closest(".wpforms-field-layout");let t=e.position().top;e=(t=o.length?o.position().top+t+20:t)>i?t-i:t+i;k.$fieldsPreviewWrap.scrollTop(e)},captchaUpdate(){var e={action:"wpforms_update_field_captcha",id:w.formID,nonce:wpforms_builder.nonce};return y.post(wpforms_builder.ajax_url,e,function(t){if(t.success){let e={title:!1,content:!1,icon:"fa fa-exclamation-circle",type:"orange",boxWidth:"450px",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}},i=y("#wpforms-panel-field-settings-recaptcha"),o=t.data.current;i.data("provider",t.data.provider),"configured_not_enabled"!==o&&"configured_enabled"!==o||(o=i.prop("checked")?"configured_enabled":"configured_not_enabled",e.buttons.confirm.action=function(){i.prop("checked","configured_not_enabled"===o).trigger("change")}),e.title=t.data.cases[o].title,e.content=t.data.cases[o].content,t.data.cases[o].cancel&&(e.buttons.cancel={text:wpforms_builder.cancel,keys:["esc"]}),y.confirm(e)}else console.log(t)}).fail(function(e){console.log(e.responseText)})},disableDragAndDrop(){console.warn('WARNING! Function "WPFormsBuilder.disableDragAndDrop()" has been deprecated, please use the new "WPForms.Admin.Builder.DragFields.disableDragAndDrop()" function instead!'),WPForms.Admin.Builder.DragFields.disableDragAndDrop()},enableDragAndDrop(){console.warn('WARNING! Function "WPFormsBuilder.enableDragAndDrop()" has been deprecated, please use the new "WPForms.Admin.Builder.DragFields.enableDragAndDrop()" function instead!'),WPForms.Admin.Builder.DragFields.enableDragAndDrop()},disableFormActions(){y.each([k.$previewButton,k.$embedButton,k.$saveButton,k.$exitButton],function(e,i){i.prop("disabled",!0).addClass("wpforms-disabled")}),F.UndoRedo?.preventRun(!0)},enableFormActions(){y.each([k.$previewButton,k.$embedButton,k.$saveButton,k.$exitButton],function(e,i){i.prop("disabled",!1).removeClass("wpforms-disabled")}),F.UndoRedo?.preventRun(!1)},fieldSortable(){console.warn('WARNING! Function "WPFormsBuilder.fieldSortable()" has been deprecated, please use the new "WPForms.Admin.Builder.DragFields.initSortableFields()" function instead!'),WPForms.Admin.Builder.DragFields.initSortableFields()},fieldDragDisable(e,i=!0){console.warn('WARNING! Function "WPFormsBuilder.fieldDragDisable()" has been deprecated, please use the new "WPForms.Admin.Builder.DragFields.fieldDragDisable()" function instead!'),WPForms.Admin.Builder.DragFields.fieldDragDisable(e,i)},fieldDragEnable(e){console.warn('WARNING! Function "WPFormsBuilder.fieldDragEnable()" has been deprecated, please use the new "WPForms.Admin.Builder.DragFields.fieldDragEnable()" function instead!'),WPForms.Admin.Builder.DragFields.fieldDragEnable(e)},fieldChoiceAdd(e,i){e.preventDefault();var e=y(i),i=e.closest("li"),o=i.closest("ul"),t=i.find("input.default").is(":checked"),e=e.closest(".wpforms-field-option-row-choices").data("field-id");F.triggerBuilderEvent("wpformsFieldChoiceBeforeCloning",[e,i]);let r=o.attr("data-next-id");var s=o.data("field-type"),l=i.clone().insertAfter(i);l.attr("data-key",r),l.find(".wpforms-icon-select .ic-fa-preview").removeClass().addClass("ic-fa-preview ic-fa-"+wpforms_builder.icon_choices.default_icon_style+" ic-fa-"+wpforms_builder.icon_choices.default_icon),l.find(".wpforms-icon-select .ic-fa-preview + span").text(wpforms_builder.icon_choices.default_icon),l.find(".preview").empty(),l.find(".wpforms-image-upload-add").show(),l.find(".wpforms-money-input").trigger("focusout"),l.find("input, select").each(function(){var e=y(this),i=e.attr("type");e.attr("name",y(this).attr("name").replace(/\[choices]\[(\d+)]/g,`[choices][${r}]`)),"radio"===i||"checkbox"===i?e.prop("checked",!1):e.val("")}),l.find(".wpforms-icon-select input.source-icon").val(wpforms_builder.icon_choices.default_icon),l.find(".wpforms-icon-select input.source-icon-style").val(wpforms_builder.icon_choices.default_icon_style),!0===t&&i.find("input.default").prop("checked",!0),r++,o.attr("data-next-id",r),F.fieldChoiceUpdate(s,e),F.triggerBuilderEvent("wpformsFieldChoiceAdd",[e,o,"single"])},fieldChoiceDelete(e,i){e.preventDefault();let o=y(i),t=o.parent().parent(),r=t.find("li").not(".wpforms-choice-other-option").length,s={id:t.data("field-id"),choiceId:o.closest("li").data("key"),message:"<strong>"+wpforms_builder.delete_choice_confirm+"</strong>",trigger:!1};if(C.trigger("wpformsBeforeFieldDeleteAlert",[s]),1===r)F.fieldChoiceDeleteAlert();else{let e=function(){o.parent().remove(),F.fieldChoiceUpdate(t.data("field-type"),t.data("field-id")),C.trigger("wpformsFieldChoiceDelete",[t.data("field-id")])};s.trigger?y.confirm({title:!1,content:s.message,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){e()}},cancel:{text:wpforms_builder.cancel}}}):e()}},fieldChoiceDeleteAlert(){y.alert({title:!1,content:wpforms_builder.error_choice,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})},fieldChoiceSortable(t,e=void 0){y(e=void 0!==e?e:".wpforms-field-option-"+t+" .wpforms-field-option-row-choices ul").one("mouseenter",function(){y(this).sortable({items:"li:not(.not-draggable)",axis:"y",delay:100,opacity:.6,handle:".move",start(e,i){C.trigger("wpformsBeforeFieldChoiceDragStart",i)},stop(e,i){var o=i.item.parent().data("field-id");F.fieldChoiceUpdate(t,o),C.trigger("wpformsFieldChoiceMove",i)},update(){}})})},fieldChoiceLabel(e,i){var o=["payment-multiple","payment-checkbox"].includes(e.settings.type),t=e.settings.choices_icons||e.settings.choices_images,r=void 0===e.settings.choices[i].label||0===e.settings.choices[i].label.length;if(r&&!o&&t)return"";t=o?wpforms_builder.payment_choice_empty_label_tpl:wpforms_builder.choice_empty_label_tpl;let s=r?t.replace("{number}",i):wpf.sanitizeHTML(e.settings.choices[i].label,wpforms_builder.allowed_label_html_tags);return e.settings.show_price_after_labels&&(s+=" - "+wpf.amountFormatCurrency(e.settings.choices[i].value)),s},fieldChoiceUpdate:(p,t,r=-1)=>{let f=F.dropdownField.helpers.isDynamicChoices(t);if(!F.replaceChoicesWithTemplate(p,t,f)){-1===r&&(r=F.settings.choicesLimitLong),"payment-select"===p&&(p="select");let s=y("#wpforms-field-"+t+" .primary-input"),l="",e=("select"===p?f||(l='<option value="{label}">{label}</option>',s.find("option").not(".placeholder").remove()):"radio"!==p&&"checkbox"!==p&&"gdpr-checkbox"!==p||(p="gdpr-checkbox"===p?"checkbox":p,s.find("li").remove(),l='<li><input type="'+p+'" disabled>{label}</li>'),y(`#wpforms-field-option-row-${t}-choices .choices-list`)),i=e.find("li").slice(0,r),o=!!e.find("input.default:checked").length,n=[],a=y("#wpforms-field-option-"+t+"-show_price_after_labels").prop("checked"),d=F.dropdownField.helpers.isModernSelect(s);var c;i.get().forEach(function(e){var e=y(e),i=e.find("input.value").val(),o=e.data("key");let t=e.find("input.label").val()?.trim()??"",r;if(t=""!==(t=wpf.sanitizeHTML(t,wpforms_builder.allowed_label_html_tags))?t:wpforms_builder.choice_empty_label_tpl.replace("{number}",o),t+=a&&i?" - "+wpf.amountFormatCurrency(i):"",d?n.push({value:t,label:t}):f||(r=y(l.replace(/{label}/g,t)),s.append(r)),!0===e.find("input.default").is(":checked"))switch(p){case"select":d?n[n.length-1].selected=!0:F.setClassicSelectedChoice(r);break;case"radio":case"checkbox":r.find("input").prop("checked","true")}}),d&&(r=s.prop("multiple")?"input.choices__input":".choices__inner .choices__placeholder",c=F.dropdownField.helpers.getInstance(s),f||c.removeActiveItems(),c.setChoices(n,"value","label",!0),F.dropdownField.helpers.update(t,f),s.closest(".choices").find(r).toggleClass("wpforms-hidden",o))}},replaceChoicesWithTemplate:(e,i,o)=>{if("radio"!==e&&"checkbox"!==e&&"payment-multiple"!==e&&"payment-checkbox"!==e)return!1;var t=wpf.getChoicesOrder(i),r=wp.template("wpforms-field-preview-checkbox-radio-payment-multiple");let s=wpf.getField(i),l={},n=t.slice(0,F.settings.choicesLimit),a={settings:s,order:n,type:"radio"};return s.choices_icons&&(a.settings.choices_icons_color=F.getValidColorPickerValue(y("#wpforms-field-option-"+i+"-choices_icons_color"))),n.forEach(function(e){l[e]=s.choices[e]}),s.choices=l,"checkbox"!==e&&"payment-checkbox"!==e||(a.type="checkbox"),o||y("#wpforms-field-"+i).find("ul.primary-input").replaceWith(r(a)),F.firstNChoicesAlert(i,t.length),!0},setClassicSelectedChoice(e){void 0!==e&&e.prop("selected","true")},fieldChoiceBulkAddToggle(i){var i=y(i),o=i.closest("label");if(i.hasClass("bulk-add-showing")){let e=o.next(".bulk-add-display");e.slideUp(400,function(){e.remove()}),i.find("span").text(wpforms_builder.bulk_add_show)}else{let e='<div class="bulk-add-display unfoldable-cont">';for(var t in e=e+('<p class="heading wpforms-clear">'+wpforms_builder.bulk_add_heading+' <a href="#" class="toggle-bulk-add-presets">'+wpforms_builder.bulk_add_presets_show+"</a></p>")+"<ul>",wpforms_preset_choices)e+='<li><a href="#" data-preset="'+t+'" class="bulk-add-preset-insert">'+wpforms_preset_choices[t].name+"</a></li>";e=(e=(e+="</ul>")+('<textarea placeholder="'+wpforms_builder.bulk_add_placeholder+'"></textarea>'))+('<button class="bulk-add-insert wpforms-btn wpforms-btn-sm wpforms-btn-blue">'+wpforms_builder.bulk_add_button+"</button>")+"</div>",o.after(e),o.next(".bulk-add-display").slideDown(400,function(){y(this).find("textarea").trigger("focus")}),i.find("span").text(wpforms_builder.bulk_add_hide)}i.toggleClass("bulk-add-showing")},fieldChoiceBulkAddInsert(e){var i,e=y(e),o=e.closest(".wpforms-field-option-row"),t=o.find("textarea").val().split("\n"),r=o.find(".choices-list"),s=r.find("li:first-of-type"),l=o.data("field-id"),n=r.data("field-type"),s=(F.triggerBuilderEvent("wpformsFieldChoiceBeforeCloning",[l,s]),s.clone().wrap("<div>").parent());let a,d=Number(r.attr("data-next-id")),p="";for(i in e.prop("disabled",!0).html(e.html()+" "+w.spinner),s.find("input.value,input.label").attr("value",""),s.find("input.default").attr("checked",!1),s.find("input.source-icon").attr("value",wpforms_builder.icon_choices.default_icon),s.find("input.source-icon-style").attr("value",wpforms_builder.icon_choices.default_icon_style),s.find(".ic-fa-preview").removeClass().addClass(`ic-fa-preview ic-fa-${wpforms_builder.icon_choices.default_icon_style} ic-fa-`+wpforms_builder.icon_choices.default_icon),s.find(".ic-fa-preview + span").text(wpforms_builder.icon_choices.default_icon),a=s.html(),t)if(t.hasOwnProperty(i)){var f=wpf.sanitizeHTML(t[i]).trim().replace(/"/g,"&quot;");let e=a;e=(e=(e=(e=e.replace(/\[choices]\[(\d+)]/g,"[choices]["+d+"]")).replace(/data-key="(\d+)"/g,'data-key="'+d+'"')).replace(/value="" class="label"/g,'value="'+f+'" class="label"')).replace(/class="label" type="text" value=""/g,'class="label" type="text" value="'+f+'"'),p+=e,d++}r.attr("data-next-id",d);e=r.find("li.wpforms-choice-other-option").first();e.length?e.before(p):r.append(p),F.fieldChoiceUpdate(n,l,d),F.triggerBuilderEvent("wpformsFieldChoiceAdd",[l,r,"bulk-add"]),F.fieldChoiceBulkAddToggle(o.find(".toggle-bulk-add-display"))},triggerBuilderEvent(e,i){C.trigger(e,i)},fieldTabToggle(e,i){return!!F.shouldContinueFieldTabToggle(e,i)&&!WPFormsUtils.triggerEvent(C,"wpformsFieldTabToggle",[e,i]).isDefaultPrevented()&&(y(".wpforms-tab a").removeClass("active"),y(".wpforms-field, .wpforms-title-desc").removeClass("active"),void("add-fields"===e?(k.$addFieldsTab.addClass("active"),y(".wpforms-field-options").hide(),y(".wpforms-add-fields").show()):(y("#field-options a").addClass("active"),"field-options"===e?((i=y(".wpforms-field").first()).addClass("active"),e=i.data("field-id")):y("#wpforms-field-"+e).addClass("active"),y(".wpforms-field-option").hide(),y("#wpforms-field-option-"+e).show(),y(".wpforms-add-fields").hide(),y(".wpforms-field-options").show(),C.trigger("wpformsFieldOptionTabToggle",[e]))))},shouldContinueFieldTabToggle(e,i){if(!i)return!0;let o=!0;return C.trigger("wpformsFieldTabToggleBefore",[e,i,function(e){o=e}]),o},fieldPagebreakAdd(e,i,o,t){if("pagebreak"===o&&!t?.isUndoRedo){let e;w.pagebreakTop?w.pagebreakBottom||(w.pagebreakBottom=!0,e={position:"bottom",scroll:!1,defaults:{position:"bottom"}},F.fieldAdd("pagebreak",e).done(function(e){w.pagebreakBottom=e.data.field.id;var i=y("#wpforms-field-"+e.data.field.id);y("#wpforms-field-option-"+e.data.field.id).find(".wpforms-field-option-group").addClass("wpforms-pagebreak-bottom"),i.addClass("wpforms-field-stick wpforms-pagebreak-bottom")})):(w.pagebreakTop=!0,e={position:"top",scroll:!1,defaults:{position:"top",nav_align:"left"}},F.fieldAdd("pagebreak",e).done(function(e){w.pagebreakTop=e.data.field.id;var i=y("#wpforms-field-"+e.data.field.id);y("#wpforms-field-option-"+e.data.field.id).find(".wpforms-field-option-group").addClass("wpforms-pagebreak-top"),i.addClass("wpforms-field-stick wpforms-pagebreak-top")}))}},updatePagebreaksState(){w.pagebreakTop=y(".wpforms-pagebreak-top").length,w.pagebreakBottom=y(".wpforms-pagebreak-bottom").length},fieldPagebreakDelete(e,i,o){var t,r,s;"pagebreak"!==o||y("#wpforms-panel-fields .wpforms-field-pagebreak").not(".wpforms-pagebreak-top, .wpforms-pagebreak-bottom").length||(r=(t=(o=y("#wpforms-panel-fields .wpforms-preview-wrap")).find(".wpforms-pagebreak-top")).data("field-id"),s=(o=o.find(".wpforms-pagebreak-bottom")).data("field-id"),t.remove(),y("#wpforms-field-option-"+r).remove(),w.pagebreakTop=!1,o.remove(),y("#wpforms-field-option-"+s).remove(),w.pagebreakBottom=!1)},fieldPageBreakInitDisplayPrevious(e){var i=e.data("field-id"),o=y("#wpforms-field-option-row-"+i+"-prev_toggle"),i=y("#wpforms-field-option-row-"+i+"-prev"),t=e.find(".wpforms-pagebreak-prev");0<e.prevAll(".wpforms-field-pagebreak.wpforms-pagebreak-normal").length?(o.removeClass("hidden"),i.removeClass("hidden"),o.find("input").is(":checked")&&t.removeClass("wpforms-hidden").text(i.find("input").val())):(o.addClass("hidden"),i.addClass("hidden"),t.addClass("wpforms-hidden"))},fieldDynamicChoiceToggle(l){if(!wpf.isFieldOptionLoading){let r,e=y(l),i=e.parent(),o=e.val(),s=i.data("field-id");var l=y("#wpforms-field-option-row-"+s+"-choices"),n=y("#wpforms-field-option-"+s+"-choices_images"),a=y("#wpforms-field-option-"+s+"-choices_icons"),d=y("#wpforms-field-option-"+s+"-choices_other"),p=y("#wpforms-field-option-basic-"+s);if(F.fieldDynamicChoiceToggleImageChoices(),F.fieldDynamicChoiceToggleIconChoices(),F.fieldDynamicChoiceToggleOtherOption(),C.trigger("wpformsFieldDynamicChoiceToggle",[s]),wpf.fieldOptionLoading(i),y("#wpforms-field-option-row-"+s+"-dynamic_post_type").remove(),y("#wpforms-field-option-row-"+s+"-dynamic_taxonomy").remove(),""!==o)n.addClass("wpforms-hidden"),a.addClass("wpforms-hidden"),d.addClass("wpforms-hidden"),l.find(".toggle-bulk-add-display").addClass("wpforms-hidden"),p.find(".wpforms-ai-choices-button").addClass("wpforms-hidden"),l.find(".wpforms-help-tooltip").addClass("wpforms-hidden"),f={type:o,field_id:s,action:"wpforms_builder_dynamic_choices",nonce:wpforms_builder.nonce},y.post(wpforms_builder.ajax_url,f,function(e){e.success?i.after(e.data.markup):console.log(e),wpf.fieldOptionLoading(i,!0),wpf.initTooltips();e=y("#wpforms-field-option-"+s+"-dynamic_"+o);e.find("option").first().prop("selected",!0),e.trigger("change")}).fail(function(e){console.log(e.responseText)});else{let t=y("#wpforms-field-option-"+s).find(".wpforms-field-option-hidden-type").val();n.removeClass("wpforms-hidden"),a.removeClass("wpforms-hidden"),d.removeClass("wpforms-hidden"),l.find(".toggle-bulk-add-display").removeClass("wpforms-hidden"),p.find(".wpforms-ai-choices-button").removeClass("wpforms-hidden"),l.find(".wpforms-help-tooltip").removeClass("wpforms-hidden");var f=y("#wpforms-field-"+s);if(f.find(".wpforms-alert").remove(),-1<["checkbox","radio","payment-multiple","payment-checkbox"].indexOf(t))F.fieldChoiceUpdate(t,s),l.find("ul").removeClass("wpforms-hidden"),l.find(".wpforms-alert").addClass("wpforms-hidden");else{n=f;let i=[],e=n.find(".primary-input"),o;if(y(`#wpforms-field-option-row-${s}-choices li`).each(function(){var e=y(this);i.push({label:wpf.sanitizeHTML(e.find(".label").val()),selected:e.find(".default").is(":checked")})}),n.hasClass("wpforms-field-select")){var c,a=F.dropdownField.helpers.isModernSelect(e);if(e.find("option").not(".placeholder").remove(),a&&i.length)F.dropdownField.helpers.update(s,!1);else for(o in i)c=i[o].selected,r="<option",r=(r+=c?" selected>":">")+i[o].label+"</option>",e.append(r)}else for(o in t="radio",n.hasClass("wpforms-field-checkbox")&&(t="checkbox"),e.empty(),i)r='<li><input type="'+t+'" disabled',r=(r+=i[o].selected?" selected>":">")+i[o].label+"</li>",e.append(r);l.find("ul").removeClass("wpforms-hidden"),l.find(".wpforms-alert").addClass("wpforms-hidden"),e.removeClass("wpforms-hidden")}wpf.fieldOptionLoading(i,!0)}}},fieldDynamicChoiceSource(e){let i=y(e),o=i.parent(),t=i.val(),r=o.data("field-id"),s=y("#wpforms-builder-form").data("id"),l=y("#wpforms-field-option-row-"+r+"-choices"),n=y("#wpforms-field-"+r),a=y(`#wpforms-field-option-${r}-dynamic_choices option:selected`).val(),d=20;wpf.fieldOptionLoading(o);e={type:a,source:t,field_id:r,form_id:s,action:"wpforms_builder_dynamic_source",nonce:wpforms_builder.nonce};y.post(wpforms_builder.ajax_url,e,function(i){if(i.success){if(l.find(".dynamic-name").text(i.data.source_name),l.find(".dynamic-type").text(i.data.type_name),l.find("ul").addClass("wpforms-hidden"),l.find(".wpforms-alert").removeClass("wpforms-hidden"),F.fieldDynamicChoiceSourceItems(n,i.data.items),n.hasClass("wpforms-field-select")&&(d=200),n.find(".wpforms-notice-dynamic-empty").remove(),Number(i.data.total)>d){let e=wpforms_builder.dynamic_choices.limit_message;e=(e=(e=(e=e.replace("{source}",i.data.source_name)).replace("{type}",i.data.type_name)).replace("{limit}",d)).replace("{total}",i.data.total),y.alert({title:wpforms_builder.heads_up,content:e,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})}F.firstNChoicesAlert(r,i.data.total),0===Number(i.data.total)&&F.emptyChoicesNotice(r,i.data.source_name,i.data.type)}else console.log(i);wpf.fieldOptionLoading(o,!0)}).fail(function(e){console.log(e.responseText)})},fieldDynamicChoiceSourceItems(i,o){var t=i.find(".primary-input");let r=0;if(i.hasClass("wpforms-field-select"))F.dropdownField.helpers.isModernSelect(t)?F.fieldDynamicChoiceSourceForModernSelect(t,o):F.fieldDynamicChoiceSourceForClassicSelect(t,o);else{let e="radio";for(r in i.hasClass("wpforms-field-checkbox")&&(e="checkbox"),t.empty(),o)t.append('<li><input type="'+e+'" disabled> '+wpf.sanitizeHTML(o[r])+"</li>")}},fieldDynamicChoiceSourceForModernSelect(e,i){var o=F.dropdownField.helpers.getInstance(e),t=e.closest(".wpforms-field").data().fieldId;o.destroy(),F.dropdownField.helpers.updatePlaceholderChoice(o,t),F.fieldDynamicChoiceSourceForClassicSelect(e,i),F.dropdownField.events.choicesInit(e)},fieldDynamicChoiceSourceForClassicSelect(e,i){let o=0;var t=i.length;for(e.find("option").not(".placeholder").remove();o<t;o++){var r=wpf.sanitizeHTML(i[o]);e.append('<option value="'+r+'">'+r+"</option>")}e.toggleClass("wpforms-hidden",!t)},fieldDynamicChoiceToggleImageChoices(){y(`#wpforms-builder .wpforms-field-options .wpforms-field-option-checkbox,
				#wpforms-builder .wpforms-field-options .wpforms-field-option-radio`).each(function(e,i){var i=y(i),o=i.find(".wpforms-field-option-row-dynamic_choices select").val(),o=void 0!==o&&""!==o,t=i.find(".wpforms-field-option-row-choices_images input").is(":checked");i.find(".wpforms-field-option-row-choices_images").toggleClass("wpforms-hidden",o),t&&!o||i.find(".wpforms-field-option-row-choices_images_style").addClass("wpforms-hidden")})},fieldDynamicChoiceToggleIconChoices(){y(`#wpforms-builder .wpforms-field-options .wpforms-field-option-checkbox,
				#wpforms-builder .wpforms-field-options .wpforms-field-option-radio`).each(function(e,i){var i=y(i),o=i.find(".wpforms-field-option-row-dynamic_choices select").val(),o=void 0!==o&&""!==o,t=i.find(".wpforms-field-option-row-choices_icons input").is(":checked");i.find(".wpforms-field-option-row-choices_icons").toggleClass("wpforms-hidden",o),t&&!o||(i.find(".wpforms-field-option-row-choices_icons_color").addClass("wpforms-hidden"),i.find(".wpforms-field-option-row-choices_icons_size").addClass("wpforms-hidden"),i.find(".wpforms-field-option-row-choices_icons_style").addClass("wpforms-hidden"))})},fieldDynamicChoiceToggleOtherOption(){y("#wpforms-builder .wpforms-field-options .wpforms-field-option-radio").each(function(e,i){var i=y(i),o=i.find(".wpforms-field-option-row-dynamic_choices select"),t=o.val(),t=void 0!==t&&""!==t,r=i.find(".wpforms-field-option-row-choices_other input").is(":checked"),o=o.closest(".wpforms-field-option-row").data("field-id"),s=y("#wpforms-field-option-"+o).find(".wpforms-field-option-row-choices_other input");t?s.is(":checked")&&s.prop("checked",!1).trigger("change"):WPForms.Admin.Builder.MultipleChoices.updatePreviewState(o),i.find(".wpforms-field-option-row-choices_other").toggleClass("wpforms-hidden",t),r&&!t||(i.find(".wpforms-field-option-row-other_placeholder").addClass("wpforms-hidden"),i.find(".wpforms-field-option-row-other_size").addClass("wpforms-hidden"))})},firstNChoicesAlert:(e,i)=>{var o,t,r,e=y("#wpforms-field-"+e);e.hasClass("wpforms-field-select")||(o=wp.template("wpforms-choices-limit-message"),t={total:i},r=F.settings.choicesLimit,e.find(".wpforms-alert-dynamic").remove(),r<i&&e.find(".primary-input").after(o(t)))},emptyChoicesNotice(e,i,o){e=y("#wpforms-field-"+e),i=wpforms_builder.dynamic_choices.empty_message.replace("{source}",i).replace("{type}",wpforms_builder.dynamic_choices.entities[o]),o=wp.template("wpforms-empty-choice-message"),i={message:i};e.find(".label-title").after(o(i))},fieldLayoutSelectorToggle(e){var e=y(e),i=e.closest("label").next(".layout-selector-display");e.hasClass("layout-selector-showing")?(i.stop().slideUp(400),e.find("span").text(wpforms_builder.layout_selector_show)):(i.stop().slideDown(),e.find("span").text(wpforms_builder.layout_selector_hide)),e.toggleClass("layout-selector-showing")},fieldLayoutSelectorInit(o){var e=y(`#wpforms-field-option-row-${o}-css > .layout-selector-display`);if(!e.length){var t,r={"layout-1":[{class:"one-half",data:"wpforms-one-half wpforms-first"},{class:"one-half",data:"wpforms-one-half"}],"layout-2":[{class:"one-third",data:"wpforms-one-third wpforms-first"},{class:"one-third",data:"wpforms-one-third"},{class:"one-third",data:"wpforms-one-third"}],"layout-3":[{class:"one-fourth",data:"wpforms-one-fourth wpforms-first"},{class:"one-fourth",data:"wpforms-one-fourth"},{class:"one-fourth",data:"wpforms-one-fourth"},{class:"one-fourth",data:"wpforms-one-fourth"}],"layout-4":[{class:"one-third",data:"wpforms-one-third wpforms-first"},{class:"two-third",data:"wpforms-two-thirds"}],"layout-5":[{class:"two-third",data:"wpforms-two-thirds wpforms-first"},{class:"one-third",data:"wpforms-one-third"}],"layout-6":[{class:"one-fourth",data:"wpforms-one-fourth wpforms-first"},{class:"one-fourth",data:"wpforms-one-fourth"},{class:"two-fourth",data:"wpforms-two-fourths"}],"layout-7":[{class:"two-fourth",data:"wpforms-two-fourths wpforms-first"},{class:"one-fourth",data:"wpforms-one-fourth"},{class:"one-fourth",data:"wpforms-one-fourth"}],"layout-8":[{class:"one-fourth",data:"wpforms-one-fourth wpforms-first"},{class:"two-fourth",data:"wpforms-two-fourths"},{class:"one-fourth",data:"wpforms-one-fourth"}]};let e,i=`<div class="layout-selector-display unfoldable-cont">
					<p class="heading">${wpforms_builder.layout_selector_layout}</p>
					<div class="layouts">`;for(t in r){for(var s in e=r[t],i+='<div class="layout-selector-display-layout">',e)i+=`<span class="${e[s].class}" data-classes="${e[s].data}"></span>`;i+="</div>"}i+="</div></div>",y(`#wpforms-field-option-row-${o}-css > label`).after(i)}},fieldLayoutSelectorLayout(e){e=y(e);e.parent().find(".layout-selector-display-layout").not(e).remove(),e.parent().find(".heading").text(wpforms_builder.layout_selector_column),e.toggleClass("layout-selector-display-layout layout-selector-display-columns")},fieldLayoutSelectorInsert(e){let i=y(e),o=i.closest(".layout-selector-display"),t=o.parent(),r=t.data("field-id"),s=t.find("label"),l=t.find("input[type=text]"),n=i.data("classes"),a=l.val();a&&(["wpforms-one-half","wpforms-first","wpforms-one-third","wpforms-one-fourth","wpforms-two-thirds","wpforms-two-fourths"].forEach(e=>{a=a.replace(new RegExp("\\b"+e+"\\b","gi"),"")}),a=a.replace(/\s\s+/g," ").trim(),n+=" "+a),l.val(n),o.slideUp(400,function(){o.remove(),F.fieldLayoutSelectorInit(r)}),s.find(".toggle-layout-selector-display").removeClass("layout-selector-showing"),s.find(".toggle-layout-selector-display span").text(wpforms_builder.layout_selector_show)},toggleOrderSummaryConfirmation(e,i,o){"payment-total"===o&&y(".wpforms-confirmation").each(function(){y(this).find(".wpforms-panel-field-confirmations-message_order_summary").closest(".wpforms-panel-field").toggle(0!==y("#wpforms-panel-fields .wpforms-field-payment-total").length)})},bindUIActionsSettings(){C.on("click","#wpforms-panel-fields .wpforms-title-desc, #wpforms-panel-fields .wpforms-field-submit-button, .wpforms-center-form-name",function(e){e.preventDefault(),F.panelSwitch("settings"),(y(this).hasClass("wpforms-center-form-name")||y(this).hasClass("wpforms-title-desc"))&&setTimeout(function(){y("#wpforms-panel-field-settings-form_title").trigger("focus")},300)}),C.on("click",".wpforms-field-pagebreak-last button",function(e){e.preventDefault(),F.panelSwitch("settings"),y("#wpforms-panel-field-settings-pagebreak_prev").trigger("focus")}),C.on("click",".wpforms-panel-content-also-available-item-add-captcha",function(e){e.preventDefault();e=C.find("#wpforms-add-fields-captcha");e.data("action")?e.trigger("click"):F.fieldAdd("captcha",{}).done(function(e){F.panelSwitch("fields"),y("#wpforms-field-"+e.data.field.id).trigger("click")})}),C.on("input","#wpforms-panel-field-settings-pagebreak_prev",function(){y(".wpforms-field-pagebreak-last button").text(y(this).val())}),C.on("input","#wpforms-panel-field-settings-form_title, #wpforms-setup-name",function(){var e=y(this).val().toString().trim();y(".wpforms-preview .wpforms-form-name").text(e),y(".wpforms-center-form-name.wpforms-form-name").text(e),F.trimFormTitle()}),C.on("input","#wpforms-panel-field-settings-form_desc",function(){y(".wpforms-form-desc").text(y(this).val())}),C.on("input","#wpforms-panel-field-settings-submit_text",function(){var e=y(this).val()||wpforms_builder.submit_text;y(".wpforms-field-submit input[type=submit]").val(e)}),C.on("change","#wpforms-panel-field-settings-recaptcha",function(){F.captchaToggle()}),C.on("change",".wpforms-panel-field-confirmations-type",function(){F.confirmationFieldsToggle(y(this))}),C.on("change",".wpforms-panel-field-confirmations-message_entry_preview",F.confirmationEntryPreviewToggle),C.on("change","#wpforms-panel-field-settings-notification_enable",F.notificationToggle),C.on("click",".wpforms-builder-settings-block-add",function(e){e.preventDefault(),wpforms_builder.pro&&F.settingsBlockAdd(y(this))}),C.on("click",".wpforms-builder-settings-block-edit",function(e){e.preventDefault();e=y(this);e.parents(".wpforms-builder-settings-block-header").find(".wpforms-builder-settings-block-name").hasClass("editing")?F.settingsBlockNameEditingHide(e):F.settingsBlockNameEditingShow(e)}),C.on("blur change",".wpforms-builder-settings-block-name-edit input",function(e){y(e.relatedTarget).hasClass("wpforms-builder-settings-block-edit")||F.settingsBlockNameEditingHide(y(this))}),C.on("keypress",".wpforms-builder-settings-block-name-edit input",function(e){13===e.keyCode&&(F.settingsBlockNameEditingHide(y(this)),e.preventDefault())}),C.on("click",".wpforms-builder-settings-block-clone",function(e){e.preventDefault(),F.settingsBlockPanelClone(y(this))}),C.on("click",".wpforms-builder-settings-block-toggle",function(e){e.preventDefault(),F.settingsBlockPanelToggle(y(this))}),C.on("click",".wpforms-builder-settings-block-delete",function(e){e.preventDefault(),F.settingsBlockDelete(y(this))}),C.on("wpformsSettingsBlockAdded wpformsSettingsBlockCloned",function(e,i){i.hasClass("wpforms-notification")&&F.notificationUpdateStatus(i)}),C.on("click",".wpforms-status-button",function(){y(this).hasClass("wpforms-notification-status-button")?F.notificationChangeStatus(y(this)):F.handleStatusButton(y(this))}),C.on("change","#wpforms-panel-field-settings-ajax_submit",function(){F.hideOpenConfirmationsInNewTabOptions(!y(this).is(":checked"))})},hideOpenConfirmationsInNewTabOptions(o){var e=y(".wpforms-panel-field-confirmations-redirect_new_tab");e.length&&e.each(function(){var e=y(this),i=e.closest(".wpforms-builder-settings-block").find(".wpforms-panel-field-confirmations-type").val();e.closest(".wpforms-panel-field").toggle(!o&&["redirect","page"].includes(i))})},captchaToggle(){var e=C.find(".wpforms-field-recaptcha"),i=y("#wpforms-panel-field-settings-recaptcha"),o=i.data("provider")||"recaptcha";e.length&&(i.is(":checked")?e.show().toggleClass("is-recaptcha","recaptcha"===o):e.hide())},initConfirmationsType(){y(".wpforms-panel-field-confirmations-type").each(function(){F.confirmationFieldsToggle(y(this))})},initElementsTinyMCE(e,t={}){if("undefined"!=typeof tinymce&&void 0!==wp.editor){let i={...w.tinymceDefaults,...t},o=i.tinymce.setup;i.tinymce.toolbar1.includes("wpf_insert_smart_tag")||(i.tinymce.toolbar1+=",wpf_insert_smart_tag"),i.tinymce.setup=function(e){o?.call(this,e),e.addButton("wpf_insert_smart_tag",{text:"",tooltip:wpforms_builder.smart_tags_dropdown_title,icon:!1,image:wpforms_builder.smart_tags_dropdown_mce_icon,classes:"wpforms-smart-tags-mce-button"})},e.each(function(){var e=y(this).attr("id");wp.editor.remove(e),wp.editor.initialize(e,i)})}},confirmationsSetup(){F.initConfirmationsType(),F.initElementsTinyMCE(y(".wpforms-panel-field-confirmations-message")),C.on("focusout",".wpforms-panel-field-confirmations-redirect",function(){let e=y(this);var i=e.val().trim();e.val(i),wpf.isURL(i)||""===i||F.confirmationRedirectValidationError(function(){e.trigger("focus")})}),C.on("wpformsBeforeSave wpformsPanelSectionSwitch wpformsPanelSwitch",function(t){y(".wpforms-confirmation").each(function(e,i){i=y(i);let o=i.find(".wpforms-panel-field-confirmations-redirect");if(!o.is(":hidden")){i=i.find(".wpforms-panel-field-confirmations-type");if(!("redirect"!==i.val()||0<o.val().trim().length))return F.confirmationRedirectValidationError(function(){o.trigger("focus")}),t.stopImmediatePropagation(),t.preventDefault(),!1}})})},confirmationRedirectValidationError(e){y.confirm({title:wpforms_builder.heads_up,content:wpforms_builder.redirect_url_field_error,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}},onDestroy:e})},confirmationFieldsToggle(e){var i,o;e.length&&(F.UndoRedo?.preventRecord(!0),i=e.val(),(o=e.closest(".wpforms-builder-settings-block-content")).find(".wpforms-panel-field").not(e.parent()).not(".wpforms-conditionals-enable-toggle").hide(),o.find(".wpforms-panel-field-confirmations-"+i).closest(".wpforms-panel-field").show(),"message"===i&&(o.find(".wpforms-panel-field-confirmations-message_scroll").closest(".wpforms-panel-field").show(),o.find(".wpforms-panel-field-confirmations-message_entry_preview").trigger("change").closest(".wpforms-panel-field").show(),o.find(".wpforms-panel-field-confirmations-message_order_summary").closest(".wpforms-panel-field").toggle(0!==y("#wpforms-panel-fields .wpforms-field-payment-total").length)),"page"===i&&o.find(".wpforms-panel-field-confirmations-page-url-parameters").closest(".wpforms-panel-field").show(),y("#wpforms-panel-field-settings-ajax_submit").is(":checked")&&o.find(".wpforms-panel-field-confirmations-redirect_new_tab").closest(".wpforms-panel-field").toggle(["redirect","page"].includes(i)),F.UndoRedo?.preventRecord("continue"))},confirmationEntryPreviewToggle(){var e=y(this),i=e.closest(".wpforms-builder-settings-block-content").find(".wpforms-panel-field-confirmations-message_entry_preview_style").parent();e.is(":checked")?i.show():i.hide()},notificationToggle(){var e=y("#wpforms-panel-field-settings-notification_enable"),i=e.closest(".wpforms-panel-content-section").find(".wpforms-builder-settings-block"),e=e.is(":checked");y(".wpforms-notifications-add").toggleClass("wpforms-hidden",!e),C.trigger("wpformsNotificationsToggle",[e]),e?i.show():i.hide()},notificationsByStatusAlerts(){C.on("change",".wpforms-panel-content-section-notifications .wpforms-notification-by-status-alert",function(){var i=y(this);if(i.prop("checked")){var o=y(".wpforms-radio-group-"+i.attr("data-radio-group")+":checked:not(#"+i.attr("id")+")");let e;e=(e=0===o.length?wpforms_builder.notification_by_status_enable_alert:(e=wpforms_builder.notification_by_status_switch_alert).replace(/%2\$s/g,o.data("provider-title"))).replace(/%1\$s/g,i.data("provider-title")),y.confirm({title:wpforms_builder.heads_up,content:e,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm"}}})}})},settingsBlockAdd(p){let f=Number(p.attr("data-next-id")),c=p.closest(".wpforms-panel-content-section").data("panel"),m=p.data("block-type"),e=p.data("default-name")??"",i=wpforms_builder[m+"_prompt"],o=`<input autofocus="" type="text" id="settings-block-name" placeholder="${wpforms_builder[m+"_ph"]}" value="${e}">`,t='<p class="error">'+wpforms_builder[m+"_error"]+"</p>",r=i+o+t,s=y.confirm({container:C,title:!1,content:r,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){var e=this.$content.find("input#settings-block-name").val().toString().trim(),i=this.$content.find(".error");if(""===e)return i.show(),!1;var i=p.closest(".wpforms-panel-content-section"),o=i.find(".wpforms-builder-settings-block").first(),t=(wpf.restoreTooltips(o),"#wpforms-"+m+"-template-block"),t=y(t);let r,s;if(C.trigger("wpformsBeforeSettingsBlockAdd",[i,s]),F.UndoRedo?.preventRecord(!0),t.length){let e=t.text();e=e.replace(/{CLONE}/g,f).replace(/CLONE/g,f),r=y(e),s=f}else r=o.clone(),s=o.data("block-id");let l;r.attr("data-block-id",f),r.find(".wpforms-builder-settings-block-name-holder span").text(e);t=r.attr("id")??`wpforms-builder-settings-block-${s}-`+m;r.attr("id",t);r.find("input, textarea, select").each(function(){var e=y(this),i=e.parent();e.hasClass("wpforms-disabled")&&(i.hasClass("from-name")||i.hasClass("from-email"))||i.hasClass("wpforms-pdf-file-name")||(i=e).attr("name")&&(i.val("").attr("name",i.attr("name").replace(/\[(\d+)]/,"["+f+"]")),i.is("select")?(i.find("option").prop("selected",!1).attr("selected",!1),i.find("option").first().prop("selected",!0).attr("selected","selected")):"checkbox"===i.attr("type")?(e=i.closest(".wpforms-panel-field").hasClass("js-wpforms-enabled-notification"),i.prop("checked",e).attr("checked",e).val("1")):i.val("").attr("value",""))});let n="wpforms-panel-field-"+c+"-",a=n+s,d=(r.find('[id^="'+a+'"], [for^="'+a+'"]').each(function(){var e=y(this),i="LABEL"===e.prop("tagName")?"for":"id",o=e.attr(i).replace(new RegExp(a,"g"),n+f);e.attr(i,o)}),s+"-notification-by-status");r.find('[data-radio-group="'+d+'"]').each(function(){y(this).removeClass("wpforms-radio-group-"+d).addClass("wpforms-radio-group-"+f+"-notification-by-status").attr("data-radio-group",f+"-notification-by-status")}),r.find(".wpforms-builder-settings-block-name-holder input").val(e).attr("value",e),"notification"===m&&(r.find(".email-msg textarea").val("{all_fields}").text("{all_fields}").attr("value","{all_fields}"),r.find(".email-recipient input").val("{admin_email}").attr("value","{admin_email}")),r.removeClass("wpforms-builder-settings-block-default"),"confirmation"===m&&(r.find(".wpforms-panel-field-tinymce").remove(),"undefined"!=typeof WPForms)&&r.find(".wpforms-panel-field-confirmations-type-wrap").after(WPForms.Admin.Builder.Templates.get("wpforms-builder-confirmations-message-field")({id:f}));t=r.find(".wpforms-conditional-block"),t.length&&"undefined"!=typeof WPForms&&t.html(WPForms.Admin.Builder.Templates.get("wpforms-builder-conditional-logic-toggle-field")({id:f,type:m,actions:JSON.stringify(r.find(".wpforms-panel-field-conditional_logic-checkbox").data("actions")),actionDesc:r.find(".wpforms-panel-field-conditional_logic-checkbox").data("action-desc"),reference:r.find(".wpforms-panel-field-conditional_logic-checkbox").data("reference")})),e=r.find(".wpforms-field-map-table"),e.length&&e.each(function(e,i){var i=y(i),o=(i.find("tr:not(:first-child)").remove(),i.find(".key input")),i=i.find(".field select"),t=i.data("name");o.attr("value",""),i.attr("name","").attr("data-name",t.replace(/\[(\d+)]/,"["+f+"]"))}),l=(l=r.wrap("<div>").parent().html()).replace(/\[conditionals]\[(\d+)]\[(\d+)]/g,"[conditionals][0][0]"),0===o.length?i.append(l):o.before(l),t=0===o.length?p.closest(".wpforms-panel-content-section").find(".wpforms-builder-settings-block").first():o.prev();"confirmation"===m&&(F.prepareChoicesJSField(t,f),F.confirmationFieldsToggle(y(".wpforms-panel-field-confirmations-type").first())),"undefined"!=typeof tinymce&&void 0!==wp.editor&&"confirmation"===m&&wp.editor.initialize("wpforms-panel-field-confirmations-message-"+f,w.tinymceDefaults),wpf.initTooltips(),F.UndoRedo?.preventRecord("continue"),C.trigger("wpformsSettingsBlockAdded",[t]),p.attr("data-next-id",f+1)}},cancel:{text:wpforms_builder.cancel}}});C.on("keypress","#settings-block-name",function(e){13===e.keyCode&&y(s.buttons.confirm.el).trigger("click")})},prepareChoicesJSField(e,i){var o,e=e.find(`#wpforms-panel-field-confirmations-${i}-page-wrap`);e.length<=0||(i=e.find(`#wpforms-panel-field-confirmations-${i}-page`)).length<=0&&!i.hasClass("choicesjs-select")||(o=e.find(".choices")).length<=0||((i=i.first()).removeAttr("data-choice"),i.removeAttr("hidden"),i.removeClass("choices__input"),y(i).appendTo(e.first()),o.first().remove(),F.dropdownField.events.choicesInit(i))},settingsBlockNameEditingShow(e){e=e.parents(".wpforms-builder-settings-block-name-holder");e.find(".wpforms-builder-settings-block-name").addClass("editing").hide(),e.find(".wpforms-builder-settings-block-name-edit").addClass("active"),wpf.focusCaretToEnd(e.find("input"))},settingsBlockNameEditingHide(e){var i=e.parents(".wpforms-builder-settings-block-header"),o=i.find(".wpforms-builder-settings-block-name"),i=i.find(".wpforms-builder-settings-block-name-edit");let t=i.find("input").val().trim();e=e.data("block-type")||e.closest(".wpforms-builder-settings-block").data("block-type");t.length||(t=wpforms_builder[e+"_def_name"]),i.find("input").val(t),o.text(t),o.removeClass("editing").show(),i.removeClass("active")},settingsBlockPanelClone(e){let i=e.closest(".wpforms-panel-content-section"),o=i.find(".wpforms-builder-settings-block-add"),t=e.closest(".wpforms-builder-settings-block"),r=t.find(".wpforms-builder-settings-block-content"),s=parseInt(o.attr("data-next-id"),10),l=t.data("block-type"),n=t.find(".wpforms-builder-settings-block-name").text().trim()+wpforms_builder[l+"_clone"],a=r.is(":hidden"),d=t.attr("id")??`wpforms-builder-settings-block-${s}-`+l,p=(t.attr("id",d),wpf.restoreTooltips(t),t.clone(!1,!0));F.settingsBlockUpdateState(a,s,l),p.data("block-id",s).attr("data-block-id",s),p.find(".wpforms-builder-settings-block-name-holder span").text(n),p.find(".wpforms-builder-settings-block-name-holder input").val(n),p.removeClass("wpforms-builder-settings-block-default"),o.attr("data-next-id",s+1),p.find("input, textarea, select").each(function(){var e=y(this);e.attr("name")&&e.attr("name",e.attr("name").replace(/\[(\d+)]/,"["+s+"]")),e.data("name")&&e.data("name",e.data("name").replace(/\[(\d+)]/,"["+s+"]")),e.attr("class")&&e.attr("class",e.attr("class").replace(/-(\d+)/,"-"+s)),e.attr("data-radio-group")&&e.attr("data-radio-group",e.attr("data-radio-group").replace(/(\d+)-/,s+"-"))}),p.find("*").each(function(){var e=y(this);e.attr("id")&&e.attr("id",e.attr("id").replace(/-(\d+)/,"-"+s)),e.attr("for")&&e.attr("for",e.attr("for").replace(/-(\d+)-/,"-"+s+"-")),e.data("input-name")&&e.data("input-name",e.data("input-name").replace(/\[(\d+)]/,"["+s+"]"))}),t.find("select").each(function(){var e=y(this).attr("name"),i=y(this).attr("name").replace(/\[(\d+)]/,"["+s+"]");p.find('select[name="'+i+'"]').val(y(this).attr("name",e).val())}),C.trigger("wpformsBeforeSettingsBlockClone",[t,t.data("block-id")]),p.css("display","none").insertBefore(t).show("fast",function(){wpf.initTooltips(),C.trigger("wpformsSettingsBlockCloned",[p,t.data("block-id")])})},settingsBlockPanelToggle(e,i=null){let o=e.closest(".wpforms-builder-settings-block"),t=o.data("block-id"),r=o.data("block-type"),s=o.find(".wpforms-builder-settings-block-content"),l=s.is(":visible"),n={duration:400,start(){F.settingsBlockUpdateState(l,t,r)},always(){s.is(":visible")?e.html('<i class="fa fa-chevron-circle-up"></i>'):e.html('<i class="fa fa-chevron-circle-down"></i>')}};s.stop(),!0===i?s.slideDown(n):!1===i?s.slideUp(n):s.slideToggle(n)},settingsBlockDelete(e){var i=e.closest(".wpforms-panel-content-section");if(!(i.find(".wpforms-builder-settings-block").length<2&&"pdf"!==e.parents(".wpforms-builder-settings-block").data("block-type"))){let i=e.closest(".wpforms-builder-settings-block"),o=i.data("block-type");y.confirm({title:!1,content:wpforms_builder[o+"_delete"],icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){var e=i.data("block-id");y.post(wpforms_builder.ajax_url,{action:"wpforms_builder_settings_block_state_remove",nonce:wpforms_builder.nonce,block_id:e,block_type:o,form_id:w.formID}),C.trigger("wpformsBeforeSettingsBlockDelete",[o,e]),i.remove(),C.trigger("wpformsSettingsBlockDeleted",[o,e])}},cancel:{text:wpforms_builder.cancel}}})}},settingsBlockUpdateState(e,i,o){y.post(wpforms_builder.ajax_url,{action:"wpforms_builder_settings_block_state_save",state:e?"closed":"opened",form_id:w.formID,block_id:i,block_type:o,nonce:wpforms_builder.nonce})},notificationsUpdateElementsVisibility(){console.warn('WARNING! Function "WPFormsBuilder.notificationsUpdateElementsVisibility()" has been deprecated.')},notificationUpdateStatus(e){var i=e.data("block-id"),i=y(`#wpforms-panel-field-notifications-${i}-enable`),e=e.find(".wpforms-builder-settings-block-status");F.UndoRedo?.preventRecord(!0),F.changeStatusButton(e,"0"!==i.val()),i.val()||i.val("1"),F.UndoRedo?.preventRecord("continue")},notificationChangeStatus(e){var i=e.closest(".wpforms-notification").data("block-id"),i=y(`#wpforms-panel-field-notifications-${i}-enable`),o=e.data("active");F.changeStatusButton(e,!o),i.val(o?"0":"1")},handleStatusButton(e){var i=e.data("connection-id"),o=e.data("active");F.changeStatusButton(e,!o),y("#wpforms-connection-status-"+i).val(o?"0":"1")},changeStatusButton(e,i){e.removeClass("wpforms-badge-green wpforms-badge-silver");var o=e.find(".fa"),t=e.find(".wpforms-status-label");o.removeClass("fa-check fa-times"),i?(e.addClass("wpforms-badge-green"),o.addClass("fa-check"),t.text(wpforms_builder.active),e.attr("title",wpforms_builder.deactivate)):(e.addClass("wpforms-badge-silver"),o.addClass("fa-times"),t.text(wpforms_builder.inactive),e.attr("title",wpforms_builder.activate)),e.data("active",i),C.trigger("WPFormsChangeStatusButton",[e,i])},bindUIActionsRevisions(){C.on("wpformsPanelSwitched",function(e,i){"revisions"===i&&(F.updateRevisionsList(),F.updateRevisionPreview())}),C.on("wpformsSaved",function(){"revisions"===wpf.getQueryString("view")&&F.updateRevisionsList()}),C.on("click",".wpforms-panel-content-revisions-link",function(e){e.preventDefault(),F.panelSwitch("revisions")})},updateRevisionsList(){let i=y(".wpforms-panel-revisions-button .badge-exclamation");if(i.length&&y.post(wpforms_builder.ajax_url,{action:"wpforms_mark_panel_viewed",form_id:w.formID,nonce:wpforms_builder.nonce}).done(function(e){e.success?i.remove():wpf.debug(e)}).fail(function(e,i){wpf.debug(e.responseText||i||"")}),C.hasClass("wpforms-revisions-enabled")){let o=y("#wpforms-panel-revisions .wpforms-revisions-content");o.fadeTo(250,.25,function(){y.post(wpforms_builder.ajax_url,{action:"wpforms_get_form_revisions",form_id:w.formID,revision_id:wpf.getQueryString("revision_id"),nonce:wpforms_builder.nonce}).done(function(e){e.success?o.replaceWith(e.data.html):wpf.debug(e)}).fail(function(e,i){wpf.debug(e.responseText||i||""),o.fadeTo(250,1)})})}},updateRevisionPreview(){var e=k.$formPreview.clone();e.find(".wpforms-field-duplicate, .wpforms-field-delete, .wpforms-field-helper, .wpforms-debug").remove().end(),e.find(".wpforms-field-wrap").removeClass("ui-sortable").addClass("ui-sortable-disabled"),e.find(".wpforms-field").removeClass("ui-sortable-handle ui-draggable ui-draggable-handle active").removeAttr("id data-field-id data-field-type").removeData(),e.find(".wpforms-field-submit-button").prop("disabled",!0),k.$revisionPreview.hasClass("has-preview")?k.$revisionPreview.find(".wpforms-preview-wrap").replaceWith(e):k.$revisionPreview.append(e).addClass("has-preview")},confirmSaveRevision(){y.confirm({title:wpforms_builder.heads_up,content:wpforms_builder.revision_update_confirm,icon:"fa fa-exclamation-circle",type:"orange",closeIcon:!1,buttons:{confirm:{text:wpforms_builder.save,btnClass:"btn-confirm",keys:["enter"],action(){C.addClass("wpforms-revision-is-saving"),WPFormsBuilder.formSave(!1).done(F.revisionSavedReload)}},cancel:{text:wpforms_builder.cancel,action(){WPFormsBuilder.setCloseConfirmation(!0)}}}})},revisionSavedReload(){wpf.updateQueryString("view",wpf.getQueryString("view")),wpf.removeQueryParam("revision_id"),n.location.reload()},bindUIActionsSaveExit(){C.on("click","#wpforms-embed",function(e){e.preventDefault(),y(this).hasClass("wpforms-disabled")||y(this).hasClass("wpforms-btn-light-grey-disabled")||WPFormsFormEmbedWizard.openPopup()}),C.on("click","#wpforms-save",function(e){e.preventDefault(),F.formSave(!1)}),C.on("click","#wpforms-exit",function(e){e.preventDefault(),F.formExit()}),C.on("wpformsSaved",function(){wpf.removeQueryParam("newform")})},formSave(s){if(C.hasClass("wpforms-is-revision")&&!C.hasClass("wpforms-revision-is-saving"))F.confirmSaveRevision();else{"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var l=WPFormsUtils.triggerEvent(C,"wpformsBeforeSave");if(!l.isDefaultPrevented()){let e=k.$saveButton,i=e.find("i.fa-check"),o=e.find("i.wpforms-loading-spinner"),t=e.find("span"),r=t.text();t.text(wpforms_builder.saving),e.prop("disabled",!0),i.addClass("wpforms-hidden"),o.removeClass("wpforms-hidden");l={action:"wpforms_save_form",data:JSON.stringify(F.serializeAllData(y("#wpforms-builder-form"))),id:w.formID,nonce:wpforms_builder.nonce};return y.post(wpforms_builder.ajax_url,l,function(e){e.success?(wpf.initialSave=!1,setTimeout(()=>{wpf._updateFormState(),C.trigger("wpformsSaved",e.data),!0===s&&(F.isBuilderInPopup()?F.builderInPopupClose("saved"):n.location.href=wpforms_builder.exit_url)},0)):(wpf.debug(e),F.formSaveError(e.data))}).fail(function(e){wpf.debug(e);let i="";403===e.status&&(i=wpforms_builder.error_save_form_forbidden),F.formSaveError(i)}).always(function(){t.text(r),e.prop("disabled",!1),o.addClass("wpforms-hidden"),i.removeClass("wpforms-hidden")})}}},serializeAllData(e){let o=e.serializeArray();return e.find(".wpforms-field-option-layout .wpforms-field-option-row-label_hide input[type=checkbox]").each(function(){var e=y(this),i=e.attr("name"),e=e.is(":checked")?"1":"";e||o.push({name:i,value:e})}),o},formSaveError(e=""){wpf.empty(e)&&(e=wpforms_builder.error_save_form),y.confirm({title:wpforms_builder.heads_up,content:"<p>"+e+"</p><p>"+wpforms_builder.error_contact_support+"</p>",icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})},formExit(){F.isBuilderInPopup()&&F.formIsSaved()?F.builderInPopupClose("saved"):F.formIsSaved()?n.location.href=wpforms_builder.exit_url:y.confirm({title:!1,content:wpforms_builder.exit_confirm,icon:"fa fa-exclamation-circle",type:"orange",closeIcon:!0,buttons:{confirm:{text:wpforms_builder.save_exit,btnClass:"btn-confirm",keys:["enter"],action(){F.formSave(!0)}},cancel:{text:wpforms_builder.exit,action(){i=!1,F.isBuilderInPopup()?F.builderInPopupClose("canceled"):n.location.href=wpforms_builder.exit_url}}}})},setCloseConfirmation(e){i=!!e},formIsSaved(){if("object"==typeof wpf.savedFormState&&0!==Object.keys(wpf.savedFormState).length){var e,i,o=wpf.isDebug(),t={},r=wpf._getCurrentFormState();for(e in r)if(r[e]!==wpf.savedFormState[e]){if(!o)return!1;t[e]={old:wpf.savedFormState[e],new:r[e]}}for(i in wpf.savedFormState)if(!(i in r)){if(!o)return!1;t[i]={old:wpf.savedFormState[i],new:void 0}}if(!Object.keys(t).length)return!0;wpf.debug("Form state differences:",t)}return!1},isBuilderInPopup(){return n.self!==n.parent&&"wpforms-builder-iframe"===n.self.frameElement.id},builderInPopupClose(e){var i=n.parent.jQuery(".wpforms-builder-popup"),o=y(".wpforms-center-form-name").text();i.find("#wpforms-builder-iframe").attr("src","about:blank"),i.fadeOut(),i.trigger("wpformsBuilderInPopupClose",[e,w.formID,o])},bindUIActionsGeneral(){C.on("click",".toggle-smart-tag-display",F.smartTagToggle),C.on("click",".smart-tags-list-display a",F.smartTagInsert),C.on("click",".wpforms-panel-fields-group.unfoldable .wpforms-panel-fields-group-title",F.toggleUnfoldableGroup),C.on("click",".wpforms-field-helper-hide ",F.hideFieldHelper),C.on("input",".wpforms-money-input",function(){var e=y(this),i=e.val(),o=e[0].selectionStart,t=e[0].selectionEnd;e.val(i.replace(/[^0-9.,]/g,"")),e[0].setSelectionRange(o,t)}),C.on("focusout",".wpforms-money-input",function(){var e=y(this),i=e.val();if(!i)return i;i=wpf.amountSanitize(i),i=wpf.amountFormat(i);e.val(i)}),C.on("change",".wpforms-panel-field-toggle",function(){var e=y(this);e.prop("disabled")||(e.prop("disabled",!0),F.toggleOptionsGroup(e))}),C.on("click",".wpforms-image-upload-add",function(e){e.preventDefault();let o=y(this),t=o.parent(),r=wpf.initMediaLibrary({title:wpforms_builder.upload_image_title,extensions:wpforms_builder.upload_image_extensions,extensionsError:wpforms_builder.upload_image_extensions_error,buttonText:wpforms_builder.upload_image_button});r.on("select",function(){var e=r.state().get("selection").first().toJSON(),i=t.find(".preview");t.find(".source").val(e.url),i.empty(),i.prepend('<img src="'+e.url+'" alt=""><a href="#" title="'+wpforms_builder.upload_image_remove+'" class="wpforms-image-upload-remove"><i class="fa fa-trash-o"></i></a>'),"hide"===o.data("after-upload")&&o.hide(),C.trigger("wpformsImageUploadAdd",[o,t])}).on("close",function(){r.off("library:selection:add")}),r.open()}),C.on("click",".wpforms-image-upload-remove",function(e){e.preventDefault();e=y(this).parent().parent();e.find(".preview").empty(),e.find(".wpforms-image-upload-add").show(),e.find(".source").val(""),C.trigger("wpformsImageUploadRemove",[y(this),e])}),C.on("blur",'.wpforms-notification .wpforms-panel-field-text input:not([type="search"])',function(){F.validateEmailSmartTags(y(this))}),C.on("blur",".wpforms-notification .wpforms-panel-field-textarea textarea",function(){F.validateEmailSmartTags(y(this))}),C.on("focusout",'.wpforms-notification .wpforms-panel-field.js-wpforms-from-email-validation input:not([type="search"])',F.validateFromEmail),C.on("wpformsPanelSectionSwitch",F.notificationsPanelSectionSwitch),C.on("click","#wpforms-builder-mobile-notice .wpforms-fullscreen-notice-button-primary, #wpforms-builder-mobile-notice .close",function(){n.location.href=wpforms_builder.exit_url}),C.on("click","#wpforms-builder-mobile-notice .wpforms-fullscreen-notice-button-secondary",function(){n.location.href=wpf.updateQueryString("force_desktop_view",1,n.location.href)}),y("#wpforms-builder-license-alert .close").on("click",function(){n.location.href=wpforms_builder.exit_url}),y("#wpforms-builder-license-alert .dismiss").on("click",function(e){e.preventDefault(),y("#wpforms-builder-license-alert").remove(),wpCookies.set("wpforms-builder-license-alert","true",3600)}),C.on("change","#wpforms-panel-field-settings-akismet.wpforms-akismet-disabled",function(){let e=y(this),i=e.data("akismet-status");e.prop("checked")&&y.alert({title:wpforms_builder.heads_up,content:wpforms_builder[i],icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}},onClose(){e.prop("checked",!1)}})}),C.on("wpformsPanelSectionSwitch wpformsPanelSwitched",function(){wpf.reInitShowMoreChoices(y("#wpforms-panel-providers, #wpforms-panel-settings"))})},notificationsPanelSectionSwitch(e,i){"notifications"===i&&y(".wpforms-notification .wpforms-panel-field.js-wpforms-from-email-validation input").trigger("focusout")},isPaymentsEnabled(){let e=!1;return y(F.getPaymentsTogglesSelector()).each(function(){if(y(this).prop("checked"))return!(e=!0)}),e},getPaymentsTogglesSelector(){return`.wpforms-panel-content-section-payment-toggle-one-time input,
			.wpforms-panel-content-section-payment-toggle-recurring input,
			#wpforms-panel-field-stripe-enable,
			#wpforms-panel-field-paypal_standard-enable,
			#wpforms-panel-field-authorize_net-enable,
			#wpforms-panel-field-square-enable`},toggleOptionsGroup(e){var i=e.attr("name");function o(){e.prop("disabled",!1)}let t="",r=y('.wpforms-panel-field-toggle-body[data-toggle="'+i+'"]');F.toggleProviderActiveIcon(e),0===r.length?o():(i=e.attr("type"),t="checkbox"!==i&&"radio"!==i||e.prop("checked")?e.val():"0",r.each(function(){var e=y(this);e.attr("data-toggle-value").toString()===t.toString()?e.slideDown(150,o):e.slideUp(150,o)}))},toggleProviderActiveIcon(e){var o=e.closest(".wpforms-panel-content-section").data("provider"),t=["wpforms-panel-field-"+o+"-enable-wrap","wpforms-panel-field-"+o+"-enable_one_time-wrap","wpforms-panel-field-"+o+"-enable_recurring-wrap"];if(o&&t.includes(e.attr("id"))){let i=!1;t.forEach(e=>{e=y("#"+e);e.length&&e.find("input").is(":checked")&&(i=!0)}),y(`.wpforms-panel-sidebar-section[data-section=${o}]`).find(".fa-check-circle-o").toggleClass("wpforms-hidden",!i)}},toggleAllOptionGroups(e=null){(e=e||C||y("#wpforms-builder")||y("body"))&&e.find(".wpforms-panel-field-toggle").each(function(){var e=y(this);e.prop("disabled",!0),F.toggleOptionsGroup(e)})},toggleUnfoldableGroup(e){e.preventDefault();let i=y(e.target),o=i.closest(".wpforms-panel-fields-group"),t=o.find(".wpforms-panel-fields-group-inner"),r="wpforms_fields_group_"+o.data("group");o.hasClass("opened")?(wpCookies.remove(r),t.stop().slideUp(150,function(){o.removeClass("opened")})):(wpCookies.set(r,"true",2592e3),o.addClass("opened"),t.stop().slideDown(150))},hideFieldHelper(e){e.preventDefault(),e.stopPropagation();e=y(".wpforms-field-helper");wpCookies.set("wpforms_field_helper_hide","true",2592e3),e.hide()},smartTagToggle(e){console.warn('WARNING! Function "WPFormsBuilder.smartTagToggle()" has been deprecated.'),e.preventDefault(),k.$focusOutTarget=null;var e=y(this),i=e.closest(".wpforms-panel-field,.wpforms-field-option-row");i.hasClass("smart-tags-toggling")||(i.addClass("smart-tags-toggling"),e.hasClass("smart-tag-showing")?F.removeSmartTagsList(e):F.insertSmartTagsList(e))},removeSmartTagsList(e){console.warn('WARNING! Function "WPFormsBuilder.removeSmartTagsList()" has been deprecated.');let i=e.closest(".wpforms-panel-field,.wpforms-field-option-row"),o=i.find(".smart-tags-list-display");e.find("span").text(wpforms_builder.smart_tags_show),o.slideUp("",function(){o.remove(),e.removeClass("smart-tag-showing"),i.removeClass("smart-tags-toggling")})},insertSmartTagsList(e){console.warn('WARNING! Function "WPFormsBuilder.insertSmartTagsList()" has been deprecated.');let i=e.closest(".wpforms-panel-field,.wpforms-field-option-row"),o=e.closest("label"),t=!0;o.length||(o=i.find("label"),t=!1);var r=F.getSmartTagsList(e,-1!==o.attr("for").indexOf("wpforms-field-option-"));(t?o:e).after(r),e.find("span").text(wpforms_builder.smart_tags_hide),i.find(".smart-tags-list-display").slideDown("",function(){e.addClass("smart-tag-showing"),i.removeClass("smart-tags-toggling")})},getSmartTagsList(e,i){var o;return console.warn('WARNING! Function "WPFormsBuilder.getSmartTagsList()" has been deprecated.'),o='<ul class="smart-tags-list-display unfoldable-cont">',(o+=F.getSmartTagsListFieldsElements(e))+F.getSmartTagsListOtherElements(e,i)+"</ul>"},getSmartTagsListFieldsElements(e){console.warn('WARNING! Function "WPFormsBuilder.getSmartTagsListFieldsElements()" has been deprecated.');var i=e.data("type");if(!["fields","all"].includes(i))return"";var o,t=F.getSmartTagsFields(e);if(!t)return'<li class="heading">'+wpforms_builder.fields_unavailable+"</li>";let r="";for(o in r+='<li class="heading">'+wpforms_builder.fields_available+"</li>",t)r+=F.getSmartTagsListFieldsElement(t[o]);return r},getSmartTagsFields(e){console.warn('WARNING! Function "WPFormsBuilder.getSmartTagsFields()" has been deprecated.');var i=e.data("fields"),e=e.data("allow-repeated-fields"),i=i?i.split(","):void 0;return wpf.getFields(i,!0,e)},getSmartTagsListFieldsElement(o){console.warn('WARNING! Function "WPFormsBuilder.getSmartTagsListFieldsElement()" has been deprecated.');let t=o.label?wpf.encodeHTMLEntities(wpf.sanitizeHTML(o.label)):wpforms_builder.field+" #"+o.id,r=`<li><a href="#" data-type="field" data-meta="${o.id}">${t}</a></li>`;var e=o.additional||[];return 1<e.length&&e.forEach(e=>{var i=e.charAt(0).toUpperCase()+e.slice(1).replace(/(\D)(\d)/g,"$1 $2");r+=`<li><a href="#" data-type="field" data-meta="${o.id}" data-additional='${e}'>${t}  ${i}</a></li>`}),r},getSmartTagsListOtherElements(e,i){console.warn('WARNING! Function "WPFormsBuilder.getSmartTagsListOtherElements()" has been deprecated.');var o,t=e.data("type");let r;if("other"!==t&&"all"!==t)return"";for(o in r='<li class="heading">'+wpforms_builder.other+"</li>",wpforms_builder.smart_tags)i&&wpforms_builder.smart_tags_disabled_for_fields.includes(o)||"confirmations"===e.data("location")&&wpforms_builder.smart_tags_disabled_for_confirmations.includes(o)||(r+='<li><a href="#" data-type="other" data-meta=\''+o+"'>"+wpforms_builder.smart_tags[o]+"</a></li>");return r},smartTagInsert(e){console.warn('WARNING! Function "WPFormsBuilder.smartTagInsert()" has been deprecated.'),e.preventDefault();let i=y(this),o=i.closest(".smart-tags-list-display"),t=o.closest(".wpforms-panel-field,.wpforms-field-option-row"),r=t.find(".toggle-smart-tag-display"),s=t.find("input[type=text], textarea"),l=i.data("meta"),n=i.data("additional")?"|"+i.data("additional"):"",a=i.data("type"),d="field"===a?'{field_id="'+l+n+'"}':"{"+l+"}",p;"undefined"!=typeof tinyMCE&&(p=tinyMCE.get(s.prop("id")))&&!p.hasFocus()&&p.focus(!0),p&&!p.isHidden()?p.insertContent(d):(s.insertAtCaret(" "+d+" "),s.val(s.val().trim().replace("  "," ")),s.trigger("focus").trigger("input")),o.slideUp("",function(){o.remove()}),r.find("span").text(wpforms_builder.smart_tags_show),t.find(".toggle-smart-tag-display").removeClass("smart-tag-showing")},validateEmailSmartTags(e){console.warn('WARNING! Function "WPFormsBuilder.validateEmailSmartTags()" has been deprecated.');let i=e.val();i&&(i=i.replace(/{(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))}/g,function(e){return e.slice(1,-1)}),e.val(i))},getEmailFieldSmartTagError(e){var i=/\{field_id="(\d+)"}/g;if(!i.test(e))return null;i.lastIndex=0;i=i.exec(e),e=i?i[1]:null,i=wpf.getField(e);return i&&"email"===i.type?"":wpforms_builder.allow_only_email_fields},validateFromEmail(){var e,i,o;wpf.isRepeatedCall("validateFromEmail")||(e=(i=y(this)).val(),i.data("value")!==e&&(i.data("value",e),i=i.parent(),o="wpforms-panel-field-warning",/[\s,;]/g.test(e.trim())?(i.addClass(o),F.printNotice(wpforms_builder.allow_only_one_email,i)):F.shouldCallAjaxValidation(e,i,o)&&F.ajaxValidation(e,i,o)))},shouldCallAjaxValidation(e,i,o){let t="",r=!0;return""===(t=""===e?wpforms_builder.empty_email_address:"")&&(t=F.getEmailFieldSmartTagError(e),r=null===t),t?(i.addClass(o),F.printNotice(t,i,""===e),!1):!!r||(i.removeClass(o),F.removeNotice(i),!1)},ajaxValidation(e,i,o){e={form_id:w.formID,email:e,nonce:wpforms_builder.nonce,action:"wpforms_builder_notification_from_email_validate"};y.post(wpforms_builder.ajax_url,e,function(e){F.removeNotice(i),e.success?i.removeClass(o):(i.addClass(o),i.append(e.data))}).fail(function(e){console.log(e.responseText)})},disabledFields:{init(){F.disabledFields.initCouponsChoicesJS(),F.disabledFields.initFileUploadChoicesJS()},initCouponsChoicesJS(){"function"!=typeof n.Choices||WPForms.Admin.Builder.Coupons||y(".wpforms-field-option-row-allowed_coupons select:not(.choices__input)").each(function(){F.UndoRedo?.preventRecord(!0);var e=y(this),i=new Choices(e.get(0),{shouldSort:!1,removeItemButton:!0,renderChoicesLimit:5,callbackOnInit(){wpf.showMoreButtonForChoices(this.containerOuter.element),F.UndoRedo?.preventRecord("continue")}});e.data("choicesjs",i)})},initFileUploadChoicesJS(){"function"!=typeof n.Choices||WPForms.Admin.Builder.FieldFileUpload||y(".wpforms-file-upload-user-roles-select, .wpforms-file-upload-user-names-select").each(function(){F.UndoRedo?.preventRecord(!0),new Choices(y(this)[0],{removeItemButton:!0,callbackOnInit(){F.UndoRedo?.preventRecord("continue")}})})}},iconChoices:{cache:{},config:{colorPropertyName:"--wpforms-icon-choices-color"},init(){F.iconChoices.extendJqueryConfirm(),C.on("wpformsBuilderReady",function(e){wpforms_builder.icon_choices.is_active&&!wpforms_builder.icon_choices.is_installed&&(F.iconChoices.openInstallPromptModal(!0),e.preventDefault())}),C.on("change",".wpforms-field-option-row-choices_icons input",F.iconChoices.toggleIconChoices),C.on("change",".wpforms-field-option-row-choices_icons_color .wpforms-color-picker",F.iconChoices.changeIconsColor),C.on("change",".wpforms-field-option-row-choices_icons_style select, .wpforms-field-option-row-choices_icons_size select",function(){var e=y(this).parent().data("field-id"),i=y("#wpforms-field-option-"+e).find(".wpforms-field-option-hidden-type").val();F.fieldChoiceUpdate(i,e)}),C.on("click",".wpforms-field-option-row-choices .choices-list .wpforms-icon-select",F.iconChoices.openIconPickerModal)},toggleIconChoices(){var e,i,o,t=y(this),r=t.is(":checked");r&&!wpforms_builder.icon_choices.is_installed?(F.iconChoices.cache.toggle=t,F.iconChoices.openInstallPromptModal()):(t=t.closest(".wpforms-field-option-row").data("field-id"),o=(e=y("#wpforms-field-option-"+t)).find(`#wpforms-field-option-${t}-choices_images`),i=e.find(`#wpforms-field-option-row-${t}-choices ul`),r&&o.is(":checked")&&o.prop("checked",!1).trigger("change"),e.find(`#wpforms-field-option-row-${t}-dynamic_choices`).toggleClass("wpforms-hidden",r),e.find(`#wpforms-field-option-row-${t}-choices_icons_color`).toggleClass("wpforms-hidden"),e.find(`#wpforms-field-option-row-${t}-choices_icons_size`).toggleClass("wpforms-hidden"),e.find(`#wpforms-field-option-row-${t}-choices_icons_style`).toggleClass("wpforms-hidden"),o=e.find(`#wpforms-field-option-${t}-choices_icons_color`),o=_.isEmpty(o.val())?wpforms_builder.icon_choices.default_color:o.val(),i.prop("style",F.iconChoices.config.colorPropertyName+`: ${o};`),i.toggleClass("show-icons",r),e.find(`#wpforms-field-option-${t}-input_columns`).val(r?"inline":"").trigger("change"),y(`#wpforms-field-option-row-${t}-choices_icons_hide`).toggleClass("wpforms-hidden",!r),F.fieldChoiceUpdate(e.find(".wpforms-field-option-hidden-type").val(),t))},changeIconsColor(){var e=y(this),i=e.parents(".wpforms-field-option-row").data("field-id"),o=y("#wpforms-field-option-"+i),t=o.find(".wpforms-field-option-hidden-type").val(),o=o.find(".wpforms-field-option-row-choices .choices-list"),e=F.getValidColorPickerValue(e);o.prop("style",F.iconChoices.config.colorPropertyName+`: ${e};`),F.fieldChoiceUpdate(t,i)},openInstallPromptModal(e=!1){var i=e?wpforms_builder.icon_choices.strings.reinstall_prompt_content:wpforms_builder.icon_choices.strings.install_prompt_content,i=y.confirm({title:wpforms_builder.heads_up,content:i,icon:"fa fa-info-circle",type:"orange",buttons:{continue:{text:wpforms_builder.continue,btnClass:"btn-confirm",keys:["enter"],action(){return this.setIcon("fa fa-cloud-download"),this.setTitle(wpforms_builder.icon_choices.strings.install_title),this.setContent(wpforms_builder.icon_choices.strings.install_content),y.each(this.buttons,function(e,i){i.hide()}),F.iconChoices.installIconLibrary(),!1}}},onOpen(){!e&&F.iconChoices.cache.toggle&&F.iconChoices.cache.toggle.prop("checked",!1),F.iconChoices.cache.previousModal=this}});e||(i.buttons.cancel={text:wpforms_builder.cancel,keys:["esc"],action(){F.iconChoices.cache.toggle.prop("checked",!1)}})},installIconLibrary(){var e={_wp_http_referer:wpf.updateQueryString("_wp_http_referer",null),nonce:wpforms_builder.nonce,action:"wpforms_icon_choices_install"};y.ajaxSetup({type:"POST",timeout:12e4}),y.post(wpforms_builder.ajax_url,e,function(e){e.success?F.iconChoices.openInstallSuccessModal():F.iconChoices.openInstallErrorModal(e)}).fail(function(e){F.iconChoices.openInstallErrorModal(e)})},openInstallSuccessModal(){y.confirm({title:wpforms_builder.done,content:wpforms_builder.icon_choices.strings.install_success_content,icon:"fa fa-check-circle",type:"green",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){var e;F.iconChoices.cache.toggle&&(F.iconChoices.cache.toggle.prop("checked",!0),e=F.iconChoices.cache.toggle.parents(".wpforms-field-option-row").data("field-id"),(e=C.find(`#wpforms-field-option-${e}-choices_images`)).is(":checked"))&&e.prop("checked",!1),wpforms_builder.exit_url=n.location.href,F.formSave(!0)}}},onOpen(){var e;F.iconChoices.cache.toggle&&(e=F.iconChoices.cache.toggle.parents(".wpforms-field-option-row-choices_icons").data("field-id"),C.find(`#wpforms-field-option-${e}-input_columns`).val("inline")),F.iconChoices.cache.previousModal.close()}})},openInstallErrorModal(e){y.confirm({title:wpforms_builder.uh_oh,content:wpforms_builder.icon_choices.strings.install_error_content,icon:"fa fa-exclamation-circle",type:"red",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action(){F.iconChoices.cache.toggle?F.iconChoices.cache.toggle.prop("checked",!1):F.formSaveError()}}},onOpen(){wpf.debug(e),F.iconChoices.cache.previousModal.close()},onDestroy(){delete F.iconChoices.cache.previousModal,delete F.iconChoices.cache.toggle}})},extendJqueryConfirm(){n.Jconfirm.prototype._updateContentMaxHeight=function(){var e=y(n).height()-(this.$jconfirmBox.outerHeight()-this.$contentPane.outerHeight())-(this.offsetTop+this.offsetBottom),i=this.contentMaxHeight||e;this.$contentPane.css({"max-height":Math.min(i,e)+"px"})}},openIconPickerModal(){var e=y(this);let i={fieldId:e.parents(".wpforms-field-option-row").data("field-id"),choiceId:e.parent().data("key"),selectedIcon:e.find(".source-icon").val(),selectedIconStyle:e.find(".source-icon-style").val()};var e=`
					${wpforms_builder.icon_choices.strings.icon_picker_title}
					<span class="wpforms-icon-picker-description">${wpforms_builder.icon_choices.strings.icon_picker_description}</span>
					<input type="text" placeholder="${wpforms_builder.icon_choices.strings.icon_picker_search_placeholder}" class="search" id="wpforms-icon-picker-search">
				`,o=`
					<div class="wpforms-icon-picker-container" id="wpforms-icon-picker-icons">
						<ul class="wpforms-icon-picker-icons" data-field-id="${i.fieldId}" data-choice-id="${i.choiceId}"></ul>
						<ul class="wpforms-icon-picker-pagination"></ul>
						<p class="wpforms-icon-picker-not-found wpforms-hidden" data-message="${wpforms_builder.icon_choices.strings.icon_picker_not_found}"></>
					</div>`;y.confirm({title:e,titleClass:"wpforms-icon-picker-title",content:o,icon:!1,closeIcon:!0,type:"orange",backgroundDismiss:!0,boxWidth:800,contentMaxHeight:368,smoothContent:!1,buttons:!1,onOpenBefore(){this.$body.addClass("wpforms-icon-picker-jconfirm-box"),this.$contentPane.addClass("wpforms-icon-picker-jconfirm-content-pane")},onContentReady(){let e=this;F.iconChoices.initIconsList(i),e.$title.find(".search").focus(),e.$content.find(".wpforms-icon-picker-icons").on("click","li",function(){F.iconChoices.selectIcon(e,y(this))})}})},initIconsList(o){var e={valueNames:["name"],listClass:"wpforms-icon-picker-icons",page:wpforms_builder.icon_choices.icons_per_page,pagination:{paginationClass:"wpforms-icon-picker-pagination"},item(e){var i=e.icon===o.selectedIcon&&e.style===o.selectedIconStyle?'class="selected"':"";return`
								<li data-icon="${e.icon}" data-icon-style="${e.style}"${i}>
									<i class="ic-fa-${e.style} ic-fa-${e.icon}"></i>
									<span class="name">${e.icon}</span>
								</li>`},indexAsync:!0};let t=new List("wpforms-icon-picker-icons",e,wpforms_builder.icon_choices.icons);F.iconChoices.infiniteScrollPagination(t),y("#wpforms-icon-picker-search").on("keyup",function(){t.search(y(this).val(),["name"],function(o){for(let e=0,i=t.items.length;e<i;e++)t.items[e].found=new RegExp(o).test(t.items[e].values().icon)})}),t.on("searchComplete",function(){var e=y(".wpforms-icon-picker-not-found");e.html(e.data("message").replace("{keyword}",y("#wpforms-icon-picker-search").val())),e.toggleClass("wpforms-hidden",!_.isEmpty(t.matchingItems))})},infiniteScrollPagination(i){let o=1;var e={root:r.querySelector(".wpforms-icon-picker-jconfirm-content-pane"),rootMargin:"600px"};new IntersectionObserver(function(e){e[0].isIntersecting&&(o++,i.show(0,o*wpforms_builder.icon_choices.icons_per_page))},e).observe(r.querySelector(".wpforms-icon-picker-pagination"))},selectIcon(e,i){var o=i.parent().data("field-id"),t=i.parent().data("choice-id"),r=i.data("icon"),s=i.data("icon-style"),l=y(`#wpforms-field-option-row-${o}-choices ul li[data-key=${t}]`),n=y(`#wpforms-field-option-row-${o}-choices ul`).data("field-type");i.addClass("selected"),i.siblings(".selected").removeClass("selected"),F.iconChoices.updateIcon(l,r,s),F.fieldChoiceUpdate(n,o),e.close(),WPFormsUtils.triggerEvent(C,"wpformsBuilderIconChoicesIconSelected",[l,r,s,o,t])},updateIcon(e,i,o){e.find(".wpforms-icon-select span").text(i),e.find(".wpforms-icon-select .ic-fa-preview").removeClass().addClass(`ic-fa-preview ic-fa-${o} ic-fa-`+i),e.find(".wpforms-icon-select .source-icon").val(i),e.find(".wpforms-icon-select .source-icon-style").val(o)}},dismissNotice(){C.on("click",".wpforms-alert-field-not-available .wpforms-dismiss-button",function(e){e.preventDefault();let i=y(this),o=i.closest(".wpforms-alert"),t=i.data("field-id");o.addClass("out"),setTimeout(function(){o.remove()},250),t&&y("#wpforms-field-option-"+t).remove()})},trimFormTitle(){var e,i=y(".wpforms-center-form-name");38<i.text().length&&(e=i.text().trim().substring(0,38).split(" ").slice(0,-1).join(" ")+"...",i.text(e))},loadColorPickers(e=null,o=null){e=e||C,o=o||{},e.find(".wpforms-color-picker").each(function(){var e,i=y(this);i.closest(".minicolors").hasClass("minicolors-focus")&&o.skipFocused||(i.hasClass("minicolors-input")&&i.minicolors("destroy"),e={defaultValue:i.data("fallback-color")||"",...o},i.minicolors(e))})},getValidColorPickerValue(e){var i=e.minicolors("value"),o=_.isEqual(e.minicolors("rgbObject"),{r:0,g:0,b:0}),t=_.includes(["#000","#000000"],i),e=e.data("fallback-color")||"#000000";return o&&!t?e:i},registerTemplates(){"undefined"!=typeof WPForms&&WPForms.Admin.Builder.Templates.add(["wpforms-builder-confirmations-message-field","wpforms-builder-conditional-logic-toggle-field"])},exitBack(){console.warn('WARNING! Function "WPFormsBuilder.exitBack()" has been deprecated.')},onUpdateSelectPlaceholder(e,i){!["select","payment-select"].includes(i.data("field-type"))||!i.hasClass("required")||y(`#wpforms-field-option-${e}-multiple`).prop("checked")||F.dropdownField.helpers.hasDefaults(e)||F.updateSelectPlaceholder(e)},updateSelectPlaceholder(e){e=y(`#wpforms-field-option-${e}-placeholder`);e.val()||e.val(wpforms_builder.select_choice).trigger("input")},maybeUpdateRequiredPlaceholder(e){y(`#wpforms-field-option-${e}-required`).is(":checked")&&F.updateSelectPlaceholder(e)},getElementsCache(){return{elements:k,browser:e}}};return F})(document,window,jQuery);WPFormsBuilder.init();