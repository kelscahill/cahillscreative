var WPFormsEducation=window.WPFormsEducation||{};WPFormsEducation.core=window.WPFormsEducation.core||((n,i,d)=>{let r='<i class="wpforms-loading-spinner wpforms-loading-white wpforms-loading-inline"></i>',s={init(){d(s.ready)},ready(){s.events()},events(){s.dismissEvents(),s.openModalButtonClick(),s.setDykColspan(),s.gotoAdvancedTabClick(),s.proFieldDelete()},openModalButtonClick(){d(n).on("click",".education-modal:not(.wpforms-add-fields-button)",s.openModalButtonHandler).on("mousedown",".education-modal.wpforms-add-fields-button",s.openModalButtonHandler).on("click",".education-action-button",s.actionButtonHandler)},actionButtonHandler(t){t.preventDefault();var e,t=d(this);"upgrade"===t.data("action")&&(e=t.data("utm-content"),t=t.data("license"),i.open(WPFormsEducation.core.getUpgradeURL(e,t),"_blank"))},openModalButtonHandler(t,e=null){t.preventDefault();var o=e||d(this);switch(o.data("action")){case"activate":s.activateModal(o);break;case"install":s.installModal(o);break;case"incompatible":s.incompatibleModal(o)}},proFieldDelete(){d("#wpforms-builder").on("wpformsFieldDelete",function(){d(".wpforms-field-wrap .wpforms-field-is-pro").length||d(".wpforms-preview .wpforms-pro-fields-notice").addClass("wpforms-hidden")})},dismissEvents(){d(n).on("click",".wpforms-dismiss-container .wpforms-dismiss-button",function(){let t=d(this),e=t.closest(".wpforms-dismiss-container"),o={action:"wpforms_education_dismiss",nonce:wpforms_education.nonce,section:t.data("section"),page:"string"==typeof i.pagenow?i.pagenow:""},a=e.find(".wpforms-dismiss-out");0<(a=e.hasClass("wpforms-dismiss-out")?e:a).length?(a.addClass("out"),setTimeout(function(){e.remove()},300)):e.remove(),d.post(wpforms_education.ajax_url,o)})},setDykColspan(){d("#adv-settings").on("change","input.hide-column-tog",function(){var t=d(".wpforms-dyk td"),e=d(".wp-list-table thead .manage-column").not(".hidden").length;t.attr("colspan",e)})},gotoAdvancedTabClick(){d(n).on("click",".wpforms-educational-alert.wpforms-calculations a",function(t){var e=d(this);"#advanced-tab"===e.attr("href")&&(t.preventDefault(),e.closest(".wpforms-field-option").find(".wpforms-field-option-group-advanced .wpforms-field-option-group-toggle").trigger("click"))})},getUTMContentValue(t){return t.hasClass("wpforms-add-fields-button")?t.data("utm-content")+" Field":t.hasClass("wpforms-template-select")?s.slugToUTMContent(t.data("slug")):t.hasClass("wpforms-panel-sidebar-section")?s.slugToUTMContent(t.data("slug"))+" Addon":t.data("utm-content")||t.data("name")},slugToUTMContent(t){return t?t.toString().replace(/[^a-z\d ]/gi," ").replace(/\b[a-z]/g,function(t){return t.toUpperCase()}):""},getUpgradeURL(t,e){let o=wpforms_education.upgrade[e].url,a=(-1<t.toLowerCase().indexOf("template")&&(o=wpforms_education.upgrade[e].url_template),-1<t.toLowerCase().indexOf("themes")&&(o=wpforms_education.upgrade[e].url_themes),/(\?)/.test(o)?"&":"?");return-1===o.indexOf("https://wpforms.com")&&(a=encodeURIComponent(a)),o+a+"utm_content="+encodeURIComponent(t.trim())},upgradeModalThankYou:t=>{d.alert({title:wpforms_education.thanks_for_interest,content:wpforms_education.upgrade[t].modal,icon:"fa fa-info-circle",type:"blue",boxWidth:"565px",buttons:{confirm:{text:wpforms_education.ok,btnClass:"btn-confirm",keys:["enter"]}}})},getSpinner:()=>r,activateModal(t){var e=t.data("name"),o=t.data("message"),a=wpforms_education.can_activate_addons;d.alert({title:!1,content:o||wpforms_education.activate_prompt.replace(/%name%/g,e),icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_education.activate_confirm,btnClass:"btn-confirm"+(a?"":" hidden"),keys:["enter"],isHidden:!a,action(){return this.$$confirm.prop("disabled",!0).html(r+wpforms_education.activating),this.$$cancel.prop("disabled",!0),s.activateAddon(t,this),!1}},cancel:{text:wpforms_education.cancel,action(){d(n).trigger("wpformsEducationModalClose",t)}}}})},activateAddon(e,o){let t=e.data("path"),a=e.data("type"),n=e.data("nonce"),i=e.data("hide-on-success"),r=e.data("redirect-url");d.post(wpforms_education.ajax_url,{action:"wpforms_activate_addon",nonce:n,plugin:t,type:a},function(t){o.close(),t.success?(i&&e.hide(),s.saveModal("plugin"===a?wpforms_education.plugin_activated:wpforms_education.addon_activated,!1,{redirectUrl:r})):d.alert({title:!1,content:t.data,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_education.close,btnClass:"btn-confirm",keys:["enter"]}}})})},saveModal(t,e=!1,o=void 0){t=t||wpforms_education.addon_activated,e=e||wpforms_education.save_prompt,d.alert({title:t.replace(/\.$/,""),content:e,icon:"fa fa-check-circle",type:"green",buttons:{confirm:{text:o?.saveConfirm||wpforms_education.save_confirm,btnClass:"btn-confirm",keys:["enter"],action(){if("undefined"==typeof WPFormsBuilder)location.reload();else{var t;if(this.$$confirm.prop("disabled",!0).html(r+wpforms_education.saving),this.$$cancel.prop("disabled",!0),!WPFormsBuilder.formIsSaved())return!(t=WPFormsBuilder.formSave(!1))||(t.done(function(){s.redirect(o?.redirectUrl)}),!1);s.redirect(o?.redirectUrl)}}},cancel:{text:wpforms_education.close,action(){d(n).trigger("wpformsEducationSaveModalClose")}}}})},redirect(t){t?location.href=t:location.reload()},installModal(t){var e,o=t.data("name"),a=t.data("url");a&&""!==a?(a=wpforms_education.can_install_addons,e=t.data("message"),d.alert({title:!1,content:e||wpforms_education.install_prompt.replace(/%name%/g,o),icon:"fa fa-info-circle",type:"blue",boxWidth:"425px",buttons:{confirm:{text:wpforms_education.install_confirm,btnClass:"btn-confirm"+(a?"":" hidden"),keys:["enter"],isHidden:!a,action(){return this.$$confirm.prop("disabled",!0).html(r+wpforms_education.installing),this.$$cancel.prop("disabled",!0),s.installAddon(t,this),!1}},cancel:{text:wpforms_education.cancel,action(){d(n).trigger("wpformsEducationModalClose",t)}}}})):wpf.debug(`Couldn't install the ${o} addon: Empty install URL.`)},incompatibleModal(t){var e=wpforms_education.addon_incompatible.title,o=t.data("message")||wpforms_education.addon_error;d.alert({title:e,content:o,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_education.addon_incompatible.button_text,btnClass:"btn-confirm",keys:["enter"],action(){var t;return"undefined"==typeof WPFormsBuilder?s.redirect(wpforms_education.addon_incompatible.button_url):(this.$$confirm.prop("disabled",!0).html(r+this.$$confirm.text()),this.$$cancel.prop("disabled",!0),WPFormsBuilder.formIsSaved()?s.redirect(wpforms_education.addon_incompatible.button_url):(t=WPFormsBuilder.formSave(!1))&&t.done(function(){s.redirect(wpforms_education.addon_incompatible.button_url)})),!1}},cancel:{text:wpforms_education.cancel,action(){d(n).trigger("wpformsEducationModalClose",t)}}}})},installAddon(t,o){let e=t.data("url"),a=t.data("type"),n=t.data("nonce"),i=t.data("hide-on-success"),r=t.data("redirect-url");d.post(wpforms_education.ajax_url,{action:"wpforms_install_addon",nonce:n,plugin:e,type:a},function(e){if(o.close(),e.success)i&&t.hide(),s.saveModal(e.data.msg,!1,{redirectUrl:r});else{let t=e.data;"object"==typeof e.data&&(t=wpforms_education.addon_error),d.alert({title:!1,content:t,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_education.close,btnClass:"btn-confirm",keys:["enter"]}}})}})},getUpgradeModalWidth(t){var e=d(i).width();return e<=300?"250px":e<=750?"350px":!t||e<=1024?"550px":1070<e?"1040px":"994px"},errorModal(t,e){d.alert({title:t||!1,content:e,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_education.close,btnClass:"btn-confirm",keys:["enter"]}}})}};return s})(document,window,jQuery),WPFormsEducation.core.init();