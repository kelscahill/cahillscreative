let wpFormsAIDock=(i=>{function n(o){localStorage.setItem("wpforms-ai-chat-prefers-pinned","1"),o.find(".wpforms-ai-modal-pin").attr("title",wpforms_ai_chat_element.unpinChat);var a=i("#wpforms-builder-form .wpforms-toolbar");let e=a.offset().top+a.outerHeight();o.addClass("pinned"),i("#wpadminbar").length&&o.addClass("with-wpadminbar"),o.insertAfter(a).promise().done(function(){o.css({top:e})})}function a(o){localStorage.setItem("wpforms-ai-chat-prefers-pinned","0"),o.find(".wpforms-ai-modal-pin").attr("title",wpforms_ai_chat_element.pinChat),o.removeClass("pinned"),o.removeClass("with-wpadminbar"),o.appendTo(i("body")).promise().done(function(){o.css({top:0})}),o.find(".wpforms-ai-modal-top-bar").removeClass("scrolled")}function t(){var o;i(this).hasClass("not-allowed")||(((o=i(this).closest(".jconfirm.jconfirm-wpforms-ai-modal")).hasClass("pinned")?a:n)(o),i(".jconfirm.jconfirm-wpforms-ai-modal").not(o).each(function(){var o=i(this);(o.hasClass("pinned")?a:n)(o),o.hide()}))}function s(o){"fields"!==i(o.target).closest("button").data("panel")&&i(".jconfirm.jconfirm-wpforms-ai-modal.pinned").each(function(){i(this).hide()})}function r(o){return i('wpforms-ai-chat[field-id="'+o+'"]').closest(".jconfirm.jconfirm-wpforms-ai-modal").last()}return{init:function(a){{var e=a;let i=r(e),o=i.find(".wpforms-ai-modal-pin").length;if(!o){let a=i.find(".jconfirm-closeIcon"),o=(a.after(`<div class="wpforms-ai-modal-top-bar">
			<div class="wpforms-ai-modal-pin" title="${wpforms_ai_chat_element.pinChat}"></div>
			</div>`).promise().done(function(){var o=i.find(".wpforms-ai-modal-top-bar");a.appendTo(o)}),a.attr("title",wpforms_ai_chat_element.close),i.find(".wpforms-ai-modal-top-bar")),e=i.find(".wpforms-ai-chat-message-list");e.off("scroll"),e.on("scroll",function(){0<e.scrollTop()?o.addClass("scrolled"):o.removeClass("scrolled")}),i.on("remove",function(){e.off("scroll")})}}{let o=i(".wpforms-ai-modal-pin");i(document).off("click",".wpforms-ai-modal-pin").on("click",".wpforms-ai-modal-pin",t).on("wpformsAIChatBeforeSendMessage",()=>o.addClass("not-allowed")).on("wpformsAIChatBeforeError wpformsAIChatAfterTypeText",()=>o.removeClass("not-allowed")),i("#wpforms-panels-toggle button").off("click",s).on("click",s)}e=a,"0"!==(localStorage.getItem("wpforms-ai-chat-prefers-pinned")||"0")&&n(r(e))}}})(jQuery);