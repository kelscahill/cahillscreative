"use strict";(globalThis.webpackChunkgoogle_listings_and_ads=globalThis.webpackChunkgoogle_listings_and_ads||[]).push([[844],{5928:(e,t,a)=>{a.r(t),a.d(t,{default:()=>we});var i=a(1609),n=a(7723),r=a(6087),l=a(6427),s=a(3905),c=a(4932),o=a(3741),d=a(7143),g=a(1233),p=a(8493),m=a(7892),u=a(6361),_=a(5995);const h="price-benchmark-banner-dismissed",b=()=>{const{set:e}=(0,d.useDispatch)(g.store);return(0,u.A)(h)?null:(0,i.createElement)(l.Card,{size:"large",className:"gla-price-benchmark-suggestions-banner"},(0,i.createElement)(l.CardBody,{className:"gla-price-benchmark-suggestions-banner__body"},(0,i.createElement)("div",{className:"gla-price-benchmark-suggestions-banner__graphic"},(0,i.createElement)("img",{src:_,alt:"",width:164})),(0,i.createElement)("div",{className:"gla-price-benchmark-suggestions-banner__text"},(0,i.createElement)(p.A,null,(0,n.__)("New","google-listings-and-ads")),(0,i.createElement)("h3",null,(0,n.__)("Price Benchmark & Suggestions","google-listings-and-ads"))),(0,i.createElement)("div",{className:"gla-price-benchmark-suggestions-banner__footer"},(0,i.createElement)("p",null,(0,r.createInterpolateElement)((0,n.__)("This report includes a competitive pricing analysis, price recommendations, and insights like <strong>Effectiveness</strong> to help you identify opportunities, compare against competitors, and accelerate your sales growth.","google-listings-and-ads"),{strong:(0,i.createElement)("strong",null)})),(0,i.createElement)(m.A,{variant:"secondary",onClick:()=>{e(s.Z7,h,!0)}},(0,n.__)("Dismiss","google-listings-and-ads")))))};var E=a(4471),f=a(9927),v=a(8468),y=a(6873),k=a(6473),N=a(1177),C=a(9982);const A=()=>(0,i.createElement)("div",{className:"gla-price-benchmark__empty-metrics"},(0,i.createElement)("div",{className:"gla-price-benchmark__empty-metrics-graphic"},(0,i.createElement)("img",{src:C,alt:(0,n.__)("No sale price suggestions graphic","google-listings-and-ads"),width:88,height:88})),(0,i.createElement)("div",{className:"gla-price-benchmark__empty-metrics-description"},(0,i.createElement)("p",null,(0,n.__)("You do not have any sale price suggestions at this moment.","google-listings-and-ads")),(0,i.createElement)("p",null,(0,r.createInterpolateElement)((0,n.__)("<a>Find out</a> if you meet all eligibility criteria to receive suggestions in the future.","google-listings-and-ads"),{a:(0,i.createElement)(N.A,{className:"gla-empty-metrics-notice__link",href:"https://support.google.com/merchants/answer/13798101",context:"price-benchmark-empty-metrics-notice",linkId:"empty-metric-notice-find-out-link"})}))));var P=a(4327),w=a(2434);const S="price-benchmark-suggestions",I="price-benchmark-change-price-modal",L="LABEL_CHANGE_EFFECTIVENESS",T="LABEL_AVG_PRICE_ON_GOOGLE",R="LABEL_PRICE_GAP_PERCENT",G="LABEL_SUGGESTED_PRICE",K="LABEL_REGULAR_PRICE",F="LABEL_ACTION",x="LABEL_CURRENT_CLICKS",D="LABEL_CURRENT_CONVERSIONS",M="LABEL_SALES_PRICE",V="LABEL_EXPECTED_UPLIFT_IN_CLICKS",H="LABEL_EXPECTED_UPLIFT_IN_CONVERSIONS",O=0,U=1,B=2,q=3,Y="METRIC_TYPE_EFFECTIVENESS",$="METRIC_TYPE_PRICE",j="METRIC_TYPE_PERCENTAGE",z="METRIC_TYPE_DELTA",Q={[L]:{title:(0,n.__)("Change Effectiveness","google-listings-and-ads"),tooltip:(0,n.__)("Effectiveness tells you which products would benefit most from price changes. This rating takes into consideration the performance boost predicted by adjusting the sale price and the difference between your current price and the suggested price. Price suggestions with “High” effectiveness are predicted to drive the largest increase in performance. Keep in mind that predictions do not guarantee improvements in future performance.","google-listings-and-ads")},[T]:{title:(0,n.__)("Avg. Price on Google","google-listings-and-ads"),tooltip:(0,n.__)("The effective price for a product across all retailers selling the same product weighted by customer clicks. Products are matched based on the GTIN you provide in the product details.","google-listings-and-ads")},[R]:{title:(0,n.__)("Price Gap %","google-listings-and-ads"),tooltip:(0,n.__)("The percentage difference between your price and the price on Google for this product.","google-listings-and-ads")},[G]:{title:(0,n.__)("Suggested Price","google-listings-and-ads"),tooltip:(0,n.__)("Suggested sale price predicted by Google for products that benefit most from pricing adjustments. It is based on advanced simulations at different price points over the past 7 days factoring in price elasticity, current performance and the performance impact on price changes for businesses similar to you. Use suggested sale prices as valuable directional guidance to help shape your pricing strategy. Learn more about how to change the sale price of your products. Keep in mind that predictions do not guarantee future performance outcomes.","google-listings-and-ads")},[K]:{title:(0,n.__)("Regular Price","google-listings-and-ads")},[F]:{title:(0,n.__)("Action","google-listings-and-ads")},[x]:{title:(0,n.__)("Current Clicks","google-listings-and-ads"),tooltip:(0,n.__)("The number of clicks your product received in the last 7 days.","google-listings-and-ads")},[D]:{title:(0,n.__)("Current Conversions","google-listings-and-ads"),tooltip:(0,n.__)("The number of conversions your product received in the last 7 days.","google-listings-and-ads")},[V]:{title:(0,n.__)("Exp. Uplift in Clicks","google-listings-and-ads"),tooltip:(0,n.__)("Click uplift shows the predicted percentage increase of clicks from your Shopping ads if the suggested price is applied. Predictions are generated by advanced pricing simulations based on performance data over the past 7 days. It's important to keep in mind that these predictions do not guarantee future performance outcomes, as actual performance can be influenced by factors other than price.","google-listings-and-ads")},[H]:{title:(0,n.__)("Exp. Uplift in Conv.","google-listings-and-ads"),tooltip:(0,n.__)("Conversion uplift shows the predicted percentage increase in online conversions from Shopping ads for your product if the suggested sale price is applied. Predictions are generated by advanced pricing simulations based on performance data over the past 7 days. It's important to keep in mind that predictions do not guarantee future performance outcomes.","google-listings-and-ads")},[M]:{title:(0,n.__)("Sales Price","google-listings-and-ads")}};var W=a(3832),X=a(6942),Z=a.n(X),J=a(1244),ee=a(7419);const te=({amount:e,highlight:t=!1})=>{const{formatAmount:a}=(0,ee.A)(),n=isNaN(e)?0:e;return(0,i.createElement)("span",{className:Z()("gla-price-benchmark-table__price",{"gla-price-benchmark-table__price--highlight":t})},a(n))};var ae=a(9039);const ie=({labelKey:e,alignLeft:t=!1})=>{if(!Q[e])return null;const{title:a,tooltip:n}=Q[e];return(0,i.createElement)("span",{className:Z()("gla-price-benchmark__label",{"gla-price-benchmark__label--align-left":t})},!n&&a,n&&(0,i.createElement)(ae.A,{text:n,className:"gla-price-benchmark__tooltip"},a))},ne={[O]:{intent:"default",label:(0,n.__)("Unspecified","google-listings-and-ads")},[U]:{intent:"error",label:(0,n.__)("Low","google-listings-and-ads")},[B]:{intent:"warning",label:(0,n.__)("Medium","google-listings-and-ads")},[q]:{intent:"success",label:(0,n.__)("High","google-listings-and-ads")}},re=({effectiveness:e})=>ne[e]?(0,i.createElement)(p.A,{intent:ne[e].intent},ne[e].label):null,le=({labelKey:e,value:t,type:a,className:n})=>{if(null==t||""===t)return null;if(a===$&&isNaN(t))return null;let r=t;switch(a){case $:r=(0,i.createElement)(te,{amount:t});break;case z:r=(0,i.createElement)(J.A,{amount:100*t,suffix:"%"});break;case Y:r=(0,i.createElement)(re,{effectiveness:t});break;case j:r=`${parseInt(t,10)}%`}return(0,i.createElement)("div",{className:Z()("gla-change-price-modal__metric-value",n)},(0,i.createElement)("div",{className:"gla-change-price-modal__metric-value-title"},(0,i.createElement)(ie,{labelKey:e})),(0,i.createElement)("div",{className:"gla-change-price-modal__metric-value-value"},r))};var se=a(9457),ce=a(2848),oe=a(314),de=a(5588),ge=a(1378);const pe=({productId:e,productPrice:t,suggestedPrice:a,onPriceChange:l,productDetails:s})=>{const{formatAmount:c}=(0,ee.A)(),[o,g]=(0,r.useState)(),[p,u]=(0,r.useState)(!1),[_,h]=(0,r.useState)(0),{googleAdsAccount:b}=(0,ge.A)(),{updateProduct:E}=(0,d.useDispatch)(oe.PRODUCTS_STORE_NAME),{updateProductVariation:f}=(0,d.useDispatch)(oe.EXPERIMENTAL_PRODUCT_VARIATIONS_STORE_NAME),{global_unique_id:v,on_sale:y,sale_price:N,type:C,parent_id:A}=s;(0,r.useEffect)((()=>{h(a)}),[a]);const P=(0,r.useCallback)((()=>{const e=Number.parseFloat(_),t=Number.parseFloat(N);return!isNaN(t)&&t&&e<=t&&y?(0,n.sprintf)(
// Translators: %s is replaced with the sales price.
// Translators: %s is replaced with the sales price.
(0,n.__)("New price must be greater than the sales price (%s).","google-listings-and-ads"),c(t)):e<0?(0,n.__)("New price must be greater than or equals to zero.","google-listings-and-ads"):null}),[_,N,c,y]),w=(0,r.useCallback)((()=>{const e=P();return g(e),null===e}),[P]),S=(0,r.useCallback)((async()=>{if(w()){u(!0);try{const i={regular_price:`${_}`};"variation"===C&&A?await f({product_id:A,id:e},i):await E(e,i),(0,k.ce)("gla_price_benchmarks_change_price_edited",{context:I,product_id:e,previous_price:t,recommended_price:a,changed_price:_,currency:b?.currency,gtin:v})}catch(e){return g(e?.message),void u(!1)}u(!1),l(e,_)}}),[_,e,l,E,w,b,t,a,v,A,C,f]);(0,r.useEffect)((()=>{w()}),[_,w]);const L=P();return(0,i.createElement)("div",{className:"gla-change-price-modal-price-input-footer"},(0,i.createElement)(de.A,{label:(0,n.__)("New price","google-listings-and-ads"),suffix:b?.currency,value:_,onChange:h,className:Z()("gla-change-price-modal-price-input-footer__price",{"gla-change-price-modal-price-input-footer__price--error":o}),help:o}),(0,i.createElement)(m.A,{isPrimary:!0,onClick:S,disabled:null!==L,loading:p},(0,n.__)("Change Price","google-listings-and-ads")))};var me=a(77),ue=a(1968);const _e=({productId:e,onRequestClose:t,onPriceChange:a})=>{const s=(0,ue.A)(),{product:c,hasFinishedResolution:d}=(0,me.A)(e),{data:g,hasFinishedResolution:p}=(0,P.A)({product_id:e});(0,r.useEffect)((()=>{(0,k.ce)("gla_modal_open",{context:I,product_id:e})}),[e]);const u=(0,r.useCallback)((()=>{(0,k.ce)("gla_modal_closed",{context:I,product_id:e,action:"close"}),t()}),[t,e]),_={title:(0,n.__)("Change Price","google-listings-and-ads"),onRequestClose:u,className:"gla-change-price-modal"};if(!d||!p)return(0,i.createElement)(se.A,{..._},(0,i.createElement)(o.A,null));if((!c||!g)&&d)return(0,i.createElement)(se.A,{..._,buttons:[(0,i.createElement)(m.A,{key:"close",isPrimary:!0,onClick:t},(0,n.__)("Close","google-listings-and-ads"))]},(0,i.createElement)("p",null,(0,n.__)("Product not found. ","google-listings-and-ads")));const{effectiveness:h,product_price:b,benchmark_price:E,price_gap:f,suggested_price:v,clicks:y,conversions:N,predicted_clicks_change:C,predicted_conversions_change:A,product:{id:w,title:S,thumbnail:F}}=g,O=Number.parseFloat(c.sale_price),U=c.on_sale,B=(0,W.addQueryArgs)(`${s}post.php`,{post:e,action:"edit"});return(0,i.createElement)(se.A,{..._,buttons:[(0,i.createElement)(pe,{onPriceChange:a,productId:w,key:"price-input-footer",suggestedPrice:v,productPrice:b,productDetails:c})]},(0,i.createElement)("div",{className:"gla-change-price-modal__content"},(0,i.createElement)("div",{className:"gla-change-price-modal__product"},F&&(0,i.createElement)("div",{className:"gla-change-price-modal__product-image"},(0,i.createElement)("img",{src:F,alt:(0,n.__)("Product thumbnail","google-listings-and-ads"),width:"156"})),(0,i.createElement)("div",{className:"gla-change-price-modal__product-details"},(0,i.createElement)("p",null,(0,i.createElement)("span",null,w)),(0,i.createElement)("p",{className:"gla-change-price-modal__product-title"},S))),(0,i.createElement)("div",{className:"gla-change-price-modal__metrics"},(0,i.createElement)("div",{className:"gla-change-price-modal__metrics-grid"},(0,i.createElement)(le,{labelKey:L,value:h,type:Y}),(0,i.createElement)(le,{labelKey:R,value:f,type:j}),(0,i.createElement)("hr",{className:"gla-change-price-modal__separator"}),(0,i.createElement)(le,{labelKey:K,value:b,type:$}),(0,i.createElement)(le,{labelKey:T,value:E,type:$}),U&&(0,i.createElement)(le,{labelKey:M,value:O,type:$,className:"gla-change-price-modal__sales-price"}),(0,i.createElement)(le,{labelKey:G,value:v,type:$}),(0,i.createElement)("hr",{className:"gla-change-price-modal__separator"}),(0,i.createElement)(le,{labelKey:x,value:y}),(0,i.createElement)(le,{labelKey:D,value:N}),(0,i.createElement)(le,{labelKey:V,value:C,type:z}),(0,i.createElement)(le,{labelKey:H,value:A,type:z}),(0,i.createElement)("hr",{className:"gla-change-price-modal__separator"}),U&&(0,i.createElement)(l.Notice,{status:"warning",isDismissible:!1},(0,r.createInterpolateElement)((0,n.__)("This product is currently on sale. To change the sale price, go to the <link>Edit Product</link> page in WooCommerce.","google-listings-and-ads"),{link:(0,i.createElement)(ce.A,{type:"wp-admin",href:B,eventName:"gla_price_benchmark_edit_product_link_click",eventProps:{context:I}})}))))))},he=({productId:e})=>{const{receivePriceBenchmarkSuggestionsProductPrice:t}=(0,w.j)(),[a,l]=(0,r.useState)(!1),s=()=>{l(!1)},c=(0,r.useCallback)(((e,a)=>{t(e,a),(0,k.ce)("gla_modal_closed",{context:I,action:"change-price"}),s()}),[t]);return e?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(m.A,{onClick:()=>{l(!0)},variant:"tertiary",size:"compact",eventName:"gla_price_benchmarks_change_price_clicked",eventProps:{context:S,product_id:e}},(0,n.__)("Change price","google-listings-and-ads")),a&&(0,i.createElement)(_e,{productId:e,onPriceChange:c,onRequestClose:s})):null},be="https://woocommerce.com/document/google-for-woocommerce/faq/",Ee=()=>(0,i.createElement)(l.ExternalLink,{onClick:()=>{(0,k.ce)("gla_documentation_link_click",{context:"price-benchmark-suggestions",link_id:"price-benchmark-suggestions-faq",href:be})},href:be,className:"gla-price-benchmark-suggestions__faq"},(0,n.__)("FAQ","google-listings-and-ads")),fe=[{id:"image",enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,label:(0,n.__)("Image","google-listings-and-ads"),getValue:({item:e})=>e?.product?.thumbnail||null,render:({item:e})=>e?.product?.thumbnail?(0,i.createElement)("img",{src:e.product.thumbnail,alt:e.product.title,className:"gla-price-benchmark-suggestions__image"}):null},{id:"id",enableHiding:!1,enableSorting:!0,enableGlobalSearch:!0,label:(0,n.__)("Product","google-listings-and-ads"),getValue:({item:e})=>e.product.id,render:({item:e})=>e?.product?.title?e.product.title:null},{id:"description",enableHiding:!1,enableSorting:!1,enableGlobalSearch:!0,label:(0,n.__)("Description","google-listings-and-ads"),getValue:({item:e})=>String(e?.product?.id||"")}],ve=[{id:"effectiveness",enableHiding:!1,enableSorting:!0,enableGlobalSearch:!1,header:(0,i.createElement)(ie,{labelKey:L,alignLeft:!0}),label:Q[L].title,render:({item:e})=>void 0===e.effectiveness?null:(0,i.createElement)(re,{effectiveness:e.effectiveness})},{id:"product_price",enableHiding:!1,enableSorting:!0,enableGlobalSearch:!1,label:Q[K].title,render:({item:e})=>(0,i.createElement)(te,{amount:e.product_price,highlight:!0})},{id:"benchmark_price",enableHiding:!1,enableSorting:!0,enableGlobalSearch:!1,header:(0,i.createElement)(ie,{labelKey:T}),label:Q[T].title,render:({item:e})=>(0,i.createElement)(te,{amount:e.benchmark_price})},{id:"price_gap",enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,header:(0,i.createElement)(ie,{labelKey:R}),label:Q[R].title,render:({item:e})=>`${e.price_gap||0}%`},{id:"suggested_price",enableHiding:!1,enableSorting:!0,enableGlobalSearch:!1,header:(0,i.createElement)(ie,{labelKey:G}),label:Q[G].title,render:({item:e})=>(0,i.createElement)(te,{amount:e.suggested_price})},{id:"action",enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,header:(0,i.createElement)("span",{className:"gla-price-benchmark-suggestions__action"},Q[F].title),label:Q[F].title,render:({item:e})=>(0,i.createElement)("div",{className:"gla-price-benchmark-suggestions__action"},(0,i.createElement)(he,{productId:e?.product?.id}))}],ye=["action"],ke={search:"",page:1,perPage:10,sort:{direction:"desc",field:"effectiveness"}},Ne=(0,y.withViewportMatch)({isViewportMobile:"< medium"})((({isViewportMobile:e})=>{const{DataViews:t}=window.wp.dataviews,[a,n]=(0,r.useState)({type:"table",layout:{},fields:[],filters:[],titleField:"id",descriptionField:"description",mediaField:"image",...ke}),l={order:a.sort.direction,orderby:a.sort.field,search:a.search,page:a.page,per_page:a.perPage},{data:{items:s,meta:c},hasFinishedResolution:o}=(0,P.A)(l),d=(0,r.useCallback)((e=>{n(e)}),[]),g=(0,r.useMemo)((()=>e?ye:ve.map((e=>e.id))),[e]);return(0,r.useEffect)((()=>{n((e=>({...e,fields:g})))}),[g]),(0,r.useEffect)((()=>{o&&(0,k.ce)("gla_price_benchmarks_shown",{context:S,suggestions:s.length,per_page:a.perPage})}),[o,s,a]),o&&!s?.length&&(0,v.isEqual)({search:l.search,page:l.page,perPage:l.per_page,sort:{direction:l.order,field:l.orderby}},ke)?(0,i.createElement)(A,null):(0,i.createElement)("div",{className:"gla-price-benchmark-suggestions"},(0,i.createElement)(t,{getItemId:e=>e?.product?.id,fields:[...fe,...ve],data:s,view:a,paginationInfo:{totalItems:c?.totalItems,totalPages:Math.ceil(c?.totalItems/a?.perPage)},onChangeView:d,defaultLayouts:[],header:(0,i.createElement)(Ee,null),isLoading:!o}))}));var Ce=a(782),Ae=a(2780);const Pe=()=>{const{summary:e,hasFinishedResolution:t}=(0,Ce.A)();if(!t)return(0,i.createElement)(Ae.A,{className:"gla-price-benchmark__comparison-chart",isLoading:!0});if(e&&(0,v.isEmpty)(e)||0===e.total_products)return null;const a=[{id:"similar",label:(0,n.__)("Similar","google-listings-and-ads"),value:e.price_similar,color:s.m9.SIMILAR},{id:"no-price-benchmark",label:(0,n.__)("No price benchmark","google-listings-and-ads"),color:s.m9.UNKNOWN,value:e.price_unknown},{id:"cheaper",label:(0,n.__)("Cheaper","google-listings-and-ads"),color:s.m9.LOWER,value:e.price_lower},{id:"more-expensive",label:(0,n.__)("More Expensive","google-listings-and-ads"),color:s.m9.HIGHER,value:e.price_higher}];return(0,i.createElement)(Ae.A,{title:(0,n.__)("How Your Products Compare to Competitors","google-listings-and-ads"),segments:a,className:"gla-price-benchmark__comparison-chart"})},we=()=>{const[e,t]=(0,r.useState)(window.wp?.dataviews),{dataViewsScriptUrl:a}=s.Th;return(0,r.useEffect)((()=>{if(void 0===e&&a){const e=document.createElement("script");e.src=a,e.async=!0,e.onload=()=>{t("function"==typeof window.wp?.dataviews?.filterSortAndPaginate)},e.onerror=()=>{t(!1)},document.head.appendChild(e)}return()=>{!1===e&&t(void 0)}}),[e,a]),(0,i.createElement)("div",{className:"gla-price-benchmark"},(0,i.createElement)(E.A,null),(0,i.createElement)(f.A,null),(0,i.createElement)(b,null),(0,i.createElement)(Pe,null),!1===e&&(0,i.createElement)(c.A,{status:"warning",isDismissible:!1,className:"gla-price-benchmark__error-message"},(0,n.__)("There was an error loading the price benchmark suggestions.","google-listings-and-ads")),(e||void 0===e)&&(0,i.createElement)(l.Card,{className:"gla-price-benchmark__card"},void 0===e&&(0,i.createElement)(o.A,null),e&&(0,i.createElement)(Ne,null)))}},521:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(7143),n=a(6520),r=a(7615),l=a(2775);const s="products",c={products:[],intervals:[],totals:{}};function o(e){const t=(0,l.A)();return(0,i.useSelect)((a=>{const{getReport:i}=a(n.Ui),l=i(s,e,t,"primary"),o=i(s,e,t,"secondary"),d=l.loaded&&o.loaded;let g=c;return d&&l.data&&o.data&&(g={products:l.data.products||c.products,intervals:l.data.intervals||c.intervals,totals:(0,r.bM)(l.data.totals,o.data.totals,l.reportQuery.fields)}),{data:g,loaded:d}}),[e,t])}}}]);