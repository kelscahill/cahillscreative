(()=>{"use strict";const e=window.wc.productEditor,t=window.React,o=window.wp.i18n,l=window.wc.blockTemplates,n=window.wp.components,s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-onboarding-prompt","title":"Product onboarding prompt","textdomain":"google-listings-and-ads","attributes":{"startUrl":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false,"lock":false,"__experimentalToolbar":false}}'),a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-channel-visibility","title":"Product channel visibility","textdomain":"google-listings-and-ads","attributes":{"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]},"valueOfSync":{"type":"string"},"valueOfDontSync":{"type":"string"},"statusOfSynced":{"type":"string"},"statusOfHasErrors":{"type":"string"}},"supports":{"html":false,"inserter":false,"lock":false,"__experimentalToolbar":false}}'),r=window.wp.date,i=window.wp.element,p=window.wc.wcSettings;async function c(e,t){const o=e.current;if(!o.validity.valid)return(0,p.isWcVersion)("9.2.0","<")?o.validationMessage:{message:o.validationMessage,context:t}}const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-date-time-field","title":"Product date and time fields","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false,"lock":false,"__experimentalToolbar":false}}'),d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-select-field","title":"Product select field","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]}},"supports":{"html":false,"inserter":false,"lock":false,"__experimentalToolbar":false}}'),m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-select-with-text-field","title":"Product select with text field","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]},"customInputValue":{"type":"string"}},"supports":{"html":false,"inserter":false,"lock":false,"__experimentalToolbar":false}}');function g({name:t,...o},l){(0,e.registerProductEditorBlockType)({name:t,metadata:o,settings:{edit:l}})}g(s,(function({attributes:e}){const s=(0,l.useWooBlockProps)(e);return(0,t.createElement)("div",{...s},(0,t.createElement)("div",{className:"Dz8NM01hSQyVP7lytEaS"},(0,t.createElement)("p",{className:"iKH0I_4hIpw3xXPSFYR4"},(0,o.__)("Complete setup to get your products listed on Google for free.","google-listings-and-ads")),(0,t.createElement)(n.Button,{isPrimary:!0,href:e.startUrl},(0,o.__)("Get Started","google-listings-and-ads"))))})),g(a,(function({attributes:s,context:a}){const{valueOfSync:r,valueOfDontSync:i,statusOfSynced:p,statusOfHasErrors:c}=s,u=(0,l.useWooBlockProps)(s),[d,m]=(0,e.__experimentalUseProductEntityProp)(s.property,{postType:a.postType}),{is_visible:g,sync_status:y,issues:f}=d,_=g?d.channel_visibility:i;let b=null;y===c?b=(0,o.__)("Issues detected","google-listings-and-ads"):y&&(b=y.replace("-"," "));const h=g?"":(0,o.__)("This product cannot be shown on any channel because it is hidden from your store catalog. To enable this option, please change this product to be shown in the product catalog, and save the changes.","google-listings-and-ads"),x=g&&null!==b&&_===r&&y!==p,E=f.length>0;return(0,t.createElement)("div",{...u},(0,t.createElement)(n.SelectControl,{disabled:!g,options:s.options,value:_,onChange:e=>{m({...d,channel_visibility:e})},help:h}),x&&(0,t.createElement)(n.Notice,{className:"xrM9YQcns2lLIJoZocoC",status:E?"warning":"info",isDismissible:!1},(0,t.createElement)("section",null,(0,t.createElement)("h2",null,(0,o.__)("Google sync status","google-listings-and-ads")),(0,t.createElement)("p",{className:"FNzfRIMkTNDr5hdJSQJS"},b)),E&&(0,t.createElement)("section",null,(0,t.createElement)("h2",null,(0,o.__)("Issues","google-listings-and-ads")),(0,t.createElement)("ul",null,f.map(((e,o)=>(0,t.createElement)("li",{key:o},e)))))))})),g(u,(function({attributes:o,context:s,clientId:a}){const{property:p}=o,u=(0,l.useWooBlockProps)(o),[d,m]=(0,e.__experimentalUseProductEntityProp)(p,{postType:s.postType,fallbackValue:""}),g=(0,i.useRef)(null),y=(0,i.useRef)(null),[f,_]=(0,i.useState)((()=>d?(0,r.date)("Y-m-d",d):"")),[b,h]=(0,i.useState)((()=>d?(0,r.date)("H:i",d):"")),x=(e,t)=>{let o="";if(e){const l=`${e}T${t||"00:00:00"}`,n=(0,r.getDate)(l);o=(0,r.date)("c",n,"UTC")}_(e),h(t),d!==o&&m(o)},E=(0,e.useValidation)(`${p}-date`,(()=>c(g,a))),w=(0,e.useValidation)(`${p}-time`,(()=>c(y,a)));return(0,t.createElement)("div",{...u},(0,t.createElement)(n.Flex,{align:"flex-start"},(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(e.__experimentalTextControl,{ref:g,type:"date",pattern:"\\d{4}-\\d{2}-\\d{2}",label:o.label,tooltip:o.tooltip,value:f,error:E.error,onChange:e=>x(e,b),onBlur:E.validate})),(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(e.__experimentalTextControl,{className:"p9THnpoXkzl3X4b4PYpg",label:" ",tooltip:"â€Ž ",ref:y,type:"time",pattern:"[0-9]{2}:[0-9]{2}",value:b,error:w.error,onChange:e=>x(f,e),onBlur:w.validate}))))})),g(d,(function({attributes:o,context:s}){const a=(0,l.useWooBlockProps)(o),[r,i]=(0,e.__experimentalUseProductEntityProp)(o.property,{postType:s.postType});return(0,t.createElement)("div",{...a},(0,t.createElement)(n.SelectControl,{label:(0,t.createElement)(e.__experimentalLabel,{label:o.label,tooltip:o.tooltip}),options:o.options,value:r,onChange:i}))})),g(m,(function({attributes:o,context:s}){const{options:a,customInputValue:r}=o,p=(0,l.useWooBlockProps)(o),[c,u]=(0,e.__experimentalUseProductEntityProp)(o.property,{postType:s.postType,fallbackValue:""}),[d,m]=(0,i.useState)((()=>{var e;const t=null!=c?c:"",o=a.find((e=>e.value===t));return null!==(e=o?.value)&&void 0!==e?e:r})),g=d===r,[y,f]=(0,i.useState)(g?c:"");return(0,t.createElement)("div",{...p},(0,t.createElement)(n.SelectControl,{label:(0,t.createElement)(e.__experimentalLabel,{label:o.label,tooltip:o.tooltip}),options:a,value:d,onChange:e=>{m(e),u(e===r?y:e)}}),g&&(0,t.createElement)(e.__experimentalTextControl,{type:"text",value:y,onChange:e=>{f(e),u(e)}}))}))})();