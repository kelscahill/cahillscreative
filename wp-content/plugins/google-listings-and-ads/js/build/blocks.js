!function(){"use strict";var e=window.wc.productEditor,t=window.wp.element,n=window.wp.i18n,o=window.wc.blockTemplates,l=window.wp.components,s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-onboarding-prompt","title":"Product onboarding prompt","textdomain":"google-listings-and-ads","attributes":{"startUrl":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false,"lock":false}}'),a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-channel-visibility","title":"Product channel visibility","textdomain":"google-listings-and-ads","attributes":{"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]},"valueOfSync":{"type":"string"},"valueOfDontSync":{"type":"string"},"statusOfSynced":{"type":"string"},"statusOfHasErrors":{"type":"string"}},"supports":{"html":false,"inserter":false,"lock":false}}'),i=window.wp.date,r=window.wc.wcSettings;async function p(e,t){const n=e.current;if(!n.validity.valid)return(0,r.isWcVersion)("9.2.0","<")?n.validationMessage:{message:n.validationMessage,context:t}}var c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-date-time-field","title":"Product date and time fields","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false,"lock":false}}'),u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-select-field","title":"Product select field","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]}},"supports":{"html":false,"inserter":false,"lock":false}}'),d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-select-with-text-field","title":"Product select with text field","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]},"customInputValue":{"type":"string"}},"supports":{"html":false,"inserter":false,"lock":false}}');function g(t,n){let{name:o,...l}=t;(0,e.registerProductEditorBlockType)({name:o,metadata:l,settings:{edit:n}})}g(s,(function(e){let{attributes:s}=e;const a=(0,o.useWooBlockProps)(s);return(0,t.createElement)("div",a,(0,t.createElement)("div",{className:"Dz8NM01hSQyVP7lytEaS"},(0,t.createElement)("p",{className:"iKH0I_4hIpw3xXPSFYR4"},(0,n.__)("Complete setup to get your products listed on Google for free.","google-listings-and-ads")),(0,t.createElement)(l.Button,{isPrimary:!0,href:s.startUrl},(0,n.__)("Get Started","google-listings-and-ads"))))})),g(a,(function(s){let{attributes:a,context:i}=s;const{valueOfSync:r,valueOfDontSync:p,statusOfSynced:c,statusOfHasErrors:u}=a,d=(0,o.useWooBlockProps)(a),[g,m]=(0,e.__experimentalUseProductEntityProp)(a.property,{postType:i.postType}),{is_visible:y,sync_status:f,issues:h}=g,b=y?g.channel_visibility:p;let _=null;f===u?_=(0,n.__)("Issues detected","google-listings-and-ads"):f&&(_=f.replace("-"," "));const x=y?"":(0,n.__)("This product cannot be shown on any channel because it is hidden from your store catalog. To enable this option, please change this product to be shown in the product catalog, and save the changes.","google-listings-and-ads"),E=y&&null!==_&&b===r&&f!==c,v=h.length>0;return(0,t.createElement)("div",d,(0,t.createElement)(l.SelectControl,{disabled:!y,options:a.options,value:b,onChange:e=>{m({...g,channel_visibility:e})},help:x}),E&&(0,t.createElement)(l.Notice,{className:"xrM9YQcns2lLIJoZocoC",status:v?"warning":"info",isDismissible:!1},(0,t.createElement)("section",null,(0,t.createElement)("h2",null,(0,n.__)("Google sync status","google-listings-and-ads")),(0,t.createElement)("p",{className:"FNzfRIMkTNDr5hdJSQJS"},_)),v&&(0,t.createElement)("section",null,(0,t.createElement)("h2",null,(0,n.__)("Issues","google-listings-and-ads")),(0,t.createElement)("ul",null,h.map(((e,n)=>(0,t.createElement)("li",{key:n},e)))))))})),g(c,(function(n){let{attributes:s,context:a,clientId:r}=n;const{property:c}=s,u=(0,o.useWooBlockProps)(s),[d,g]=(0,e.__experimentalUseProductEntityProp)(c,{postType:a.postType,fallbackValue:""}),m=(0,t.useRef)(null),y=(0,t.useRef)(null),[f,h]=(0,t.useState)((()=>d?(0,i.date)("Y-m-d",d):"")),[b,_]=(0,t.useState)((()=>d?(0,i.date)("H:i",d):"")),x=(e,t)=>{let n="";if(e){const o=`${e}T${t||"00:00:00"}`,l=(0,i.getDate)(o);n=(0,i.date)("c",l,"UTC")}h(e),_(t),d!==n&&g(n)},E=(0,e.useValidation)(`${c}-date`,(()=>p(m,r))),v=(0,e.useValidation)(`${c}-time`,(()=>p(y,r)));return(0,t.createElement)("div",u,(0,t.createElement)(l.Flex,{align:"flex-start"},(0,t.createElement)(l.FlexBlock,null,(0,t.createElement)(e.__experimentalTextControl,{ref:m,type:"date",pattern:"\\d{4}-\\d{2}-\\d{2}",label:s.label,tooltip:s.tooltip,value:f,error:E.error,onChange:e=>x(e,b),onBlur:E.validate})),(0,t.createElement)(l.FlexBlock,null,(0,t.createElement)(e.__experimentalTextControl,{className:"p9THnpoXkzl3X4b4PYpg",label:" ",tooltip:"â€Ž ",ref:y,type:"time",pattern:"[0-9]{2}:[0-9]{2}",value:b,error:v.error,onChange:e=>x(f,e),onBlur:v.validate}))))})),g(u,(function(n){let{attributes:s,context:a}=n;const i=(0,o.useWooBlockProps)(s),[r,p]=(0,e.__experimentalUseProductEntityProp)(s.property,{postType:a.postType});return(0,t.createElement)("div",i,(0,t.createElement)(l.SelectControl,{label:(0,t.createElement)(e.__experimentalLabel,{label:s.label,tooltip:s.tooltip}),options:s.options,value:r,onChange:p}))})),g(d,(function(n){let{attributes:s,context:a}=n;const{options:i,customInputValue:r}=s,p=(0,o.useWooBlockProps)(s),[c,u]=(0,e.__experimentalUseProductEntityProp)(s.property,{postType:a.postType,fallbackValue:""}),[d,g]=(0,t.useState)((()=>{var e;const t=null!=c?c:"",n=i.find((e=>e.value===t));return null!==(e=n?.value)&&void 0!==e?e:r})),m=d===r,[y,f]=(0,t.useState)(m?c:"");return(0,t.createElement)("div",p,(0,t.createElement)(l.SelectControl,{label:(0,t.createElement)(e.__experimentalLabel,{label:s.label,tooltip:s.tooltip}),options:i,value:d,onChange:e=>{g(e),u(e===r?y:e)}}),m&&(0,t.createElement)(e.__experimentalTextControl,{type:"text",value:y,onChange:e=>{f(e),u(e)}}))}))}();