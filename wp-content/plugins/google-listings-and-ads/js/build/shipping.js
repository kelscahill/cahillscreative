"use strict";(globalThis.webpackChunkgoogle_listings_and_ads=globalThis.webpackChunkgoogle_listings_and_ads||[]).push([[553],{521:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(7143),s=n(6520),i=n(7615),o=n(2775);const l="products",g={products:[],intervals:[],totals:{}};function r(e){const t=(0,o.A)();return(0,a.useSelect)((n=>{const{getReport:a}=n(s.Ui),o=a(l,e,t,"primary"),r=a(l,e,t,"secondary"),u=o.loaded&&r.loaded;let c=g;return u&&o.data&&r.data&&(c={products:o.data.products||g.products,intervals:o.data.intervals||g.intervals,totals:(0,i.bM)(o.data.totals,r.data.totals,o.reportQuery.fields)}),{data:c,loaded:u}}),[e,t])}},6343:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(1609),s=n(6087),i=n(6427),o=n(7723),l=n(8468),g=n(2434),r=n(9927),u=n(7343),c=n(7892),d=n(9457);const h={confirmationModal:"_GQ4sGfGTeKA7JPcBsrS"};function _({onContinue:e,onRequestClose:t}){return(0,a.createElement)(d.A,{className:h.confirmationModal,title:(0,o.__)("Before you saveâ€¦","google-listings-and-ads"),buttons:[(0,a.createElement)(c.A,{key:"cancel",isSecondary:!0,onClick:t},(0,o.__)("Don't save","google-listings-and-ads")),(0,a.createElement)(c.A,{key:"continue",isPrimary:!0,onClick:e},(0,o.__)("Continue to save","google-listings-and-ads"))],onRequestClose:t},(0,a.createElement)("p",null,(0,o.__)("Results typically improve with time.","google-listings-and-ads")),(0,a.createElement)("p",null,(0,o.__)("Changes will result in the loss of any optimisations learned over time.","google-listings-and-ads")),(0,a.createElement)("p",null,(0,o.__)("We recommend allowing your listings to run for at least 14 days after set up without changing them for optimal performance.","google-listings-and-ads")))}var p=n(5847),m=n(873),v=n(1650),f=n(6523),A=n(5622),S=n(5640),y=n(4716),C=n(5455),E=n(5807),w=n(8606),b=n(4471),R=n(8998),T=n(6473);function k(){const{targetAudience:e,getFinalCountries:t}=(0,p.A)(),{settings:n,saveSettings:c,syncSettings:d}=(0,m.A)(),{saveTargetAudience:h}=(0,g.j)(),{saveShippingRates:k}=(0,C.A)(),{saveShippingTimes:q}=(0,E.A)(),[F,M]=(0,s.useState)(e),[G,P]=(0,s.useState)(n),{hasFinishedResolution:B,data:j}=(0,f.A)(),[x,N]=(0,s.useState)(j),{hasFinishedResolution:Q,data:U}=(0,A.A)(),[Y,D]=(0,s.useState)(U),[J,K]=(0,s.useState)(null);(0,s.useEffect)((()=>P(n)),[n]),(0,s.useEffect)((()=>M(e)),[e]),(0,s.useEffect)((()=>N(j)),[j]),(0,s.useEffect)((()=>D(U)),[U]);const{createNotice:L}=(0,S.A)(),W=!(0,l.isEqual)(...[F,e].map((e=>({...e,countries:new Set(e?.countries)})))),z=!(0,l.isEqual)(G,n),H=(O=j,(I=x).length!==O.length||(0,y.A)(I,O).length>0);var I,O;const V=!(0,l.isEqual)(new Set(Y),new Set(U)),X=W||z||H||V;(0,v.A)((0,o.__)("You have unsaved changes. Are you sure you want to leave?","google-listings-and-ads"),X);const Z=F?.countries?F:null,$=G?.shipping_rate?G:null,ee=B?j:null,te=Q?U:null;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(b.A,null),(0,a.createElement)(r.A,null),(0,a.createElement)(u.A,{targetAudience:Z,resolveFinalCountries:t,onTargetAudienceChange:M,settings:$,onSettingsChange:P,shippingRates:ee,onShippingRatesChange:N,shippingTimes:te,onShippingTimesChange:D,onRequestSubmit:()=>new Promise((e=>{K((()=>t=>{e(t),K(null)}))})),onContinue:async()=>{try{const e=[h(F),c(G),k(x),q(Y)],t=await(0,w.A)(e,[(0,o.__)("Target audience","google-listings-and-ads"),(0,o.__)("Merchant Center Settings","google-listings-and-ads"),(0,o.__)("Shipping rates","google-listings-and-ads"),(0,o.__)("Shipping times","google-listings-and-ads")]);await d(),t?L("error",t):L("success",(0,o.__)("Your changes have been saved and will be synced to your Google Merchant Center account.","google-listings-and-ads")),(0,T.ce)("gla_free_campaign_edited")}catch(e){(0,R.h)(e,(0,o.__)("Unable to save your changes.","google-listings-and-ads"),(0,o.__)("Something went wrong while saving your changes. Please try again later.","google-listings-and-ads"))}},submitLabel:(0,o.__)("Save changes","google-listings-and-ads")}),(0,a.createElement)(i.Flex,{justify:"flex-end"},(0,a.createElement)(u.A.SubmitButton,null)),J&&(0,a.createElement)(_,{onContinue:()=>J(!0),onRequestClose:()=>J(!1)}))}}}]);