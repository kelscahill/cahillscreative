{% extends "@templates/_layout.twig" %}

{% block sections_before %}
  {% include "@organisms/sections/heroes/hero-media.twig" with {
    "hero_media": {
      "video": {
        "src": post.hero_video ? Post(post.hero_video).guid,
        "attributes": {
          "playsinline": "true",
          "autoplay": "true",
          "muted": "true",
          "loop": "true"
        }
      },
      "figure": {
        "image": {
          "sources": [
            {
              "media": "(min-width: 1200px)"|json_encode,
              "srcset": Image(post.hero_image).src('horiz__16x9--xl')
            },
            {
              "media": "(min-width: 500px)"|json_encode,
              "srcset": Image(post.hero_image).src('horiz__16x9--s')
            },
            {
              "media": "(min-width: 720px)"|json_encode,
              "srcset": Image(post.hero_image).src('horiz__16x9--m')
            },
            {
              "media": "(min-width: 960px)"|json_encode,
              "srcset": Image(post.hero_image).src('horiz__16x9--l')
            }
          ],
          "src": Image(post.hero_image).src|resize(500, 500),
          "alt": Image(post.hero_image).alt
        }
      }
    }
  } %}
{% endblock %}

{% block content %}
  {% include ['@organisms/content/content-single-' ~ post.post_type|replace({'_': '-'}) ~ '.twig', '@organisms/content/content-single.twig'] %}
{% endblock %}

{% block sections_after %}
  {% include "@organisms/sections/feeds/related-posts.twig" with {
    "related_posts": {
      "heading": "Read this next",
      "posts": related_blog_posts,
      "modifiers": "tertiary",
      "extra": options.single_post_promo.promo ? "u-padding--quad--bottom"
    }
  } %}
  {% include "@organisms/sections/promo/promo.twig" with {
    "promo": {
      "items": options.single_post_promo.promo
    }
  } %}
{% endblock %}
